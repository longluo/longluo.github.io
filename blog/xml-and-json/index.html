<!doctypehtml><html lang=zh-CN><meta charset=UTF-8><meta content=width=device-width name=viewport><meta content=#222 name=theme-color><meta content="Hexo 7.1.1" name=generator><link href=https://fonts.googleapis.com rel=preconnect><link href=https://cdnjs.cloudflare.com rel=preconnect><link href=https://www.longluo.me/assets/logo/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=https://www.longluo.me/assets/logo/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=https://www.longluo.me/assets/logo/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link color=#222 href=/images/logo.svg rel=mask-icon><meta content=n6mekvZa-QaR3EnDD-CzJymq7mGubpU7rvoGpKROHLE name=google-site-verification><meta content=6BFBD4DDDB3B6F4FDD26CF82BADDB931 name=msvalidate.01><meta content=a2ab49d952ea45f5 name=yandex-verification><meta content=www.longluo.me name=baidu-site-verification><link href=/css/main.css rel=stylesheet><link as=style href=https://fonts.googleapis.com/css2?family=Noto+Serif+SC:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Roboto+Mono:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap&subset=latin,latin-ext onload=this.rel='stylesheet' rel=preload><link crossorigin=anonymous href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css integrity=sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo= rel=stylesheet><link crossorigin=anonymous href=https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css integrity=sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE= rel=stylesheet><script class=next-config data-name=main type=application/json>{"hostname":"www.longluo.me","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.22.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"default"},"fold":{"enable":false,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":5,"unescape":false,"preload":false,"trigger":"auto"}}</script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.22.0/config.min.js></script><meta content="By Long Luo 引言 NOKIA 有句著名的广告语：“科技以人为本”。任何技术都是为了满足人的生产生活需要而产生的。具体到小小的一个手机，里面蕴含的技术也是浩如烟海，是几千年来人类科技的结晶，单个人穷其一生也未必能掌握其一角。不过个人一直认为基本的技术和思想是放之四海而皆准的，许多技术未必需要我们从头到尾再研究一遍，我们要做的就是站在巨人的肩膀上，利用其成果来为人们的需求服务。 随着移动互" name=description><meta content=article property=og:type><meta content=10分钟掌握XML、JSON及其解析 property=og:title><meta content=https://www.longluo.me/blog/xml-and-json/index.html property=og:url><meta content="Long Luo's Life Notes" property=og:site_name><meta content="By Long Luo 引言 NOKIA 有句著名的广告语：“科技以人为本”。任何技术都是为了满足人的生产生活需要而产生的。具体到小小的一个手机，里面蕴含的技术也是浩如烟海，是几千年来人类科技的结晶，单个人穷其一生也未必能掌握其一角。不过个人一直认为基本的技术和思想是放之四海而皆准的，许多技术未必需要我们从头到尾再研究一遍，我们要做的就是站在巨人的肩膀上，利用其成果来为人们的需求服务。 随着移动互" property=og:description><meta content=zh_CN property=og:locale><meta content=https://www.json.org/img/object.png property=og:image><meta content=https://www.json.org/img/array.png property=og:image><meta content=https://www.json.org/img/value.png property=og:image><meta content=https://www.json.org/img/string.png property=og:image><meta content=https://www.json.org/img/number.png property=og:image><meta content=2014-10-31T07:24:33.000Z property=article:published_time><meta content=2024-03-03T12:30:42.232Z property=article:modified_time><meta content="Long Luo" property=article:author><meta content=Java property=article:tag><meta content=Android property=article:tag><meta content=XML property=article:tag><meta content=JSON property=article:tag><meta content=summary name=twitter:card><meta content=https://www.json.org/img/object.png name=twitter:image><link href=https://www.longluo.me/blog/xml-and-json/ rel=canonical><script class=next-config data-name=page type=application/json>{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://www.longluo.me/blog/xml-and-json/","path":"/blog/xml-and-json/","title":"10分钟掌握XML、JSON及其解析"}</script><script class=next-config data-name=calendar type=application/json>""</script><title>10分钟掌握XML、JSON及其解析 | Long Luo's Life Notes</title><script async src=https://www.googletagmanager.com/gtag/js?id=UA-46213499-2></script><script class=next-config data-name=google_analytics type=application/json>{"tracking_id":"UA-46213499-2","only_pageview":false,"measure_protocol_api_secret":null}</script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.22.0/third-party/analytics/google-analytics.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.22.0/third-party/analytics/baidu-analytics.min.js></script><script async src=https://hm.baidu.com/hm.js?a75fb5d0c0ef1e36c34b7f52bb7c48be></script><script async src=https://assets.growingio.com/2.1/gio.js></script><script class=next-config data-name=growingio_analytics type=application/json>"bc65befc551b6d70"</script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.22.0/third-party/analytics/growingio.min.js></script><script>(function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "gz2vdkhgvh");</script><script data-domain=longluo.me defer src=https://plausible.io/js/script.js></script><link href=https://waline.longluo.me/ rel=dns-prefetch><noscript><link href=/css/noscript.css rel=stylesheet></noscript><style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style><link title="Long Luo's Life Notes" href=/atom.xml rel=alternate type=application/atom+xml><link title="Long Luo's Life Notes" href=/rss2.xml rel=alternate type=application/rss+xml><body class=use-motion itemscope itemtype=http://schema.org/WebPage><div class=headband></div><main class=main><div class=column><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=site-brand-container><div class=site-nav-toggle><div aria-label=切换导航栏 class=toggle role=button><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div></div><div class=site-meta><a class=brand href=/ rel=start> <i class=logo-line></i> <p class=site-title>Long Luo's Life Notes</p> <i class=logo-line></i> </a><p class=site-subtitle itemprop=description>每一天都是奇迹</div><div class=site-nav-right><div class="toggle popup-trigger" aria-label=搜索 role=button><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ rel=section><i class="fa fa-home fa-fw"></i>首页</a><li class="menu-item menu-item-works"><a href=/works rel=section><i class="fa fa-code fa-fw"></i>works</a><li class="menu-item menu-item-about"><a href=/about/ rel=section><i class="fa fa-user fa-fw"></i>关于</a><li class="menu-item menu-item-tags"><a href=/tags/ rel=section><i class="fa fa-tags fa-fw"></i>标签</a><li class="menu-item menu-item-categories"><a href=/categories/ rel=section><i class="fa fa-th fa-fw"></i>分类</a><li class="menu-item menu-item-archives"><a href=/archives/ rel=section><i class="fa fa-archive fa-fw"></i>归档</a><li class="menu-item menu-item-links"><a href=/links/ rel=section><i class="fa fa-link fa-fw"></i>友链</a><li class="menu-item menu-item-search"><a class=popup-trigger role=button><i class="fa fa-search fa-fw"></i>搜索 </a></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon> <i class="fa fa-search"></i> </span><div class=search-input-container><input autocapitalize=off autocomplete=off class=search-input maxlength=80 placeholder=搜索... spellcheck=false type=search></div><span class=popup-btn-close role=button> <i class="fa fa-times-circle"></i> </span></div><div class=search-result-container><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录<li class=sidebar-nav-overview>站点概览</ul><div class=sidebar-panel-container><!--noindex--><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class=nav><li class="nav-item nav-level-1"><a class=nav-link href=#%E5%BC%95%E8%A8%80><span class=nav-number>1.</span> <span class=nav-text>引言</span></a><li class="nav-item nav-level-1"><a class=nav-link href=#%E4%B8%80xml><span class=nav-number>2.</span> <span class=nav-text>一、XML</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#xml%E5%B1%9E%E6%80%A7><span class=nav-number>2.1.</span> <span class=nav-text>1.1 XML属性</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#xml%E4%B8%8Ehtml%E7%9A%84%E4%B8%BB%E8%A6%81%E5%B7%AE%E5%BC%82><span class=nav-number>2.1.1.</span> <span class=nav-text>1.1.1 XML与HTML的主要差异</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#xml%E6%98%AF%E4%B8%8D%E4%BD%9C%E4%B8%BA%E7%9A%84><span class=nav-number>2.1.2.</span> <span class=nav-text>1.1.2 XML是不作为的。</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#xml%E4%BB%85%E4%BB%85%E6%98%AF%E7%BA%AF%E6%96%87%E6%9C%AC><span class=nav-number>2.1.3.</span> <span class=nav-text>1.1.3 XML仅仅是纯文本</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#xml%E5%85%81%E8%AE%B8%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%87%E7%AD%BE><span class=nav-number>2.1.4.</span> <span class=nav-text>1.1.4 XML允许自定义标签</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#xml%E4%B8%8D%E6%98%AF%E5%AF%B9html%E7%9A%84%E6%9B%BF%E4%BB%A3><span class=nav-number>2.1.5.</span> <span class=nav-text>1.1.5 XML不是对HTML的替代</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#xml%E7%9A%84%E8%AF%AD%E6%B3%95><span class=nav-number>2.2.</span> <span class=nav-text>1.2 XML的语法</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E6%89%80%E6%9C%89%E5%85%83%E7%B4%A0%E9%83%BD%E5%BF%85%E9%A1%BB%E6%9C%89%E5%85%B3%E9%97%AD%E6%A0%87%E7%AD%BE><span class=nav-number>2.2.0.1.</span> <span class=nav-text>1.2.1 所有元素都必须有关闭标签</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#xml%E6%A0%87%E7%AD%BE%E5%AF%B9%E5%A4%A7%E5%B0%8F%E5%86%99%E6%95%8F%E6%84%9F><span class=nav-number>2.2.0.2.</span> <span class=nav-text>1.2.2 XML标签对大小写敏感</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#xml%E6%A0%87%E7%AD%BE%E5%AF%B9%E5%A4%A7%E5%B0%8F%E5%86%99%E6%95%8F%E6%84%9F-1><span class=nav-number>2.2.0.3.</span> <span class=nav-text>1.2.3 XML标签对大小写敏感</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#xml%E6%96%87%E6%A1%A3%E5%BF%85%E9%A1%BB%E6%9C%89%E6%A0%B9%E5%85%83%E7%B4%A0><span class=nav-number>2.2.0.4.</span> <span class=nav-text>1.2.4 XML文档必须有根元素</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#xml%E7%9A%84%E5%B1%9E%E6%80%A7%E5%80%BC%E9%A1%BB%E5%8A%A0%E5%BC%95%E5%8F%B7><span class=nav-number>2.2.0.5.</span> <span class=nav-text>1.2.5 XML的属性值须加引号</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#%E5%AE%9E%E4%BD%93%E5%BC%95%E7%94%A8><span class=nav-number>2.2.0.6.</span> <span class=nav-text>1.2.6 实体引用</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#xml%E4%B8%AD%E7%9A%84%E6%B3%A8%E9%87%8A><span class=nav-number>2.2.0.7.</span> <span class=nav-text>1.2.7 XML中的注释</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#%E4%BB%A5-lf-%E5%AD%98%E5%82%A8%E6%8D%A2%E8%A1%8C><span class=nav-number>2.2.0.8.</span> <span class=nav-text>1.2.8 以 LF 存储换行</span></a></ol><li class="nav-item nav-level-3"><a class=nav-link href=#xml-cdata><span class=nav-number>2.2.1.</span> <span class=nav-text>1.3 XML CDATA</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#pcdata><span class=nav-number>2.2.1.1.</span> <span class=nav-text>1.3.1 PCDATA</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6><span class=nav-number>2.2.1.2.</span> <span class=nav-text>1.3.2 转义字符</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#cdata><span class=nav-number>2.2.1.3.</span> <span class=nav-text>1.3.3 CDATA</span></a></ol></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E4%B8%BE%E4%B8%AA%E6%A0%97%E5%AD%90><span class=nav-number>2.3.</span> <span class=nav-text>1.4 举个栗子</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#xml%E6%A0%91%E7%BB%93%E6%9E%84><span class=nav-number>2.4.</span> <span class=nav-text>1.5 XML树结构</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E4%B8%80%E4%B8%AAxml%E6%96%87%E6%A1%A3%E5%AE%9E%E4%BE%8B><span class=nav-number>2.4.1.</span> <span class=nav-text>1.5.1 一个XML文档实例</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#xml-dom><span class=nav-number>2.5.</span> <span class=nav-text>1.6 XML DOM</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%AE%9A%E4%B9%89><span class=nav-number>2.5.1.</span> <span class=nav-text>1.6.1 定义</span></a><ol class=nav-child><li class="nav-item nav-level-5"><a class=nav-link href=#dom%E5%B0%86xml%E6%96%87%E6%A1%A3%E4%BD%9C%E4%B8%BA%E4%B8%80%E4%B8%AA%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84%E8%80%8C%E6%A0%91%E5%8F%B6%E8%A2%AB%E5%AE%9A%E4%B9%89%E4%B8%BA%E8%8A%82%E7%82%B9><span class=nav-number>2.5.1.0.1.</span> <span class=nav-text>DOM将XML文档作为一个树形结构，而树叶被定义为节点。</span></a></ol></ol><li class="nav-item nav-level-3"><a class=nav-link href=#%E6%80%BB%E7%BB%93><span class=nav-number>2.5.2.</span> <span class=nav-text>1.6.2 总结</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#xml%E5%A6%82%E4%BD%95%E8%A7%A3%E6%9E%90><span class=nav-number>2.6.</span> <span class=nav-text>1.7 XML如何解析？</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#step-1><span class=nav-number>2.6.1.</span> <span class=nav-text>1.7.1 Step 1</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#step-2><span class=nav-number>2.6.2.</span> <span class=nav-text>1.7.2 Step 2</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#step-3><span class=nav-number>2.6.3.</span> <span class=nav-text>1.7.3 Step 3</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#step-4><span class=nav-number>2.6.4.</span> <span class=nav-text>1.7.4 Step 4</span></a></ol><li class="nav-item nav-level-1"><a class=nav-link href=#%E4%BA%8Cjson><span class=nav-number>3.</span> <span class=nav-text>二、JSON</span></a><ol class=nav-child><li class="nav-item nav-level-2"><a class=nav-link href=#json%E6%98%AF%E4%BB%80%E4%B9%88><span class=nav-number>3.1.</span> <span class=nav-text>2.1 JSON是什么？</span></a><li class="nav-item nav-level-2"><a class=nav-link href=#json%E6%A0%BC%E5%BC%8F><span class=nav-number>3.2.</span> <span class=nav-text>2.2 JSON格式</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#json%E6%9E%84%E5%BB%BA%E4%BA%8E%E4%B8%A4%E7%A7%8D%E7%BB%93%E6%9E%84><span class=nav-number>3.2.0.1.</span> <span class=nav-text>JSON构建于两种结构：</span></a><li class="nav-item nav-level-4"><a class=nav-link href=#json%E5%85%B7%E6%9C%89%E4%BB%A5%E4%B8%8B%E8%BF%99%E4%BA%9B%E5%BD%A2%E5%BC%8F><span class=nav-number>3.2.0.2.</span> <span class=nav-text>JSON具有以下这些形式：</span></a></ol></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E4%B8%BE%E4%B8%AA%E6%A0%97%E5%AD%90-1><span class=nav-number>3.3.</span> <span class=nav-text>2.3 举个栗子</span></a><ol class=nav-child><li class="nav-item nav-level-5"><a class=nav-link href=#iqiyi%E6%8F%90%E4%BE%9B%E7%9A%84%E7%94%B5%E5%BD%B1%E9%A2%91%E9%81%93%E7%9A%84json%E7%94%B5%E5%BD%B1%E6%95%B0%E6%8D%AE%E5%A6%82%E4%B8%8B><span class=nav-number>3.3.0.0.1.</span> <span class=nav-text>iQiyi提供的电影频道的JSON电影数据如下：</span></a><ol class=nav-child><li class="nav-item nav-level-6"><a class=nav-link href=#%E4%BB%8E%E4%B8%8A%E9%9D%A2%E7%9A%84%E4%BE%8B%E5%AD%90%E5%8F%AF%E4%BB%A5%E5%BE%88%E6%B8%85%E6%99%B0%E7%9A%84%E7%9C%8B%E5%87%BAjson%E6%98%AF%E5%A6%82%E4%BD%95%E5%B1%95%E7%A4%BA%E4%B8%80%E4%B8%AA%E7%94%B5%E5%BD%B1%E7%9A%84%E6%95%B0%E6%8D%AE%E7%9A%84%E5%BD%93%E7%84%B6%E8%BF%99%E6%98%AFjson%E6%A0%BC%E5%BC%8F%E5%8C%96%E4%B9%8B%E5%90%8E%E7%9A%84%E6%95%B0%E6%8D%AEjson%E7%9A%84%E5%85%83%E6%95%B0%E6%8D%AE%E6%98%AF%E4%B8%8D%E4%BE%BF%E4%BA%8E%E9%98%85%E8%AF%BB%E7%9A%84><span class=nav-number>3.3.0.0.1.1.</span> <span class=nav-text>从上面的例子可以很清晰的看出JSON是如何展示一个电影的数据的，当然这是JSON格式化之后的数据。JSON的元数据是不便于阅读的。</span></a></ol></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E5%A6%82%E4%BD%95%E8%A7%A3%E6%9E%90json><span class=nav-number>3.4.</span> <span class=nav-text>2.4 如何解析JSON？</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%B8%B8%E8%A7%81%E6%96%B9%E6%B3%95><span class=nav-number>3.4.1.</span> <span class=nav-text>&LT1>. 常见方法</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#android%E4%B8%AD%E5%A6%82%E4%BD%95%E5%88%9B%E5%BB%BAjson><span class=nav-number>3.4.2.</span> <span class=nav-text>&LT2>. Android中如何创建JSON？</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#%E5%A6%82%E4%BD%95%E8%A7%A3%E6%9E%90json-1><span class=nav-number>3.4.3.</span> <span class=nav-text>&LT3>. 如何解析JSON？</span></a><li class="nav-item nav-level-3"><a class=nav-link href=#android-json%E8%A7%A3%E6%9E%90%E5%BA%93><span class=nav-number>3.4.4.</span> <span class=nav-text>&LT4>. Android JSON解析库</span></a></ol><li class="nav-item nav-level-2"><a class=nav-link href=#%E4%B8%89-json-vs.-xml><span class=nav-number>3.5.</span> <span class=nav-text># 三、 JSON vs. XML</span></a><ol class=nav-child><li class="nav-item nav-level-3"><a class=nav-link href=#json%E7%9B%B8%E6%AF%94xml%E7%9A%84%E4%B8%8D%E5%90%8C%E4%B9%8B%E5%A4%84><span class=nav-number>3.5.1.</span> <span class=nav-text>&LT1>. JSON相比XML的不同之处</span></a><ol class=nav-child><li class="nav-item nav-level-4"><a class=nav-link href=#%E6%80%BB%E4%B9%8B-json-%E6%AF%94-xml-%E6%9B%B4%E5%B0%8F%E6%9B%B4%E5%BF%AB%E6%9B%B4%E6%98%93%E8%A7%A3%E6%9E%90><span class=nav-number>3.5.1.1.</span> <span class=nav-text>总之： JSON 比 XML 更小、更快，更易解析。</span></a></ol><li class="nav-item nav-level-3"><a class=nav-link href=#xml%E5%92%8Cjson%E7%9A%84%E5%8C%BA%E5%88%AB><span class=nav-number>3.5.2.</span> <span class=nav-text>&LT2>. XML和JSON的区别：</span></a><ol class=nav-child><li class="nav-item nav-level-5"><a class=nav-link href=#one-more-thing><span class=nav-number>3.5.2.0.1.</span> <span class=nav-text>One More Thing…</span></a></ol></ol><li class="nav-item nav-level-1"><a class=nav-link href=#%E5%9B%9B%E6%80%BB%E7%BB%93><span class=nav-number>4.</span> <span class=nav-text>四、总结</span></a><li class="nav-item nav-level-1"><a class=nav-link href=#%E6%96%87%E7%AB%A0%E4%BF%AE%E6%94%B9%E5%8E%86%E5%8F%B2><span class=nav-number>5.</span> <span class=nav-text>文章修改历史</span></a></div></div><!--/noindex--><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop=author itemscope itemtype=http://schema.org/Person><img alt="Long Luo" class=site-author-image itemprop=image src=https://www.longluo.me/assets/avatar/sinc-3d-python.png><p class=site-author-name itemprop=name>Long Luo<div class=site-description itemprop=description>A Curious Engineer</div></div><div class="site-state-wrap animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/> <span class=site-state-item-count>347</span> <span class=site-state-item-name>日志</span> </a></div><div class="site-state-item site-state-categories"><a href=/categories/> <span class=site-state-item-count>27</span> <span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/> <span class=site-state-item-count>365</span> <span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-author animated"><span class=links-of-author-item> <a rel="noopener me" title="GitHub → https://github.com/longluo" href=https://github.com/longluo target=_blank><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class=links-of-author-item> <a rel="noopener me" title="ZhiHu → http://www.zhihu.com/people/longluo" href=http://www.zhihu.com/people/longluo target=_blank><i class="fab fa-quora fa-fw"></i>ZhiHu</a> </span><span class=links-of-author-item> <a rel="noopener me" title="LinkedIn → https://www.linkedin.com/in/longluo/" href=https://www.linkedin.com/in/longluo/ target=_blank><i class="fa fa-linkedin fa-fw"></i>LinkedIn</a> </span><span class=links-of-author-item> <a rel="noopener me" title="E-Mail → mailto:luolong0226@163.com" href=mailto:luolong0226@163.com target=_blank><i class="fa fa-envelope fa-fw"></i>E-Mail</a> </span></div><div class="cc-license animated" itemprop=license><a class=cc-opacity href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh rel=noopener target=_blank><img alt="Creative Commons" src=https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg></a></div></div></div></div><div class="sidebar-inner sidebar-blogroll"><div class="links-of-blogroll animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i> 链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=http://blog.csdn.net/tcpipstack rel=noopener target=_blank title=http://blog.csdn.net/tcpipstack>My CSDN</a></ul></div></div></aside></div><div class="main-inner post posts-expand"><div class=post-block><article class=post-content itemscope itemtype=http://schema.org/Article lang=zh-CN><link href=https://www.longluo.me/blog/xml-and-json/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta content=https://www.longluo.me/assets/avatar/sinc-3d-python.png itemprop=image> <meta content="Long Luo" itemprop=name> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content="Long Luo's Life Notes" itemprop=name> <meta content="A Curious Engineer" itemprop=description> </span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork> <meta content="10分钟掌握XML、JSON及其解析 | Long Luo's Life Notes" itemprop=name> <meta itemprop=description> </span><header class=post-header><h1 itemprop="name headline" class=post-title>10分钟掌握XML、JSON及其解析<a class=post-edit-link href=https://github.com/longluo/blog/tree/master/source/_posts/xml-and-json.md rel=noopener target=_blank title=编辑><i class="fa fa-pen-nib"></i></a></h1><div class=post-meta-container><div class=post-meta><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar"></i> </span> <span class=post-meta-item-text>发表于</span> <time itemprop="dateCreated datePublished" title="创建时间：2014-10-31 15:24:33" datetime=2014-10-31T15:24:33+08:00>2014-10-31</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar-check"></i> </span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2024-03-03 20:30:42" datetime=2024-03-03T20:30:42+08:00 itemprop=dateModified>2024-03-03</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-folder"></i> </span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing> <a href=/categories/Java/ itemprop=url rel=index><span itemprop=name>Java</span></a> </span> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-comment"></i> </span> <span class=post-meta-item-text>Waline：</span> <a href=/blog/xml-and-json/#waline itemprop=discussionUrl title=waline> <span class="post-comments-count waline-comment-count" data-path=/blog/xml-and-json/ itemprop=commentCount></span> </a> </span><span class=post-meta-item title=阅读次数> <span class=post-meta-item-icon> <i class="far fa-eye"></i> </span> <span class=post-meta-item-text>阅读次数：</span> <span class=waline-pageview-count data-path=/blog/xml-and-json/></span> </span><span class=post-meta-break></span><span class=post-meta-item title=本文字数> <span class=post-meta-item-icon> <i class="far fa-file-word"></i> </span> <span class=post-meta-item-text>本文字数：</span> <span>26k</span> </span><span class=post-meta-item title=阅读时长> <span class=post-meta-item-icon> <i class="far fa-clock"></i> </span> <span class=post-meta-item-text>阅读时长 ≈</span> <span>24 分钟</span> </span></div></div></header><div class=post-body itemprop=articleBody><p><strong><em>By Long Luo</em></strong><h1 id=引言>引言</h1><p>NOKIA 有句著名的广告语：“<strong>科技以人为本</strong>”。任何技术都是为了满足人的生产生活需要而产生的。具体到小小的一个手机，里面蕴含的技术也是浩如烟海，是几千年来人类科技的结晶，单个人穷其一生也未必能掌握其一角。不过个人一直认为基本的技术和思想是放之四海而皆准的，许多技术未必需要我们从头到尾再研究一遍，我们要做的就是站在巨人的肩膀上，利用其成果来为人们的需求服务。<p>随着移动互联网时代的大潮，越来越多的 App <strong>不光是需要和网络服务器进行数据传输和交互，也需要和其他 App 进行数据传递</strong>。承担 App 与网络来进行传输和存储数据的一般是 XML 或者 JSON 。在移动互联网时代，XML 和 JSON 很重要。<p>最近一段时间，个人综合了之前对 XML 、JSON的一些了解，参考了相关资料，再结合视频的代码，把自己的一些思考融入了这篇总结文档中，同时尝试用通俗诙谐的语言风格来阐述，期望能给感兴趣的读者带来帮助。<p>为了不和时代落伍，我们必须要学习 XML 和 JSON ，但同时它们也很容易学习，Let’s start :-)<h1 id=一xml>一、XML</h1><p>XML 即<strong>可扩展标记语言</strong>(<strong>eXtensible Markup Language</strong>)。标记是指计算机所能理解的信息符号，通过此种标记，计算机之间可以处理包含各种信息的文章等。如何定义这些标记，既可以选择国际通用的标记语言，比如HTML，也可以使用象XML这样由相关人士自由决定的标记语言，这就是语言的可扩展性。XML 是从 SGML 中简化修改出来的。它主要用到的有XML、XSL 和 XPath 等。<p>上面这段是对XML的一个基本定义，一个被广泛接受的说明。简单说，XML就是一种数据的描述语言，虽然它是语言，但是通常情况下，它并不具备常见语言的基本功能——被计算机识别并运行。只有依靠另一种语言，来解释它，使它达到你想要的效果或被计算机所接受。<p>记住以下几点就行了：<ul><li>XML是一种标记语言，很类似HTML<li>XML的设计宗旨是传输数据，而非显示数据<li>XML标签没有被预定义。您需要自行定义标签。<li>XML被设计为具有自我描述性。<li>XML是W3C的推荐标准</ul><p><strong><em>总结：</em></strong><p>XML 是独立于软件和硬件的信息传输工具。目前，XML 在 Web 中起到的作用不会亚于一直作为 Web 基石的 HTML。<p><strong>XML无所不在</strong>。XML 是各种应用程序之间进行<strong>数据传输的最常用的工具</strong>，并且在信息存储和描述领域变得越来越流行。<h2 id=xml属性>1.1 XML属性</h2><h3 id=xml与html的主要差异>1.1.1 XML与HTML的主要差异</h3><ul><li>XML不是HTML的替代。<li>XML和HTML为不同的目的而设计。<li>XML被设计为传输和存储数据，其焦点是数据的内容。<li>HTML被设计用来显示数据，其焦点是数据的外观。<li>HTML旨在显示信息，而 XML 旨在传输信息</ul><h3 id=xml是不作为的>1.1.2 XML是不作为的。</h3><p>也许这有点难以理解，但是XML不会做任何事情。XML被设计用来<strong>结构化、存储以及传输信息</strong>。<p>下面是John写给George的便签，存储为XML：<figure class="highlight xml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>note</span>></span></span><br><span class=line><span class=tag><<span class=name>to</span>></span>George<span class=tag>&LT/<span class=name>to</span>></span></span><br><span class=line><span class=tag><<span class=name>from</span>></span>John<span class=tag>&LT/<span class=name>from</span>></span></span><br><span class=line><span class=tag><<span class=name>heading</span>></span>Reminder<span class=tag>&LT/<span class=name>heading</span>></span></span><br><span class=line><span class=tag><<span class=name>body</span>></span>Don't forget the meeting!<span class=tag>&LT/<span class=name>body</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>note</span>></span></span><br></pre></table></figure><p>上面的这条便签具有自我描述性。它拥有标题以及留言，同时包含了发送者和接受者的信息。但是，这个 XML 文档仍然没有做任何事情。它仅仅是包装在XML标签中的纯粹的信息。我们需要编写软件或者程序，才能传送、接收和显示出这个文档。<h3 id=xml仅仅是纯文本>1.1.3 XML仅仅是纯文本</h3><p>XML没什么特别的。它仅仅是纯文本而已。有能力处理纯文本的软件都可以处理XML。 不过，能够读懂 XML 的应用程序可以有针对性地处理 XML 的标签。标签的功能性意义依赖于应用程序的特性。<h3 id=xml允许自定义标签>1.1.4 XML允许自定义标签</h3><p>上例中的标签没有在任何XML标准中定义过（比如<to>和<from>）。这些标签是由文档的创作者发明的。这是因为XML没有预定义的标签。</from></to><p>在HTML中使用的标签（以及HTML的结构）是预定义的。HTML文档只使用在HTML标准中定义过的标签（比如<code>&LTp></code>，<code>&LTh1></code> 等等）。<p>XML允许创作者定义自己的标签和自己的文档结构。<h3 id=xml不是对html的替代>1.1.5 XML不是对HTML的替代</h3><p>XML是对HTML的补充。<p>XML不会替代HTML，理解这一点很重要。在大多数 web 应用程序中，XML用于传输数据，而HTML用于格式化并显示数据。</p><span id=more></span><h2 id=xml的语法>1.2 XML的语法</h2><p>XML的语法规则很简单，且很有逻辑。这些规则很容易学习，也很容易使用。<h4 id=所有元素都必须有关闭标签>1.2.1 所有元素都必须有关闭标签</h4><p>在XML中，省略关闭标签是非法的。所有元素都<strong>必须有关闭标签</strong>。 在HTML，经常会看到没有关闭标签的元素：<figure class="highlight xml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>p</span>></span>This is a paragraph</span><br><span class=line><span class=tag><<span class=name>p</span>></span>This is another paragraph</span><br></pre></table></figure><p>在XML中，省略关闭标签是非法的。所有元素都必须有关闭标签：<figure class="highlight xml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>p</span>></span>This is a paragraph<span class=tag>&LT/<span class=name>p</span>></span></span><br><span class=line><span class=tag><<span class=name>p</span>></span>This is another paragraph<span class=tag>&LT/<span class=name>p</span>></span>  </span><br></pre></table></figure><p>注释：您也许已经注意到XML声明没有关闭标签。这不是错误。声明不属于XML本身的组成部分。它不是XML元素，也不需要关闭标签。<h4 id=xml标签对大小写敏感>1.2.2 XML标签对大小写敏感</h4><p>XML元素使用XML标签进行定义。<p>XML标签对大小写敏感。在XML中，标签<letter>与标签<letter>是不同的。</letter></letter><p>必须使用相同的大小写来编写打开标签和关闭标签：<figure class="highlight xml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>Message</span>></span>这是错误的。<span class=tag>&LT/<span class=name>message</span>></span></span><br><span class=line><span class=tag><<span class=name>message</span>></span>这是正确的。<span class=tag>&LT/<span class=name>message</span>></span> </span><br></pre></table></figure><h4 id=xml标签对大小写敏感-1>1.2.3 XML标签对大小写敏感</h4><p>在 HTML 中，常会看到没有正确嵌套的元素：<figure class="highlight xml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>b</span>></span><span class=tag><<span class=name>i</span>></span>This text is bold and italic<span class=tag>&LT/<span class=name>b</span>></span><span class=tag>&LT/<span class=name>i</span>></span></span><br></pre></table></figure><p>在 XML中，所有元素都必须彼此正确地嵌套：<figure class="highlight xml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>b</span>></span><span class=tag><<span class=name>i</span>></span>This text is bold and italic<span class=tag>&LT/<span class=name>i</span>></span><span class=tag>&LT/<span class=name>b</span>></span></span><br></pre></table></figure><p>在上例中，正确嵌套的意思是：由于<code>&LTi></code>元素是在<code>&LTb></code>元素内打开的，那么它必须在<code>&LTb></code>元素内关闭。<h4 id=xml文档必须有根元素>1.2.4 XML文档必须有根元素</h4><p>XML文档必须有一个元素是所有其他元素的父元素。该元素称为根元素。<figure class="highlight xml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>root</span>></span></span><br><span class=line>  <span class=tag><<span class=name>child</span>></span></span><br><span class=line>    <span class=tag><<span class=name>subchild</span>></span>.....<span class=tag>&LT/<span class=name>subchild</span>></span></span><br><span class=line>  <span class=tag>&LT/<span class=name>child</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>root</span>></span></span><br></pre></table></figure><h4 id=xml的属性值须加引号>1.2.5 XML的属性值须加引号</h4><p>与 HTML 类似，XML 也可拥有属性（名称/值的对）。 在 XML 中，XML 的属性值须加引号。请研究下面的两个 XML 文档。第一个是错误的，第二个是正确的：<figure class="highlight xml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>note</span> <span class=attr>date</span>=<span class=string>08/08/2008</span>></span></span><br><span class=line><span class=tag><<span class=name>to</span>></span>George<span class=tag>&LT/<span class=name>to</span>></span></span><br><span class=line><span class=tag><<span class=name>from</span>></span>John<span class=tag>&LT/<span class=name>from</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>note</span>></span> </span><br><span class=line></span><br><span class=line><span class=tag><<span class=name>note</span> <span class=attr>date</span>=<span class=string>"08/08/2008"</span>></span></span><br><span class=line><span class=tag><<span class=name>to</span>></span>George<span class=tag>&LT/<span class=name>to</span>></span></span><br><span class=line><span class=tag><<span class=name>from</span>></span>John<span class=tag>&LT/<span class=name>from</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>note</span>></span> </span><br></pre></table></figure><p>在第一个文档中的错误是，note 元素中的 date 属性没有加引号。<h4 id=实体引用>1.2.6 实体引用</h4><p>在 XML 中，一些字符拥有特殊的意义。 如果你把字符 “<” 放在 XML 元素中，会发生错误，这是因为解析器会把它当作新元素的开始。 这样会产生 XML 错误：<figure class="highlight xml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>message</span>></span>if salary < 1000 then<span class=tag>&LT/<span class=name>message</span>></span></span><br></pre></table></figure><p>为了避免这个错误，请用实体引用来代替 “<” 字符：<figure class="highlight xml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>message</span>></span>if salary <span class=symbol>&amplt;</span> 1000 then<span class=tag>&LT/<span class=name>message</span>></span> </span><br></pre></table></figure><p>在 XML 中，有 5 个预定义的实体引用：<pre><code>&amplt;    <   小于
&ampgt;    >   大于
&ampamp;   &   和号
&ampapos;  '   单引号
&ampquot;  "   引号</code></pre><p>注释：在 XML 中，只有字符 “<” 和 “&” 确实是非法的。大于号是合法的，但是用实体引用来代替它是一个好习惯。<h4 id=xml中的注释>1.2.7 XML中的注释</h4><p>在 XML 中编写注释的语法与 HTML 的语法很相似：<figure class="highlight xml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=comment>&LT!-- This is a comment --></span> </span><br></pre></table></figure><p>在 XML 中，空格会被保留。<p>HTML 会把多个连续的空格字符裁减（合并）为一个：<pre><code>HTML:   Hello           my name is David.</code></pre><p>输出:<p>Hello my name is David.<p>在 XML 中，文档中的空格不会被删节。<h4 id=以-lf-存储换行>1.2.8 以 LF 存储换行</h4><p>在 Windows 应用程序中，换行通常以一对字符来存储：回车符 (CR) 和换行符 (LF)。这对字符与打字机设置新行的动作有相似之处。在 Unix 应用程序中，新行以 LF 字符存储。而 Macintosh 应用程序使用CR来存储新行。<h3 id=xml-cdata>1.3 XML CDATA</h3><p>所有XML文档中的文本均会被解析器解析。<p>只有CDATA区段（CDATA section）中的文本会被解析器忽略。<h4 id=pcdata>1.3.1 PCDATA</h4><p>PCDATA指的是被解析的字符数据（Parsed Character Data）。<p>XML解析器通常会解析XML文档中所有的文本。 当某个XML元素被解析时，其标签之间的文本也会被解析：<figure class="highlight xml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>message</span>></span>此文本也会被解析<span class=tag>&LT/<span class=name>message</span>></span></span><br></pre></table></figure><p>解析器之所以这么做是因为 XML 元素可包含其他元素，就像这个例子中，其中的<name>元素包含着另外的两个元素(first和last)：</name><figure class="highlight xml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>name</span>></span><span class=tag><<span class=name>first</span>></span>Bill<span class=tag>&LT/<span class=name>first</span>></span><span class=tag><<span class=name>last</span>></span>Gates<span class=tag>&LT/<span class=name>last</span>></span><span class=tag>&LT/<span class=name>name</span>></span></span><br></pre></table></figure><p>而解析器会把它分解为像这样的子元素：<figure class="highlight xml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>name</span>></span></span><br><span class=line>   <span class=tag><<span class=name>first</span>></span>Bill<span class=tag>&LT/<span class=name>first</span>></span></span><br><span class=line>   <span class=tag><<span class=name>last</span>></span>Gates<span class=tag>&LT/<span class=name>last</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>name</span>></span></span><br></pre></table></figure><h4 id=转义字符>1.3.2 转义字符</h4><p>非法的XML字符必须被替换为实体引用（entity reference）。<p>假如您在XML文档中放置了一个类似 “<” 字符，那么这个文档会产生一个错误，这是因为解析器会把它解释为新元素的开始。因此你不能这样写：<figure class="highlight xml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>message</span>></span>if salary < 1000 then<span class=tag>&LT/<span class=name>message</span>></span></span><br></pre></table></figure><p>为了避免此类错误，需要把字符 “<” 替换为实体引用，就像这样：<figure class="highlight xml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>message</span>></span>if salary <span class=symbol>&amplt;</span> 1000 then<span class=tag>&LT/<span class=name>message</span>></span></span><br></pre></table></figure><p>在 XML 中有 5 个预定义的实体引用：<pre><code>&amplt;    <   小于
&ampgt;    >   大于
&ampamp;   &   和号
&ampapos;  '   省略号
&ampquot;  "   引号</code></pre><p>注释：严格地讲，在XML中仅有字符”<“和”&“是非法的。省略号、引号和大于号是合法的，但是把它们替换为实体引用是个好的习惯。<h4 id=cdata>1.3.3 CDATA</h4><p>术语CDATA指的是不应由XML解析器进行解析的文本数据（Unparsed Character Data）。<p>在 XML 元素中，“<” 和 “&” 是非法的。<p>“<” 会产生错误，因为解析器会把该字符解释为新元素的开始。 “&” 也会产生错误，因为解析器会把该字符解释为字符实体的开始。<p>某些文本，比如 JavaScript 代码，包含大量 “<” 或 “&” 字符。为了避免错误，可以将脚本代码定义为 CDATA。 CDATA 部分中的所有内容都会被解析器忽略。 CDATA 部分由 “&LT![CDATA[” 开始，由 ”]]>” 结束：<pre><code>&LTscript>
&LT![CDATA[
function matchwo(a,b)
{
if (a < b && a < 0) then
  {
  return 1;
  }
else
  {
  return 0;
  }
}
]]>
&LT/script></code></pre><p>在上面的例子中，解析器会忽略 CDATA 部分中的所有内容。<p>关于CDATA 部分的注释： CDATA部分不能包含字符串 “]]>”。也不允许嵌套的CDATA部分。 标记CDATA部分结尾的”]]>” 不能包含空格或折行。<h2 id=举个栗子>1.4 举个栗子</h2><p>上面关于XML讲了这么多，大家都表示一头雾水了吧？<p>没关系，我们来举个栗子，让大家有个直观的感受:-)<p>以目前视频使用的iQiyi提供的频道接口为例：<p>iQiyi提供的电影频道的XML电影数据如下：<figure class="highlight xml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br></pre><td class=code><pre><span class=line><span class=meta>&LT?xml version=<span class=string>"1.0"</span> encoding=<span class=string>"utf-8"</span>?></span></span><br><span class=line><span class=tag><<span class=name>response</span>></span> </span><br><span class=line>  <span class=tag><<span class=name>header</span>></span> </span><br><span class=line>    <span class=tag><<span class=name>respcode</span>></span>0<span class=tag>&LT/<span class=name>respcode</span>></span>  </span><br><span class=line>    <span class=tag><<span class=name>total</span>></span>1736<span class=tag>&LT/<span class=name>total</span>></span> </span><br><span class=line>  <span class=tag>&LT/<span class=name>header</span>></span>  </span><br><span class=line>  <span class=tag><<span class=name>result</span>></span> </span><br><span class=line>    <span class=tag><<span class=name>album</span>></span> </span><br><span class=line>      <span class=tag><<span class=name>album_id</span>></span>320305900<span class=tag>&LT/<span class=name>album_id</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>title</span>></span> &LT![CDATA[ 电影侃侃之初恋永不早 ]]> <span class=tag>&LT/<span class=name>title</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>tag</span>></span> &LT![CDATA[ 18岁以上 当代 暧昧 华语 ]]> <span class=tag>&LT/<span class=name>tag</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>img</span>></span>http://pic9.qiyipic.com/image/20141016/ec/e0/v_108639906_m_601_120_160.jpg<span class=tag>&LT/<span class=name>img</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>img180236</span>></span>http://pic9.qiyipic.com/image/20141016/ec/e0/v_108639906_m_601_180_236.jpg<span class=tag>&LT/<span class=name>img180236</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>img11577</span>></span>http://pic9.qiyipic.com/image/20141016/ec/e0/v_108639906_m_601_115_77.jpg<span class=tag>&LT/<span class=name>img11577</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>img220124</span>></span>http://pic9.qiyipic.com/image/20141016/ec/e0/v_108639906_m_601_284_160.jpg<span class=tag>&LT/<span class=name>img220124</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>category_id</span>></span>1<span class=tag>&LT/<span class=name>category_id</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>score</span>></span>0.0<span class=tag>&LT/<span class=name>score</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>voters</span>></span>0<span class=tag>&LT/<span class=name>voters</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>tv_sets</span>></span>0<span class=tag>&LT/<span class=name>tv_sets</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>duration</span>></span>00:38:57<span class=tag>&LT/<span class=name>duration</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>year</span>></span> &LT![CDATA[ 2014 ]]> <span class=tag>&LT/<span class=name>year</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>tv_focus</span>></span>跟爱情片学把妹心经<span class=tag>&LT/<span class=name>tv_focus</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>episode_count</span>></span>1<span class=tag>&LT/<span class=name>episode_count</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>directors</span>></span> &LT![CDATA[ 关雅荻 ]]> <span class=tag>&LT/<span class=name>directors</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>mainactors</span>></span> &LT![CDATA[ 关雅荻 ]]> <span class=tag>&LT/<span class=name>mainactors</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>actors</span>></span> &LT![CDATA[ ]]> <span class=tag>&LT/<span class=name>actors</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>vv2</span>></span> &LT![CDATA[ 15 ]]> <span class=tag>&LT/<span class=name>vv2</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>timeText</span>></span> &LT![CDATA[ 今天 ]]> <span class=tag>&LT/<span class=name>timeText</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>first_issue_time</span>></span> &LT![CDATA[ 2014-10-16 ]]> <span class=tag>&LT/<span class=name>first_issue_time</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>up</span>></span>0<span class=tag>&LT/<span class=name>up</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>down</span>></span>0<span class=tag>&LT/<span class=name>down</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>download</span>></span>1<span class=tag>&LT/<span class=name>download</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>purchase_type</span>></span>0<span class=tag>&LT/<span class=name>purchase_type</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>hot_or_new</span>></span>0<span class=tag>&LT/<span class=name>hot_or_new</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>createtime</span>></span>2014-10-16 12:25:08<span class=tag>&LT/<span class=name>createtime</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>purchase</span>></span>0<span class=tag>&LT/<span class=name>purchase</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>desc</span>></span> &LT![CDATA[</span><br><span class=line>本期节目主持人介绍新近上映的口碑爱情片，。主持人轻松幽默的罗列出胡鳄鱼导演拍摄的爱情片越来越接地气，博得观众的认同和追捧，更提出“初恋永远不嫌早”的口号。观众可以跟着爱情片学习把妹心经。</span><br><span class=line>]]> <span class=tag>&LT/<span class=name>desc</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>ip_limit</span>></span>1<span class=tag>&LT/<span class=name>ip_limit</span>></span>  </span><br><span class=line>      <span class=tag><<span class=name>episodes</span>/></span> </span><br><span class=line>    <span class=tag>&LT/<span class=name>album</span>></span> </span><br><span class=line>  <span class=tag>&LT/<span class=name>result</span>></span> </span><br><span class=line><span class=tag>&LT/<span class=name>response</span>></span></span><br></pre></table></figure><p>这是展示一部电影的具体数据，包括标题、介绍、内容、导演、演员、时长、上映年份等很多内容。<h2 id=xml树结构>1.5 XML树结构</h2><p><strong>XML文档形成了一种树结构，它从“根部”开始，然后扩展到“枝叶”。</strong><h3 id=一个xml文档实例>1.5.1 一个XML文档实例</h3><p>XML使用简单的具有自我描述性的语法：<figure class="highlight xml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre><td class=code><pre><span class=line><span class=meta>&LT?xml version=<span class=string>"1.0"</span> encoding=<span class=string>"ISO-8859-1"</span>?></span></span><br><span class=line><span class=tag><<span class=name>note</span>></span></span><br><span class=line><span class=tag><<span class=name>to</span>></span>George<span class=tag>&LT/<span class=name>to</span>></span></span><br><span class=line><span class=tag><<span class=name>from</span>></span>John<span class=tag>&LT/<span class=name>from</span>></span></span><br><span class=line><span class=tag><<span class=name>heading</span>></span>Reminder<span class=tag>&LT/<span class=name>heading</span>></span></span><br><span class=line><span class=tag><<span class=name>body</span>></span>Don't forget the meeting!<span class=tag>&LT/<span class=name>body</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>note</span>></span></span><br></pre></table></figure><p>第一行是XML声明。它定义XML的版本(1.0)和所使用的编码(ISO-8859-1=Latin-1/西欧字符集)。<p>下一行描述文档的根元素（像在说：“本文档是一个便签”）：<figure class="highlight xml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>note</span>></span></span><br></pre></table></figure><p>接下来 4 行描述根的 4 个子元素（to, from, heading 以及 body）：<figure class="highlight xml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>to</span>></span>George<span class=tag>&LT/<span class=name>to</span>></span></span><br><span class=line><span class=tag><<span class=name>from</span>></span>John<span class=tag>&LT/<span class=name>from</span>></span></span><br><span class=line><span class=tag><<span class=name>heading</span>></span>Reminder<span class=tag>&LT/<span class=name>heading</span>></span></span><br><span class=line><span class=tag><<span class=name>body</span>></span>Don't forget the meeting!<span class=tag>&LT/<span class=name>body</span>></span></span><br></pre></table></figure><p>最后一行定义根元素的结尾：<figure class="highlight xml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class=tag>&LT/<span class=name>note</span>></span></span><br></pre></table></figure><p>从本例可以设想，该XML文档包含了John给George的一张便签。<ul><li>XML具有出色的自我描述性，你同意吗？<li>XML文档形成一种树结构<li>XML文档必须包含根元素。该元素是所有其他元素的父元素。<li>XML文档中的元素形成了一棵文档树。这棵树从根部开始，并扩展到树的最底端。</ul><p>所有元素均可拥有子元素：<figure class="highlight xml"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre><td class=code><pre><span class=line><span class=tag><<span class=name>root</span>></span></span><br><span class=line>  <span class=tag><<span class=name>child</span>></span></span><br><span class=line>    <span class=tag><<span class=name>subchild</span>></span>.....<span class=tag>&LT/<span class=name>subchild</span>></span></span><br><span class=line>  <span class=tag>&LT/<span class=name>child</span>></span></span><br><span class=line><span class=tag>&LT/<span class=name>root</span>></span></span><br></pre></table></figure><p>父、子以及同胞等术语用于描述元素之间的关系。父元素拥有子元素。相同层级上的子元素成为同胞（兄弟或姐妹）。<p>所有元素均可拥有文本内容和属性（类似HTML中）。<h2 id=xml-dom>1.6 XML DOM</h2><p>想到这里，大家都有点迫不及待了，XML 文件到底如何解析呢？<p>但是，别急，让子弹先飞会儿:-)<p>在XML解析之前，我们必须系统性的学习一下 XML DOM 知识：<h3 id=定义>1.6.1 定义</h3><p>XML DOM(<strong>XML Document Object Model</strong>) 定义了访问和操作XML文档的标准方法。<p>DOM把XML文档作为树结构来查看。能够通过DOM树来访问所有元素。可以修改或删除它们的内容，并创建新的元素。元素，它们的文本，以及它们的属性，都被认为是节点。<p>XML DOM是：<ul><li>用于XML的标准对象模型<li>用于XML的标准编程接口<li>中立于平台和语言<li>W3C的标准</ul><p>XML DOM定义了所有XML元素的对象和属性，以及访问它们的方法（接口）。<p>换句话说：<p>XML DOM是用于获取、更改、添加或删除XML元素的标准<h5 id=dom将xml文档作为一个树形结构而树叶被定义为节点>DOM将XML文档作为一个树形结构，而树叶被定义为节点。</h5><h3 id=总结>1.6.2 总结</h3><p>XML DOM其实比较复杂，在这么短的篇幅里也无法一一进行讲解。想详细了解XML DOM可以好好去学习下<h2 id=xml如何解析>1.7 XML如何解析？</h2><p>上面讲了这么多关于XML的东西，那么XML文件应该如何解析呢？<p>终于到了我们的重头戏了<p>下面以视频项目为例，展示如何解析XML文件：<h3 id=step-1>1.7.1 Step 1</h3><p>XML文件是一棵树，首先需要找到对应的节点，然后从节点开始解析，比如搜索找到的就是result/weights/weight 和result/weights/weight 2个节点，分别从这个开始解析：<figure class="highlight java"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> ResultInfo <span class="title function_">onParser</span><span class=params>(Element rootElement)</span> {</span><br><span class=line>    <span class=type>int</span> <span class=variable>resp</span> <span class=operator>=</span> -<span class=number>1</span>;</span><br><span class=line>    <span class=keyword>try</span> {</span><br><span class=line>        <span class=type>String</span> <span class=variable>elName</span> <span class=operator>=</span> <span class=string>"header/respcode"</span>;</span><br><span class=line>        resp = Integer.parseInt(selectNodeString(rootElement, elName));</span><br><span class=line>    } <span class=keyword>catch</span> (NumberFormatException e) {</span><br><span class=line>        e.printStackTrace();</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    Log.d(TAG, <span class=string>"resp= "</span> + resp);</span><br><span class=line></span><br><span class=line>    <span class=keyword>if</span> (resp != <span class=number>0</span>) {</span><br><span class=line>        <span class=keyword>return</span> <span class=literal>null</span>;</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=type>ResultInfo</span> <span class=variable>searchResultInfo</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ResultInfo</span>();</span><br><span class=line></span><br><span class=line>	<span class=comment>// Parse Search Weight</span></span><br><span class=line>	<span class=meta>@SuppressWarnings("rawtypes")</span></span><br><span class=line>	<span class=keyword>final</span> <span class=type>List</span> <span class=variable>weights</span> <span class=operator>=</span> rootElement.selectNodes(rootElement.getPath() + <span class=string>"/"</span></span><br><span class=line>			+ <span class=string>"result/weights/weight"</span>);</span><br><span class=line></span><br><span class=line>	ResultInfo[] resultFilterInfos = parseVideos(weights);</span><br><span class=line>	<span class=keyword>if</span> (resultFilterInfos != <span class=literal>null</span>) {</span><br><span class=line>		<span class=type>ResultInfo</span> <span class=variable>weight</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ResultInfo</span>();</span><br><span class=line>		weight.putResultInfoArray(ResultInfo.KEY_VIDEOS, resultFilterInfos);</span><br><span class=line>		searchResultInfo.putResultInfo(ResultInfo.KEY_WEIGHT, weight);</span><br><span class=line>	}</span><br><span class=line></span><br><span class=line>	<span class=comment>// Parse Albums</span></span><br><span class=line>    <span class=meta>@SuppressWarnings("rawtypes")</span></span><br><span class=line>    <span class=keyword>final</span> <span class=type>List</span> <span class=variable>albums</span> <span class=operator>=</span> rootElement.selectNodes(rootElement.getPath() + <span class=string>"/"</span></span><br><span class=line>            + <span class=string>"result/albums/album"</span>);</span><br><span class=line></span><br><span class=line>    ResultInfo[] resultInfos = parseVideos(albums);</span><br><span class=line>    <span class=keyword>if</span> (resultInfos != <span class=literal>null</span>) {</span><br><span class=line>        <span class=type>ResultInfo</span> <span class=variable>album</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ResultInfo</span>();</span><br><span class=line>        album.putResultInfoArray(ResultInfo.KEY_VIDEOS, resultInfos);</span><br><span class=line>        searchResultInfo.putResultInfo(ResultInfo.KEY_SEARCH, album);</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=keyword>return</span> searchResultInfo;</span><br><span class=line>}</span><br></pre></table></figure><h3 id=step-2>1.7.2 Step 2</h3><p>找到了对应的Node，即从对应的Node开始递归的查找，直到找到最小的节点，也就是最基本的单元Element。再对每一个Element进行解析：<figure class="highlight java"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br></pre><td class=code><pre><span class=line><span class=keyword>private</span> ResultInfo[] parseVideos(<span class=keyword>final</span> List nodes) {</span><br><span class=line>    <span class=keyword>if</span> (nodes != <span class=literal>null</span> && nodes.size() > <span class=number>0</span>) {</span><br><span class=line>        <span class=keyword>final</span> <span class=type>int</span> <span class=variable>size</span> <span class=operator>=</span> nodes.size();</span><br><span class=line>        <span class=keyword>final</span> ResultInfo[] vis = <span class=keyword>new</span> <span class="title class_">ResultInfo</span>[size];</span><br><span class=line>        <span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>;</span><br><span class=line>        <span class=keyword>for</span> (Object o : nodes) {</span><br><span class=line>            <span class=keyword>if</span> (o <span class=keyword>instanceof</span> Element) {</span><br><span class=line>                <span class=keyword>final</span> <span class=type>Element</span> <span class=variable>videoElement</span> <span class=operator>=</span> (Element) o;</span><br><span class=line>                <span class=type>ResultInfo</span> <span class=variable>vi</span> <span class=operator>=</span> parseVideo(videoElement);</span><br><span class=line>                vis[i] = vi;</span><br><span class=line>            }</span><br><span class=line>            i++;</span><br><span class=line>        }</span><br><span class=line>        <span class=keyword>return</span> vis;</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>return</span> <span class=literal>null</span>;</span><br><span class=line>}</span><br></pre></table></figure><h3 id=step-3>1.7.3 Step 3</h3><p>#####　针对获取到的Element，解析出对应的String将数据传递给VideoInfo这个类：<figure class="highlight java"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br></pre><td class=code><pre><span class=line><span class=keyword>private</span> ResultInfo <span class="title function_">parseVideo</span><span class=params>(<span class=keyword>final</span> Element videoElement)</span> {</span><br><span class=line>    <span class=keyword>final</span> <span class=type>String</span> <span class=variable>id</span> <span class=operator>=</span> videoElement.elementText(<span class=string>"album_id"</span>);</span><br><span class=line>    <span class=keyword>final</span> <span class=type>String</span> <span class=variable>title</span> <span class=operator>=</span> videoElement.elementText(<span class=string>"title"</span>);</span><br><span class=line>    <span class=keyword>final</span> <span class=type>String</span> <span class=variable>categoryId</span> <span class=operator>=</span> videoElement.elementText(<span class=string>"category_id"</span>);</span><br><span class=line>	<span class=keyword>final</span> <span class=type>String</span> <span class=variable>categoryName</span> <span class=operator>=</span> videoElement.elementText(<span class=string>"category_name"</span>);</span><br><span class=line>	<span class=keyword>final</span> <span class=type>String</span> <span class=variable>count</span> <span class=operator>=</span> videoElement.elementText(<span class=string>"count"</span>);</span><br><span class=line>    <span class=keyword>final</span> <span class=type>String</span> <span class=variable>imgUrl</span> <span class=operator>=</span> videoElement.elementText(<span class=string>"img180236"</span>);</span><br><span class=line>    <span class=keyword>final</span> <span class=type>String</span> <span class=variable>duration</span> <span class=operator>=</span> videoElement.elementText(<span class=string>"duration"</span>);</span><br><span class=line>    <span class=keyword>final</span> <span class=type>String</span> <span class=variable>mainactors</span> <span class=operator>=</span> videoElement.elementText(<span class=string>"mainactors"</span>);</span><br><span class=line>    <span class=keyword>final</span> <span class=type>String</span> <span class=variable>sitename</span> <span class=operator>=</span> videoElement.elementText(<span class=string>"site_name"</span>);</span><br><span class=line>    <span class=keyword>final</span> <span class=type>String</span> <span class=variable>videourl</span> <span class=operator>=</span> videoElement.elementText(<span class=string>"vedio_url"</span>);</span><br><span class=line>    <span class=keyword>final</span> <span class=type>String</span> <span class=variable>sort</span> <span class=operator>=</span> videoElement.elementText(<span class=string>"sort"</span>);</span><br><span class=line>    <span class=keyword>final</span> <span class=type>String</span> <span class=variable>tv_id</span> <span class=operator>=</span> videoElement.elementText(<span class=string>"tv_id"</span>);</span><br><span class=line>    <span class=type>ResultInfo</span> <span class=variable>vi</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ResultInfo</span>();</span><br><span class=line>    vi.putString(VideoInfo.ID, id);</span><br><span class=line>    vi.putString(VideoInfo.TITLE, title);</span><br><span class=line>    vi.putString(VideoInfo.CATEGORY_ID, categoryId);</span><br><span class=line>	vi.putString(VideoInfo.CATEGORY_NAME, categoryName);</span><br><span class=line>	vi.putString(VideoInfo.COUNT, count);</span><br><span class=line>    vi.putString(VideoInfo.IMG_URL, imgUrl);</span><br><span class=line>    vi.putString(VideoInfo.DURATION, duration);</span><br><span class=line>    vi.putString(VideoInfo.MAINACTORS, mainactors);</span><br><span class=line>    vi.putString(VideoInfo.SITENAME, sitename);</span><br><span class=line>    vi.putString(VideoInfo.VIDEOURL, videourl);</span><br><span class=line>    vi.putString(VideoInfo.SORT, sort);</span><br><span class=line>    vi.putString(VideoInfo.TV_ID, tv_id);</span><br><span class=line>    <span class=keyword>return</span> vi;</span><br><span class=line>}</span><br></pre></table></figure><h3 id=step-4>1.7.4 Step 4</h3><p>当使用 XML 解析器将 XML 数据解析出来之后。需要将这些数据提取出来，也是通过连续 2 层提取，将数据定位到每个 video ， 将每个 video 里的数据传递给 SearchVideoInfo这个ArrayList，然后将ArrayList中的数据和对应的Adapter数据关联起来：<figure class="highlight java"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>static</span> ArrayList&LTSearchVideoInfo> <span class="title function_">getSearchVideoInfo</span><span class=params>(ResultInfo searchResultInfo)</span> {</span><br><span class=line></span><br><span class=line>    <span class=type>ResultInfo</span> <span class=variable>resultInfo</span> <span class=operator>=</span> <span class=literal>null</span>;</span><br><span class=line>    ResultInfo[] videos = <span class=literal>null</span>;</span><br><span class=line>    ArrayList&LTSearchVideoInfo> searchVideoInfos = <span class=literal>null</span>;</span><br><span class=line></span><br><span class=line>    <span class=keyword>if</span> (searchResultInfo != <span class=literal>null</span>) {</span><br><span class=line>        resultInfo = searchResultInfo.getResultInfo(ResultInfo.KEY_SEARCH);</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=keyword>if</span> (resultInfo != <span class=literal>null</span>) {</span><br><span class=line>        videos = resultInfo.getResultInfoArray(ResultInfo.KEY_VIDEOS);</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=keyword>if</span> (videos != <span class=literal>null</span> && videos.length > <span class=number>0</span>) {</span><br><span class=line></span><br><span class=line>        searchVideoInfos = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&LTSearchVideoInfo>(videos.length);</span><br><span class=line></span><br><span class=line>        <span class=keyword>for</span> (ResultInfo video : videos) {</span><br><span class=line>            <span class=type>SearchVideoInfo</span> <span class=variable>searchInfo</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">SearchVideoInfo</span>();</span><br><span class=line></span><br><span class=line>            searchInfo.setAlbum_id(video.getString(VideoInfo.ID));</span><br><span class=line>            searchInfo.setTitle(video.getString(VideoInfo.TITLE));</span><br><span class=line>            searchInfo.setChannel_id(video.getString(VideoInfo.CATEGORY_ID));</span><br><span class=line>            searchInfo.setImgUrl(video.getString(VideoInfo.IMG_URL));</span><br><span class=line>            searchInfo.setDuration(video.getString(VideoInfo.DURATION));</span><br><span class=line>            searchInfo.setMainActors(video.getString(VideoInfo.MAINACTORS));</span><br><span class=line>            searchInfo.setSiteName(video.getString(VideoInfo.SITENAME));</span><br><span class=line>            searchInfo.setVideo_url(video.getString(VideoInfo.VIDEOURL));</span><br><span class=line>            searchInfo.setOrder(video.getString(VideoInfo.SORT));</span><br><span class=line>            searchInfo.setTv_id(video.getString(VideoInfo.TV_ID));</span><br><span class=line>            <span class=comment>// searchInfo.setContinueType(video.getString(VideoInfo.CONTINUETYPE));</span></span><br><span class=line></span><br><span class=line>            searchVideoInfos.add(searchInfo);</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=keyword>if</span> (searchVideoInfos == <span class=literal>null</span>) {</span><br><span class=line>        MyLog.e(TAG, <span class=string>"error, getSearchVideoInfo, can not get info"</span>);</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=keyword>return</span> searchVideoInfos;</span><br><span class=line>}</span><br></pre></table></figure><p>以上就是搜索数据的XML的解析和数据展示过程。<h1 id=二json>二、JSON</h1><p>XML很好很强大，但是最近有另外一个时代弄潮儿，这就是JSON。现在JSON的光环已经逐渐超越了XML，各大网站提供的数据接口一般都是JSON。下面我们就来学习下JSON。<h2 id=json是什么>2.1 JSON是什么？</h2><p>JSON：JavaScript对象表示法(<strong><em>JavaScript Object Notation</em></strong>）, 是一种轻量级的数据交换格式, 易于人阅读和编写, 同时也易于机器解析和生成。<p>JSON是存储和交换文本信息的语法，类似XML。<p>JSON采用完全独立于语言的文本格式，但是也使用了类似于C语言家族的习惯（包括C, C++, C#, Java, JavaScript, Perl, Python等）。 这些特性使JSON成为理想的数据交换语言<h2 id=json格式>2.2 JSON格式</h2><h4 id=json构建于两种结构><strong><em>JSON</em></strong>构建于两种结构：</h4><ol type=1><li><p><strong>“名称/值”对的集合</strong>(A collection of name/value pairs)。不同的语言中，它被理解为对象（object），纪录（record），结构(struct)，字典(dictionary)，哈希表（hash table），有键列表(keyed list)，或者关联数组(associative array)。<li><p><strong>值的有序列表</strong>(An ordered list of values)。在大多数语言中，它被理解为数组(array)、矢量(vector), 列表(list)或者是序列(sequence)。</ol><h4 id=json具有以下这些形式><strong><em>JSON</em></strong>具有以下这些形式：</h4><ul><li>对象是一个无序的“’名称/值’对”集合。一个对象以“{”（左括号）开始，“}”（右括号）结束。每个“名称”后跟一个“:”（冒号）；“‘名称/值’ 对”之间使用“,”（逗号）分隔。</ul><figure><img alt="JSON Object" src=https://www.json.org/img/object.png><figcaption aria-hidden=true>JSON Object</figcaption></figure><ul><li>数组是值(value)的有序集合。一个数组以“[”（左中括号）开始，“]”（右中括号）结束。值之间使用“,”（逗号）分隔。</ul><figure><img alt="JSON Array" src=https://www.json.org/img/array.png><figcaption aria-hidden=true>JSON Array</figcaption></figure><ul><li>值(value)可以是双引号括起来的字符串（string）、数值(number)、true、false、 null、对象（object）或者数组（array）。这些结构可以嵌套。</ul><figure><img alt="JSON Value" src=https://www.json.org/img/value.png><figcaption aria-hidden=true>JSON Value</figcaption></figure><ul><li>字符串（string）是由0到多个Unicode字符组成的序列，封装在双引号（““）中, 可以使用反斜杠（’’）来进行转义。一个字符可以表示为一个单一字符的字符串。</ul><figure><img alt="JSON String" src=https://www.json.org/img/string.png><figcaption aria-hidden=true>JSON String</figcaption></figure><ul><li>数字(number)类似C或者Java里面的数，没有用到的8进制和16进制数除外。</ul><figure><img alt="JSON Number" src=https://www.json.org/img/number.png><figcaption aria-hidden=true>JSON Number</figcaption></figure><h2 id=举个栗子-1>2.3 举个栗子</h2><p>上面关于JSON讲了这么多，大家都表示一头雾水了吧？<p>没关系，我们来举个栗子，让大家有个直观的感受:-)<p>以目前视频使用的iQiyi提供的频道接口为例：<h5 id=iqiyi提供的电影频道的json电影数据如下>iQiyi提供的电影频道的JSON电影数据如下：</h5><pre><code>{
    "code": 1, 
    "data": 0, 
    "albumIdList": [
            {
                    "totalidnum": 2000, 
                    "idlist": [
                            "319281600"
                    ]
            }
    ], 
    "albumArray": {
            "319281600": {
                    "_as": "", 
                    "_blk": 0, 
                    "_cid": 1, 
                    "_ct": "2014-10-10 17:55:06", 
                    "_da": "", 
                    "_dl": 0, 
                    "_dn": "7296", 
                    "_id": 319281600, 
                    "_img": "http://pic2.qiyipic.com/image/20141016/19/ca/v_108628048_m_601_m1_120_160.jpg", 
                    "_ip": 1, 
                    "_ma": "", 
                    "_pc": 2, 
                    "_pid": 0, 
                    "_reseftv": 959, 
                    "_t": "末代独裁", 
                    "_tvct": 1, 
                    "_tvs": 1, 
                    "_vt": 0, 
                    "a_av": 1, 
                    "a_pro": "", 
                    "bpt": "0", 
                    "clm": "", 
                    "cn_year": "0", 
                    "co_album_id": "0", 
                    "ctype": 0, 
                    "desc": "", 
                    "down": 0, 
                    "down2": "0", 
                    "drm": 0, 
                    "fst_time": "2014-10-16", 
                    "h1_img": "http://pic2.qiyipic.com/image/20141016/19/ca/v_108628048_m_601_m1_180_236.jpg", 
                    "h2_img": "http://pic2.qiyipic.com/image/20141016/19/ca/v_108628048_m_601_m1_195_260.jpg", 
                    "is_h": 0, 
                    "is_n": 0, 
                    "is_zb": 0, 
                    "k_word": "", 
                    "language": 0, 
                    "live_center": 0, 
                    "live_start_time": 0, 
                    "live_stop_time": 0, 
                    "logo": 1, 
                    "m_av": 1, 
                    "p_av": 1, 
                    "p_s": 0, 
                    "p_s_1": 0, 
                    "p_s_4": 0, 
                    "p_s_8": 0, 
                    "qiyi_pro": 0, 
                    "qiyi_year": "0", 
                    "qt_id": "1005722", 
                    "s_TT": "", 
                    "songname": "", 
                    "t_pc": 1, 
                    "tag": "当代 美国 乡村 大片", 
                    "tv_eftv": 1, 
                    "tv_pha": "", 
                    "tv_pro": "", 
                    "tv_ss": "", 
                    "tvfcs": "雄心壮志背后的真相", 
                    "up": 0, 
                    "up2": "0", 
                    "upcl": "", 
                    "v2_img": "http://pic2.qiyipic.com/image/20141016/19/ca/v_108628048_m_601_m1_284_160.jpg", 
                    "v3_img": "http://pic2.qiyipic.com/image/20141016/19/ca/v_108628048_m_601_m1_480_270.jpg", 
                    "vv": "1", 
                    "year": "2007", 
                    "tv_id": "0", 
                    "vv_p": 0, 
                    "vv_f": 2, 
                    "vv_m": 0, 
                    "_sc": 8
            }
    }, 
    "changeAlbum": null, 
    "category": null, 
    "before": "2~4~1~7~3", 
    "latest_push_id": "655", 
    "up_tm": "1413441370874", 
    "recommend_attach": "", 
    "preset_keys": null, 
    "category_group": null, 
    "exp_ts": 120, 
    "stfile_path": "/data/view/online5/0/1/2.1.8.5.1.txt"
}</code></pre><h6 id=从上面的例子可以很清晰的看出json是如何展示一个电影的数据的当然这是json格式化之后的数据json的元数据是不便于阅读的>从上面的例子可以很清晰的看出JSON是如何展示一个电影的数据的，当然这是JSON格式化之后的数据。JSON的元数据是不便于阅读的。</h6><h2 id=如何解析json>2.4 如何解析JSON？</h2><p>Android JSON所有相关类，都在org.json包下。<p>包括JSONObject、JSONArray、JSONStringer、JSONTokener、JSONWriter、JSONException。<h3 id=常见方法>&LT1>. 常见方法</h3><p>目前JSON解析有 2 种方法，分别是 get 和 opt 方法，可以使用 JSON 。<p>那么使用 get 方法与使用 opt 方法的区别是？<p>JsonObject 方法，opt与get建议使用opt方法，因为<strong>get方法如果其内容为空会直接抛出异常</strong>。不过JsonArray.opt(index)会有越界问题需要特别注意。<p>opt、optBoolean、optDouble、optInt、optLong、optString、optJSONArray、optJSONObject get、getBoolean、getDouble、getInt、getLong、getString、getJSONArray、getJSONObject<h3 id=android中如何创建json>&LT2>. Android中如何创建JSON？</h3><p>在Android中应该如何创建JSON呢？<p>下面展示了一个如何创建JSON的例子：<figure class="highlight java"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br></pre><td class=code><pre><span class=line><span class=keyword>private</span> String <span class="title function_">createJson</span><span class=params>()</span> <span class=keyword>throws</span> JSONException {</span><br><span class=line>    <span class=type>JSONObject</span> <span class=variable>jsonObject</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">JSONObject</span>();</span><br><span class=line>    jsonObject.put(<span class=string>"intKey"</span>, <span class=number>123</span>);</span><br><span class=line>    jsonObject.put(<span class=string>"doubleKey"</span>, <span class=number>10.1</span>);</span><br><span class=line>    jsonObject.put(<span class=string>"longKey"</span>, <span class=number>666666666</span>);</span><br><span class=line>    jsonObject.put(<span class=string>"stringKey"</span>, <span class=string>"lalala"</span>);</span><br><span class=line>    jsonObject.put(<span class=string>"booleanKey"</span>, <span class=literal>true</span>);</span><br><span class=line></span><br><span class=line>    <span class=type>JSONArray</span> <span class=variable>jsonArray</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">JSONArray</span>();</span><br><span class=line>    jsonArray.put(<span class=number>0</span>, <span class=number>111</span>);</span><br><span class=line>    jsonArray.put(<span class=string>"second"</span>);</span><br><span class=line>    jsonObject.put(<span class=string>"arrayKey"</span>, jsonArray);</span><br><span class=line></span><br><span class=line>    <span class=type>JSONObject</span> <span class=variable>innerJsonObject</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">JSONObject</span>();</span><br><span class=line>    innerJsonObject.put(<span class=string>"innerStr"</span>, <span class=string>"inner"</span>);</span><br><span class=line>    jsonObject.put(<span class=string>"innerObjectKey"</span>, innerJsonObject);</span><br><span class=line></span><br><span class=line>    Log.e(<span class=string>"Json"</span>, jsonObject.toString());</span><br><span class=line></span><br><span class=line>    <span class=keyword>return</span> jsonObject.toString();</span><br><span class=line>}</span><br></pre></table></figure><p>其输出结果如下所示：<figure class="highlight txt"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>{"intKey":123, "doubleKey":10.1, "longKey":666666666, "stringKey":"lalala", "booleanKey":true, "arrayKey":[111,"second"], "innerObjectKey":{"innerStr":"inner"}}</span><br></pre></table></figure><h3 id=如何解析json-1>&LT3>. 如何解析JSON？</h3><p>下面以视频中解析iQiyi的每个视频album数据为例来说明如何解析JSON：<p>第一步，需要从网络服务器上发起请求，获取到JSON数据：<figure class="highlight java"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br></pre><td class=code><pre><span class=line><span class=type>JsonObjectRequest</span> <span class=variable>jsonObjRequest</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">JsonObjectRequest</span>(Request.Method.GET, url, <span class=literal>null</span>,</span><br><span class=line>        <span class=keyword>new</span> <span class="title class_">Response</span>.Listener&LTJSONObject>() {</span><br><span class=line>            <span class=meta>@Override</span></span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">onResponse</span><span class=params>(JSONObject response)</span> {</span><br><span class=line>                <span class=keyword>try</span> {</span><br><span class=line>                    MyLog.d(TAG, <span class=string>"response="</span> + response);</span><br><span class=line>                    parseiQiyiInterfaceResponse(response);</span><br><span class=line>                } <span class=keyword>catch</span> (Exception e) {</span><br><span class=line>                    e.printStackTrace();</span><br><span class=line>                }</span><br><span class=line>            }</span><br><span class=line>        }, <span class=keyword>new</span> <span class="title class_">Response</span>.ErrorListener() {</span><br><span class=line>            <span class=meta>@Override</span></span><br><span class=line>            <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">onErrorResponse</span><span class=params>(VolleyError error)</span> {</span><br><span class=line>                <span class=comment>/*</span></span><br><span class=line><span class=comment>                 * if (error instanceof NetworkError) { } else if (error</span></span><br><span class=line><span class=comment>                 * instanceof ClientError) { } else if (error instanceof</span></span><br><span class=line><span class=comment>                 * ServerError) { } else if (error instanceof</span></span><br><span class=line><span class=comment>                 * AuthFailureError) { } else if (error instanceof</span></span><br><span class=line><span class=comment>                 * ParseError) { } else if (error instanceof</span></span><br><span class=line><span class=comment>                 * NoConnectionError) { } else if (error instanceof</span></span><br><span class=line><span class=comment>                 * TimeoutError) { }</span></span><br><span class=line><span class=comment>                 */</span></span><br><span class=line>                MyLog.e(TAG, <span class=string>"onErrorResponse, error="</span> + error);</span><br><span class=line>            }</span><br><span class=line>        }) {</span><br><span class=line>    <span class=meta>@Override</span></span><br><span class=line>    <span class=keyword>public</span> Map&LTString, String> <span class="title function_">getHeaders</span><span class=params>()</span> <span class=keyword>throws</span> AuthFailureError {</span><br><span class=line>        HashMap&LTString, String> headers = <span class=keyword>new</span> <span class="title class_">HashMap</span>&LTString, String>();</span><br><span class=line>        headers.put(<span class=string>"t"</span>, iQiyiInterface.getEncryptTimestamp());</span><br><span class=line>        headers.put(<span class=string>"sign"</span>, iQiyiInterface.getSign());</span><br><span class=line></span><br><span class=line>        <span class=keyword>return</span> headers;</span><br><span class=line>    }</span><br><span class=line>};</span><br></pre></table></figure><p>第二步，获取到对应的对应的JSONObject数据：<figure class="highlight java"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">getJsonObjectString</span><span class=params>(String url)</span> {</span><br><span class=line>    mQueue = VideoApplication.getInstance().getRequestQueue();</span><br><span class=line></span><br><span class=line>    <span class=type>JsonObjectRequest</span> <span class=variable>jsObjRequest</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">JsonObjectRequest</span>(Request.Method.GET, url, <span class=literal>null</span>,</span><br><span class=line></span><br><span class=line>    <span class=keyword>new</span> <span class="title class_">Response</span>.Listener&LTJSONObject>() {</span><br><span class=line></span><br><span class=line>        <span class=meta>@Override</span></span><br><span class=line>        <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">onResponse</span><span class=params>(JSONObject response)</span> {</span><br><span class=line>            MyLog.e(TAG, <span class=string>"response = "</span> + response.toString());</span><br><span class=line></span><br><span class=line>            <span class=type>JSONArray</span> <span class=variable>jsonArray</span> <span class=operator>=</span> <span class=literal>null</span>;</span><br><span class=line>            <span class=type>JSONObject</span> <span class=variable>jsonObject</span> <span class=operator>=</span> <span class=literal>null</span>;</span><br><span class=line>            <span class=keyword>try</span> {</span><br><span class=line>                jsonObject = response.getJSONObject(<span class=string>"response"</span>);</span><br><span class=line>                jsonArray = jsonObject.getJSONObject(<span class=string>"result"</span>).getJSONArray(<span class=string>"album"</span>);</span><br><span class=line>            } <span class=keyword>catch</span> (JSONException e) {</span><br><span class=line>                e.printStackTrace();</span><br><span class=line>            }</span><br><span class=line></span><br><span class=line>            <span class=keyword>if</span> (jsonArray == <span class=literal>null</span>) {</span><br><span class=line>                <span class=keyword>return</span>;</span><br><span class=line>            }</span><br><span class=line></span><br><span class=line>            mChannelList = VideoUtils.parseVideoJsonArray(jsonArray);</span><br><span class=line></span><br><span class=line>            <span class=keyword>if</span> (isLoading) {</span><br><span class=line>                isLoading = <span class=literal>false</span>;</span><br><span class=line>                <span class=keyword>if</span> (mIsGrid) {</span><br><span class=line>                    mChannelGridAdapter.appendChannelVideoInfo(mChannelList);</span><br><span class=line>                } <span class=keyword>else</span> {</span><br><span class=line>                    mChannelListAdapter.appendChannelVideoInfo(mChannelList);</span><br><span class=line>                }</span><br><span class=line></span><br><span class=line>            } <span class=keyword>else</span> {</span><br><span class=line>                <span class=keyword>if</span> (mIsGrid) {</span><br><span class=line>                    mChannelGridAdapter.setChannelVideoInfo(mChannelList);</span><br><span class=line>                    showOppoGrid();</span><br><span class=line>                } <span class=keyword>else</span> {</span><br><span class=line>                    mChannelListAdapter.setChannelVideoInfo(mChannelList);</span><br><span class=line>                    showOppoList();</span><br><span class=line>                }</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>    }, <span class=keyword>new</span> <span class="title class_">Response</span>.ErrorListener() {</span><br><span class=line></span><br><span class=line>        <span class=meta>@Override</span></span><br><span class=line>        <span class=keyword>public</span> <span class=keyword>void</span> <span class="title function_">onErrorResponse</span><span class=params>(VolleyError error)</span> {</span><br><span class=line>            MyLog.e(TAG, <span class=string>"error = "</span> + error);</span><br><span class=line>        }</span><br><span class=line>    });</span><br><span class=line></span><br><span class=line>    jsObjRequest.setTag(TAG);</span><br><span class=line>    jsObjRequest.setShouldCache(<span class=literal>true</span>);</span><br><span class=line>    mQueue.add(jsObjRequest);</span><br><span class=line>    mQueue.start();</span><br><span class=line>}</span><br></pre></table></figure><p>获取到JSON Object之后，就对这个JSONObject进行解析：<figure class="highlight java"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br></pre><td class=code><pre><span class=line><span class=keyword>private</span> ArrayList&LTVideoConstant> <span class="title function_">parseVideoAlbumJsonObject</span><span class=params>(JSONObject albumJSONObject,  ArrayList&LTInteger> albumIdJSONArrayList)</span> {</span><br><span class=line>    MyLog.d(TAG, <span class=string>"parseVideoAlbumJsonObject, length="</span> + albumJSONObject.length());</span><br><span class=line>    <span class=keyword>if</span> (albumJSONObject.length() < <span class=number>1</span>) {</span><br><span class=line>        <span class=keyword>return</span> <span class=literal>null</span>;</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    ArrayList&LTVideoConstant> videos = <span class=keyword>new</span> <span class="title class_">ArrayList</span>&LTVideoConstant>();</span><br><span class=line></span><br><span class=line>    <span class=keyword>try</span> {</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>index</span> <span class=operator>=</span> <span class=number>0</span>; index < albumJSONObject.length(); index++) {</span><br><span class=line>            <span class=type>VideoConstant</span> <span class=variable>video</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">VideoConstant</span>();</span><br><span class=line></span><br><span class=line>            JSONObject itemJsonObject;</span><br><span class=line></span><br><span class=line>            itemJsonObject = albumJSONObject.getJSONObject(albumIdJSONArrayList.get(index)</span><br><span class=line>                    .toString());</span><br><span class=line></span><br><span class=line>            MyLog.d(TAG, <span class=string>"string="</span> + albumIdJSONArrayList.get(index).toString());</span><br><span class=line></span><br><span class=line>            video.mAlbumId = itemJsonObject.optString(InterfaceParameterName.ID);</span><br><span class=line>            video.mAtitle = itemJsonObject.optString(InterfaceParameterName.TITLE);</span><br><span class=line>            video.mEpisodeCount = itemJsonObject.optString(InterfaceParameterName.UPDATE_SET);</span><br><span class=line>            video.mTvSets = itemJsonObject.optString(InterfaceParameterName.TV_SETS);</span><br><span class=line>            video.mDesc = itemJsonObject.optString(InterfaceParameterName.DESCRIPTION);</span><br><span class=line>            video.mCid = itemJsonObject.optString(InterfaceParameterName.CATEGORY_ID);</span><br><span class=line></span><br><span class=line>            video.mImg = itemJsonObject.optString(InterfaceParameterName.IMG);</span><br><span class=line>            video.mHighimg = itemJsonObject</span><br><span class=line>                    .optString(InterfaceParameterName.HIGH_RESO_PORT_IMG);</span><br><span class=line>            video.mHoriImg = itemJsonObject</span><br><span class=line>                    .optString(InterfaceParameterName.HIGH_RESO_HORI_IMG);</span><br><span class=line></span><br><span class=line>            video.mScore = itemJsonObject.optString(InterfaceParameterName.SCORE);</span><br><span class=line>            video.mMainActors = itemJsonObject.optString(InterfaceParameterName.MAIN_ACTOR);</span><br><span class=line></span><br><span class=line>            video.mCreateTime = itemJsonObject.optString(InterfaceParameterName.CREATE_TIME);</span><br><span class=line></span><br><span class=line>            video.mDuration = itemJsonObject.optString(InterfaceParameterName.DURATION);</span><br><span class=line></span><br><span class=line>            video.mTag = itemJsonObject.optString(InterfaceParameterName.TAG);</span><br><span class=line></span><br><span class=line>            MyLog.d(TAG, <span class=string>"id="</span> + video.mAlbumId + <span class=string>",title="</span> + video.mAlbumTitle + <span class=string>",img="</span></span><br><span class=line>                    + video.mHighimg + <span class=string>",tvsets="</span> + video.mTvSets);</span><br><span class=line></span><br><span class=line>            videos.add(video);</span><br><span class=line>        }</span><br><span class=line>    } <span class=keyword>catch</span> (JSONException e) {</span><br><span class=line>        e.printStackTrace();</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=keyword>return</span> videos;</span><br><span class=line>}</span><br></pre></table></figure><p>以上展示的就是JSON数据的解析过程。<h3 id=android-json解析库>&LT4>. Android JSON解析库</h3><p>上面介绍都是使用 Android 提供的原生类解析 JSON ，最大的好处是项目不需要引入第三方库，但是如果比较注重开发效率而且不在意应用大小增加几百K的话，有以下JSON 可供选择：<ol type=1><li><a href=http://jackson.codehaus.org/ rel=noopener target=_blank>Jackson</a><li><a href=https://code.google.com/p/google-gson/ rel=noopener target=_blank>google-gson</a><li><a href=http://sourceforge.net/projects/json-lib/ rel=noopener target=_blank>Json-lib</a></ol><p>大家可以去对应的官网下载并学习:)<h2 id=三-json-vs.-xml># 三、 JSON vs. XML</h2><p>JSON和XML就像武林界的屠龙刀和倚天剑，那么他们孰强孰弱？<p>XML长期执数据传输界之牛耳，而JSON作为后起之秀，已经盟主发起了挑战。<p>那就让他们来进行PK一下：<h3 id=json相比xml的不同之处>&LT1>. JSON相比XML的不同之处</h3><ul><li>没有结束标签<li>更短<li>读写的速度更快<li>能够使用内建的 JavaScript eval() 方法进行解析<li>使用数组<li>不使用保留字</ul><h4 id=总之-json-比-xml-更小更快更易解析>总之： JSON 比 XML 更小、更快，更易解析。</h4><h3 id=xml和json的区别>&LT2>. XML和JSON的区别：</h3><p>XML的主要组成成分：<pre><code>XML是element、attribute和element content。</code></pre><p>JSON的主要组成成分<pre><code>JSON是object、array、string、number、boolean(true/false)和null。</code></pre><p>XML要表示一个object(指name-value pair的集合)，最初可能会使用element作为object，每个key-value pair 用 attribute 表示：<pre><code>&LTstudent name="John" age="10"/></code></pre><p>但如个某个 value 也是 object，那么就不可以当作attribute:<pre><code>&LTstudent name="John" age="10">
    &LTaddress>
        &LTcountry>China&LT/country>
        &LTprovince>Guang Dong&LT/province>
        &LTcity>...&LT/city>
        &LTdistrict>...&LT/district>
        ...
    &LT/address>
&LT/student></code></pre><p>那么，什么时候用element，什么时候用attribute，就已经是一个问题了。<p>而JSON因为有object这种类型，可以自然地映射，不需考虑上述的问题，自然地得到以下的格式。<pre><code>{
    "name": "John",
    "age" : 10,
    "address" : {
        "country" : "China",
        "province" : "Guang Dong",
        "city" : "..",
        "district" : "..",
        ...
    }
}</code></pre><h5 id=one-more-thing>One More Thing…</h5><p>XML需要选择怎么处理element content的换行，而JSON string则不须作这个选择。<p>XML只有文字，没有预设的数字格式，而JSON则有明确的number格式，这样在locale上也安全。<p>XML映射数组没大问题，就是数组元素tag比较重复冗余。JSON 比较易读。<p>JSON的true/false/null也能容易统一至一般编程语言的对应语义。<p>XML文档可以附上DTD、Schema，还有一堆的诸如XPath之类规范，使用自定义XML元素或属性，能很方便地给数据附加各种约束条件和关联额外信息，从数据表达能力上看，XML强于Json，但是很多场景并不需要这么复杂的重量级的东西，轻便灵活的Json就显得很受欢迎了。<p>打个比方，如果完成某件事有两种方式：一种简单的，一个复杂的。你选哪个？<p><strong>我只想杀只鸡罢了，用得着牛刀？</strong><p>JSON与XML相比就是这样的。<h1 id=四总结>四、总结</h1><p>这篇文章只是对XML和JSON这2种目前主流使用的数据格式进行了解释，并系统的学习了其中的语法及如何进行解析，同时在最好针对XML和JSON做了对比，了解其不同点和各自的优势。<p>期望有需要的朋友有所帮助:-)<h1 id=文章修改历史>文章修改历史</h1><ul><li>Created by Long Luo at 2014-10-16 14:49:22 <span class=citation data-cites=Shenzhen>@Shenzhen</span>, China.<li>Modified By Long Luo at 2014-09-21 23:12:02 <span class=citation data-cites=Shenzhen>@Shenzhen</span>, China.<li>Completed By Long Luo at 2014/10/31 11:42:21 <span class=citation data-cites=Shenzhen>@Shenzhen</span>, China.</ul></div><footer class=post-footer><div class=reward-container><div>请我一杯咖啡吧！</div><button>赞赏</button><div class=post-reward><div><img alt="Long Luo 微信" src=https://www.longluo.me/assets/reward/wechatpay.jpeg><span>微信</span></div></div></div><div class=post-copyright><ul><li class=post-copyright-author><strong>本文作者： </strong>Long Luo<li class=post-copyright-link><strong>本文链接：</strong> <a href=https://www.longluo.me/blog/xml-and-json/ title=10分钟掌握XML、JSON及其解析>https://www.longluo.me/blog/xml-and-json/</a><li class=post-copyright-license><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh rel=noopener target=_blank><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</ul></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a class=social-link href=/atom.xml target=_blank> <span class=icon> <i class="fa fa-rss"></i> </span> <span class=label>RSS</span> </a></div></div></div><div class=post-tags><a href=/tags/Java/ rel=tag># Java</a><a href=/tags/Android/ rel=tag># Android</a><a href=/tags/XML/ rel=tag># XML</a><a href=/tags/JSON/ rel=tag># JSON</a></div><div class=post-nav><div class=post-nav-item><a href=/blog/tower-defense-design-tips/ rel=prev title=设计一款好玩的塔防游戏需要注意的几个要点---由个人玩一款塔防游戏引起的思考> <i class="fa fa-angle-left"></i> 设计一款好玩的塔防游戏需要注意的几个要点---由个人玩一款塔防游戏引起的思考 </a></div><div class=post-nav-item><a href=/blog/create-a-404-page/ rel=next title=在Hexo博客上创建一个有趣的404页面> 在Hexo博客上创建一个有趣的404页面 <i class="fa fa-angle-right"></i> </a></div></div></footer></article></div><div class=comments id=waline></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>© 2013 – <span itemprop=copyrightYear>2025</span><span class=with-love> <i class="fa fa-heart"></i> </span><span class=author itemprop=copyrightHolder>Long Luo</span></div><div class=wordcount><span class=post-meta-item> <span class=post-meta-item-icon> <i class="fa fa-chart-line"></i> </span> <span title=站点总字数>1.6m</span> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="fa fa-coffee"></i> </span> <span title=站点阅读时长>24:28</span> </span></div><div class=busuanzi-count><span class=post-meta-item id=busuanzi_container_site_uv> <span class=post-meta-item-icon> <i class="fa fa-user"></i> </span> <span class=site-uv title=总访客量> <span id=busuanzi_value_site_uv></span> </span> </span><span class=post-meta-item id=busuanzi_container_site_pv> <span class=post-meta-item-icon> <i class="fa fa-eye"></i> </span> <span class=site-pv title=总访问量> <span id=busuanzi_value_site_pv></span> </span> </span></div><div class=powered-by>由 <a href=https://hexo.io/ rel=noopener target=_blank>Hexo</a> & <a href=https://theme-next.js.org/pisces/ rel=noopener target=_blank>NexT.Pisces</a> 强力驱动</div></div></footer><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div><div class=sidebar-dimmer></div><div aria-label=返回顶部 class=back-to-top role=button><i class="fa fa-arrow-up fa-lg"></i><span>0%</span></div><div class=reading-progress-bar></div><a class="book-mark-link book-mark-link-fixed" role=button></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><script crossorigin=anonymous integrity=sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY= src=https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.22.0/comments.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.22.0/utils.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.22.0/motion.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.22.0/sidebar.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.22.0/next-boot.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.22.0/bookmark.min.js></script><script crossorigin=anonymous integrity=sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc= src=https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.22.0/third-party/search/local-search.min.js></script><script async src=https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><script class=next-config data-name=enableMath type=application/json>false</script><script class=next-config data-name=mathjax type=application/json>{"enable":true,"tags":"ams","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.22.0/third-party/math/mathjax.min.js></script><script class=next-config data-name=waline type=application/json>{"lang":"zh-CN","enable":true,"serverURL":"https://waline.longluo.me/","cssUrl":"https://unpkg.com/@waline/client@v3/dist/waline.css","commentCount":true,"pageview":true,"libUrl":"https://unpkg.com/@waline/client@v3/dist/waline.umd.js","locale":{"placeholder":"欢迎大家的留言！(留言只需要填昵称即可。) Welcome to comment!"},"emoji":["https://unpkg.com/@waline/emojis@1.1.0/qq"],"meta":["nick","mail","link"],"requiredMeta":[["nick"]],"wordLimit":0,"pageSize":10,"el":"#waline","comment":true,"path":"/blog/xml-and-json/"}</script><link href=https://unpkg.com/@waline/client@v3/dist/waline.css rel=stylesheet><script>document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});</script>