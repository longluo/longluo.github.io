<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" viewBox="-71 -77 148 148">
 <title>phyllotaxis golden angle</title>
 <desc>End-on view of a plant stem in which consecutive leaves are separated by the golden angle by CMG Lee.</desc>
 <style type="text/css">
svg { font-family:'Liberation Sans',Helvetica,Arial,sans-serif; font-size:10px; text-anchor:middle; fill:#000000; }
.arrow { fill:none; stroke:#000000; stroke-width:0.5; marker-end:url(#marker); }
.label { font-size:14px; letter-spacing:-2px; }
 </style>
 <defs>
  <marker id="marker" markerWidth="8" markerHeight="8" refX="8" refY="4" orient="auto">
   <path d="M 0,1 L 8,4 L 0,7"/>
  </marker>
  <g id="leaf" fill="#00cc99">
   <use xlink:href="#leaf_common" fill-opacity="1" fill="#99ff00" stroke="#009900"/>
   <path id="leaf_common" d="M 0,0 C -50,-99 50,-99 0,0"/>
  </g>
 </defs>
 <circle cx="0" cy="0" r="99999" fill="#ffffff"/>
 <text transform="translate(76,-72)" x="0" y="0.7ex" text-anchor="end">2π (2−φ)<tspan x="0" dy="1em">~137.5°</tspan></text>
 <g id="GENERATED_CONTENT">

  <g transform="rotate(0.00) scale(1.000)">
   <use xlink:href="#leaf" fill-opacity="1.000"/>
   <text class="label" transform="translate(0,-47) rotate(-0.00)" x="-1" y="0.7ex">1</text>
  </g>
  <g opacity="0.5">
   <path d="M 0,-74.6 A 76.838,76.838 0 0 1 0.00,-74.60" class="arrow"/>
  </g>
  <g transform="rotate(137.51) scale(0.961)">
   <use xlink:href="#leaf" fill-opacity="0.961"/>
   <text class="label" transform="translate(0,-47) rotate(-137.51)" x="-1" y="0.7ex">2</text>
  </g>
  <g opacity="0.45">
   <path d="M 0.00,-74.60 A 73.84131799999999,73.84131799999999 0 0 1 48.42,52.86" class="arrow"/>
  </g>
  <g transform="rotate(275.02) scale(0.923)">
   <use xlink:href="#leaf" fill-opacity="0.923"/>
   <text class="label" transform="translate(0,-47) rotate(-275.02)" x="-1" y="0.7ex">3</text>
  </g>
  <g opacity="0.4">
   <path d="M 48.42,52.86 A 70.921474,70.921474 0 0 1 -68.59,-6.03" class="arrow"/>
  </g>
  <g transform="rotate(412.52) scale(0.886)">
   <use xlink:href="#leaf" fill-opacity="0.886"/>
   <text class="label" transform="translate(0,-47) rotate(-412.52)" x="-1" y="0.7ex">4</text>
  </g>
  <g opacity="0.35">
   <path d="M -68.59,-6.03 A 68.07846799999999,68.07846799999999 0 0 1 52.45,-40.22" class="arrow"/>
  </g>
  <g transform="rotate(550.03) scale(0.849)">
   <use xlink:href="#leaf" fill-opacity="0.849"/>
   <text class="label" transform="translate(0,-47) rotate(-550.03)" x="-1" y="0.7ex">5</text>
  </g>
  <g opacity="0.3">
   <path d="M 52.45,-40.22 A 65.235462,65.235462 0 0 1 -11.03,62.37" class="arrow"/>
  </g>
  <g transform="rotate(687.54) scale(0.814)">
   <use xlink:href="#leaf" fill-opacity="0.814"/>
   <text class="label" transform="translate(0,-47) rotate(-687.54)" x="-1" y="0.7ex">6</text>
  </g>
  <g opacity="0.25">
   <path d="M -11.03,62.37 A 62.54613199999999,62.54613199999999 0 0 1 -32.59,-51.24" class="arrow"/>
  </g>
  <g transform="rotate(825.05) scale(0.779)">
   <use xlink:href="#leaf" fill-opacity="0.779"/>
   <text class="label" transform="translate(0,-47) rotate(-825.05)" x="-1" y="0.7ex">7</text>
  </g>
  <g opacity="0.2">
   <path d="M -32.59,-51.24 A 59.856802,59.856802 0 0 1 56.12,15.09" class="arrow"/>
  </g>
  <g transform="rotate(962.55) scale(0.744)">
   <use xlink:href="#leaf" fill-opacity="0.744"/>
   <text class="label" transform="translate(0,-47) rotate(-962.55)" x="-1" y="0.7ex">8</text>
  </g>
  <g opacity="0.15">
   <path d="M 56.12,15.09 A 57.167472,57.167472 0 0 1 -49.25,25.59" class="arrow"/>
  </g>
  <g transform="rotate(1100.06) scale(0.711)">
   <use xlink:href="#leaf" fill-opacity="0.711"/>
   <text class="label" transform="translate(0,-47) rotate(-1100.06)" x="-1" y="0.7ex">9</text>
  </g>
  <g opacity="0.1">
   <path d="M -49.25,25.59 A 54.63181799999999,54.63181799999999 0 0 1 18.19,-49.82" class="arrow"/>
  </g>
  <g transform="rotate(1237.57) scale(0.678)">
   <use xlink:href="#leaf" fill-opacity="0.678"/>
   <text class="label" transform="translate(0,-47) rotate(-1237.57)" x="-1" y="0.7ex">10</text>
  </g>
  <g opacity="0.05">
   <path d="M 18.19,-49.82 A 52.096164,52.096164 0 0 1 19.30,46.75" class="arrow"/>
  </g>
  <g transform="rotate(1375.08) scale(0.646)">
   <use xlink:href="#leaf" fill-opacity="0.646"/>
  </g>
  <g opacity="0">
   <path d="M 19.30,46.75 A 49.637348,49.637348 0 0 1 -43.65,-20.43" class="arrow"/>
  </g>
  <g transform="rotate(1512.59) scale(0.615)">
   <use xlink:href="#leaf" fill-opacity="0.615"/>
  </g>
  <g transform="rotate(1650.09) scale(0.585)">
   <use xlink:href="#leaf" fill-opacity="0.585"/>
  </g>
  <g transform="rotate(1787.60) scale(0.555)">
   <use xlink:href="#leaf" fill-opacity="0.555"/>
  </g>
  <g transform="rotate(1925.11) scale(0.526)">
   <use xlink:href="#leaf" fill-opacity="0.526"/>
  </g>
  <g transform="rotate(2062.62) scale(0.498)">
   <use xlink:href="#leaf" fill-opacity="0.498"/>
  </g>
  <g transform="rotate(2200.12) scale(0.471)">
   <use xlink:href="#leaf" fill-opacity="0.471"/>
  </g>
  <g transform="rotate(2337.63) scale(0.444)">
   <use xlink:href="#leaf" fill-opacity="0.444"/>
  </g>
  <g transform="rotate(2475.14) scale(0.419)">
   <use xlink:href="#leaf" fill-opacity="0.419"/>
  </g>
  <g transform="rotate(2612.65) scale(0.394)">
   <use xlink:href="#leaf" fill-opacity="0.394"/>
  </g>
  <g transform="rotate(2750.16) scale(0.369)">
   <use xlink:href="#leaf" fill-opacity="0.369"/>
  </g>
  <g transform="rotate(2887.66) scale(0.346)">
   <use xlink:href="#leaf" fill-opacity="0.346"/>
  </g>
  <g transform="rotate(3025.17) scale(0.323)">
   <use xlink:href="#leaf" fill-opacity="0.323"/>
  </g>
  <g transform="rotate(3162.68) scale(0.301)">
   <use xlink:href="#leaf" fill-opacity="0.301"/>
  </g>
  <g transform="rotate(3300.19) scale(0.280)">
   <use xlink:href="#leaf" fill-opacity="0.280"/>
  </g>
  <g transform="rotate(3437.69) scale(0.260)">
   <use xlink:href="#leaf" fill-opacity="0.260"/>
  </g>
  <g transform="rotate(3575.20) scale(0.240)">
   <use xlink:href="#leaf" fill-opacity="0.240"/>
  </g>
  <g transform="rotate(3712.71) scale(0.221)">
   <use xlink:href="#leaf" fill-opacity="0.221"/>
  </g>
  <g transform="rotate(3850.22) scale(0.203)">
   <use xlink:href="#leaf" fill-opacity="0.203"/>
  </g>
  <g transform="rotate(3987.73) scale(0.186)">
   <use xlink:href="#leaf" fill-opacity="0.186"/>
  </g>
  <g transform="rotate(4125.23) scale(0.170)">
   <use xlink:href="#leaf" fill-opacity="0.170"/>
  </g>
  <g transform="rotate(4262.74) scale(0.154)">
   <use xlink:href="#leaf" fill-opacity="0.154"/>
  </g>
  <g transform="rotate(4400.25) scale(0.139)">
   <use xlink:href="#leaf" fill-opacity="0.139"/>
  </g>
  <g transform="rotate(4537.76) scale(0.125)">
   <use xlink:href="#leaf" fill-opacity="0.125"/>
  </g>
  <g transform="rotate(4675.26) scale(0.111)">
   <use xlink:href="#leaf" fill-opacity="0.111"/>
  </g>
  <g transform="rotate(4812.77) scale(0.098)">
   <use xlink:href="#leaf" fill-opacity="0.098"/>
  </g>
  <g transform="rotate(4950.28) scale(0.087)">
   <use xlink:href="#leaf" fill-opacity="0.087"/>
  </g>
  <g transform="rotate(5087.79) scale(0.075)">
   <use xlink:href="#leaf" fill-opacity="0.075"/>
  </g>
  <g transform="rotate(5225.30) scale(0.065)">
   <use xlink:href="#leaf" fill-opacity="0.065"/>
  </g>
  <g transform="rotate(5362.80) scale(0.055)">
   <use xlink:href="#leaf" fill-opacity="0.055"/>
  </g>
  <g transform="rotate(5500.31) scale(0.047)">
   <use xlink:href="#leaf" fill-opacity="0.047"/>
  </g>
  <g transform="rotate(5637.82) scale(0.038)">
   <use xlink:href="#leaf" fill-opacity="0.038"/>
  </g>
  <g transform="rotate(5775.33) scale(0.031)">
   <use xlink:href="#leaf" fill-opacity="0.031"/>
  </g>
  <g transform="rotate(5912.83) scale(0.025)">
   <use xlink:href="#leaf" fill-opacity="0.025"/>
  </g>
  <g transform="rotate(6050.34) scale(0.019)">
   <use xlink:href="#leaf" fill-opacity="0.019"/>
  </g>
  <g transform="rotate(6187.85) scale(0.014)">
   <use xlink:href="#leaf" fill-opacity="0.014"/>
  </g>
  <g transform="rotate(6325.36) scale(0.010)">
   <use xlink:href="#leaf" fill-opacity="0.010"/>
  </g>
  <g transform="rotate(6462.86) scale(0.006)">
   <use xlink:href="#leaf" fill-opacity="0.006"/>
  </g>
  <g transform="rotate(6600.37) scale(0.003)">
   <use xlink:href="#leaf" fill-opacity="0.003"/>
  </g>
  <g transform="rotate(6737.88) scale(0.002)">
   <use xlink:href="#leaf" fill-opacity="0.002"/>
  </g>

  </g>
 <g id="GENERATOR_SCRIPT"><!--script>
/// To recover the generator script, delete the "!" and 2 "-" on the line above
/// and the 2 "-" on the last line below.  Amend the SVG-specific JavaScript as
/// needed. Open the file in Firefox. Save As another SVG to upload to Commons.
<![CDATA[
const outs = []; /// SVG may be pushed into this array even if outs is a const.
/// ======================== SVG-specific JavaScript ==========================

function round_to_string(x, decimal_places=2, do_trim=false) {
 const str = parseFloat(x).toFixed(decimal_places);
 return do_trim ? str.replace(/\.0*$|(\.\d+?)0+$/, '$1') : str;
}

let tweak   = 1.03;
let radius  = 74.6;
let n_leaf  = 50;
let n_arrow = 10;
let degree  = 0.0;
let x_prev  = 0;
let y_prev  = -radius;
for (let i = 0; i < n_leaf; ++i) {
 let scale  = round_to_string(Math.pow(1 - i / (n_leaf + 1), 2), 3);
 let rscale = radius * scale;
 let rotate = round_to_string(degree);
 let x      = round_to_string( rscale * Math.sin(rotate * Math.PI / 180));
 let y      = round_to_string(-rscale * Math.cos(rotate * Math.PI / 180));
 let out_text = i > 9 ? `` : `
   <text class="label" transform="translate(0,-47) rotate(-${rotate})" x="-1" y="0.7ex">${i + 1}</text>`;
 let out_arrow = i > n_arrow ? `` : `
  <g opacity="${round_to_string(1 - i / n_arrow, 1) / 2}">
   <path d="M ${x_prev},${y_prev} A ${rscale * tweak},${rscale * tweak} 0 0 1 ${x},${y}" class="arrow"/>
  </g>`;
 outs.push(`
  <g transform="rotate(${rotate}) scale(${scale})">
   <use xlink:href="#leaf" fill-opacity="${scale}"/>${out_text}
  </g>${out_arrow}`);
 x_prev = x;
 y_prev = y;
 degree += 180 * (3 - Math.sqrt(5));
}

/// ============= JavaScript SVG generator by TilmannR and cmglee =============
document.getElementById('GENERATED_CONTENT').innerHTML =
                      `\n${outs.join('')}\n\n  `;
const generator     = document.getElementById('GENERATOR_SCRIPT');
generator.innerHTML = generator.innerHTML.
                       replace(/[<]script[^>]*/, `<!-${''}-script`).
                       replace(/<[/]script>/, `</script-${''}->`);
]]></script--></g></svg>