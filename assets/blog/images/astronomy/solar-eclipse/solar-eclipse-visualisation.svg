<?xml version="1.0"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="100%" height="100%" viewBox="-2900 -4700 5800 5800">
 <title>Solar eclipse visualisation</title>
 <desc>Visualisation of a solar eclipse from different positions by CMG Lee. Each icon shows the view from the centre of its black spot, representing the moon.</desc>
 <defs>
  <radialGradient id="grad_sun" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
   <stop offset="10%" stop-color="#ffff00"/>
   <stop offset="90%" stop-color="#ffcc00"/>
  </radialGradient>
  <linearGradient id="grad_moon" x1="0%" x2="0%" y1="0%" y2="100%">
   <stop offset="40%" stop-color="#cccccc"/>
   <stop offset="70%" stop-color="#999999"/>
  </linearGradient>
  <radialGradient id="grad_penumbra" cx="-40%" cy="90%" r="100%" fx="10%" fy="20%">
   <stop offset="10%" stop-color="#0066cc"/>
   <stop offset="100%" stop-color="#99ccff"/>
  </radialGradient>
  <linearGradient id="grad_antumbra" x1="0%" x2="0%" y1="0%" y2="100%">
   <stop offset="0%" stop-color="#666600"/>
   <stop offset="100%" stop-color="#00cc00"/>
  </linearGradient>
  <path id="penumbra" d="M 1996,720 L 364,-1456 A 455,455 0 0 1 420,-1008 L 0,0 L 300,720"/>
  <g id="half">
   <use xlink:href="#penumbra" fill="url(#grad_penumbra)"/>
   <path d="M 1920,-4608 L  420,-1008 L  -300,720" stroke="#ff0000"/>
   <path d="M 1664,-4160 L -364,-1456 L -1996,720" stroke="#0000ff"/>
  </g>
  <circle id="disc" cx="0" cy="0" r="80"/>
  <g id="suns" stroke="#ff9900" fill="url(#grad_sun)">
   <use xlink:href="#disc" transform="translate(-2200,-500) scale(1.1)"/>
   <use xlink:href="#disc" transform="translate(-1290,-500) scale(1.1)"/>
   <use xlink:href="#disc" transform="translate( -720,-500) scale(1.1)"/>
   <use xlink:href="#disc" transform="translate( -220,-500) scale(1.1)"/>
   <use xlink:href="#disc" transform="translate(    0,-500) scale(1.1)"/>
   <use xlink:href="#disc" transform="translate(  220,-500) scale(1.1)"/>
   <use xlink:href="#disc" transform="translate(  720,-500) scale(1.1)"/>
   <use xlink:href="#disc" transform="translate( 1290,-500) scale(1.1)"/>
   <use xlink:href="#disc" transform="translate( 2200,-500) scale(1.1)"/>
   <use xlink:href="#disc" transform="translate(-2080,   0) scale(1  )"/>
   <use xlink:href="#disc" transform="translate(-1200,   0) scale(1  )"/>
   <use xlink:href="#disc" transform="translate( -680,   0) scale(1  )"/>
   <use xlink:href="#disc" transform="translate( -230,   0) scale(1  )"/>
   <use xlink:href="#disc" transform="translate(    0,   0) scale(1  )"/>
   <use xlink:href="#disc" transform="translate(  230,   0) scale(1  )"/>
   <use xlink:href="#disc" transform="translate(  680,   0) scale(1  )"/>
   <use xlink:href="#disc" transform="translate( 1200,   0) scale(1  )"/>
   <use xlink:href="#disc" transform="translate( 2080,   0) scale(1  )"/>
   <use xlink:href="#disc" transform="translate(-1980, 500) scale(0.9)"/>
   <use xlink:href="#disc" transform="translate(-1150, 500) scale(0.9)"/>
   <use xlink:href="#disc" transform="translate( -640, 500) scale(0.9)"/>
   <use xlink:href="#disc" transform="translate( -215, 500) scale(0.9)"/>
   <use xlink:href="#disc" transform="translate(    0, 500) scale(0.9)"/>
   <use xlink:href="#disc" transform="translate(  215, 500) scale(0.9)"/>
   <use xlink:href="#disc" transform="translate(  640, 500) scale(0.9)"/>
   <use xlink:href="#disc" transform="translate( 1150, 500) scale(0.9)"/>
   <use xlink:href="#disc" transform="translate( 1980, 500) scale(0.9)"/>
  </g>
  <g id="moons" stroke="#000000" fill="#000000">
   <use xlink:href="#disc" transform="translate(-1830,-500) scale(1.3)"/>
   <use xlink:href="#disc" transform="translate(-1080,-500) scale(1.3)"/>
   <use xlink:href="#disc" transform="translate( -600,-500) scale(1.3)"/>
   <use xlink:href="#disc" transform="translate( -200,-500) scale(1.3)"/>
   <use xlink:href="#disc" transform="translate(    0,-500) scale(1.3)"/>
   <use xlink:href="#disc" transform="translate(  200,-500) scale(1.3)"/>
   <use xlink:href="#disc" transform="translate(  600,-500) scale(1.3)"/>
   <use xlink:href="#disc" transform="translate( 1080,-500) scale(1.3)"/>
   <use xlink:href="#disc" transform="translate( 1830,-500) scale(1.3)"/>
   <use xlink:href="#disc" transform="translate(-1830,   0) scale(1  )"/>
   <use xlink:href="#disc" transform="translate(-1080,   0) scale(1  )"/>
   <use xlink:href="#disc" transform="translate( -600,   0) scale(1  )"/>
   <use xlink:href="#disc" transform="translate( -200,   0) scale(1  )"/>
   <use xlink:href="#disc" transform="translate(    0,   0) scale(1  )"/>
   <use xlink:href="#disc" transform="translate(  200,   0) scale(1  )"/>
   <use xlink:href="#disc" transform="translate(  600,   0) scale(1  )"/>
   <use xlink:href="#disc" transform="translate( 1080,   0) scale(1  )"/>
   <use xlink:href="#disc" transform="translate( 1830,   0) scale(1  )"/>
   <use xlink:href="#disc" transform="translate(-1830, 500) scale(0.7)"/>
   <use xlink:href="#disc" transform="translate(-1080, 500) scale(0.7)"/>
   <use xlink:href="#disc" transform="translate( -600, 500) scale(0.7)"/>
   <use xlink:href="#disc" transform="translate( -200, 500) scale(0.7)"/>
   <use xlink:href="#disc" transform="translate(    0, 500) scale(0.7)"/>
   <use xlink:href="#disc" transform="translate(  200, 500) scale(0.7)"/>
   <use xlink:href="#disc" transform="translate(  600, 500) scale(0.7)"/>
   <use xlink:href="#disc" transform="translate( 1080, 500) scale(0.7)"/>
   <use xlink:href="#disc" transform="translate( 1830, 500) scale(0.7)"/>
  </g>
  <path id="arrow" d="M -2400,0 H 2400 m -100,-50 l 100,50 l -100,50" stroke="#999999"/>
 </defs>
 <g font-family="Arial,Helvetica,sans-serif" font-size="280" text-anchor="middle" stroke-linejoin="round" stroke-width="20" stroke="none" fill="none">
  <circle cx="0" cy="0" r="999999" fill="#ffffff"/>
  <path d="M -420,-1008 L 0,0 L 420,-1008 A 455,455 0 0 1 -420,-1008" fill="#996600"/>
  <path d="M -300,  720 L 0,0 L 300,  720" fill="url(#grad_antumbra)"/>
  <use xlink:href="#half" transform="scale( 1,1)"/>
  <use xlink:href="#half" transform="scale(-1,1)"/>
  <use xlink:href="#half" transform="scale( 1,1)" fill-opacity="0"/>
  <use xlink:href="#half" transform="scale(-1,1)" fill-opacity="0"/>
  <circle cx="0" cy="-5408" r="2080" stroke="#cc6600" fill="url(#grad_sun)"/>
  <circle cx="0" cy="-1183" r="455" stroke="#666666" fill="url(#grad_moon)"/>
  <use xlink:href="#arrow" transform="translate(0,-500)"/>
  <use xlink:href="#arrow" transform="translate(0,   0)"/>
  <use xlink:href="#arrow" transform="translate(0, 500)"/>
  <use xlink:href="#suns"/>
  <use xlink:href="#moons"/>
  <use xlink:href="#suns" stroke-dasharray="30,20" fill-opacity="0"/>
  <path d="M 200,-700 L 1800,-2000 M -520,-1150 L -1000,-2000 L 550,-1150 M 0,650 V 800 M -1200,-600 L -2500,-900 M -320,-600 L -1500,-900 M -50,-620 L -1000,-1050 M 320,-600 L 1200,-900 M 1200,-600 L 2200,-900" stroke="#000000"/>
  <g fill="#000000">
   <g font-weight="bold">
    <switch><text x="0" y="-4200" id="trsvg23-ms" systemLanguage="ms"><tspan id="trsvg1-ms">Matahari</tspan></text><text x="0" y="-4200" id="trsvg23"><tspan id="trsvg1">Sun</tspan></text></switch>
    <switch><text x="0" y="-1080" id="trsvg24-ms" systemLanguage="ms"><tspan id="trsvg2-ms">Bulan</tspan></text><text x="0" y="-1080" id="trsvg24"><tspan id="trsvg2">Moon</tspan></text></switch>
   </g>
   <g font-style="italic">
    <switch><text x="2600" y="350" fill="#999999" id="trsvg25-ms" systemLanguage="ms"><tspan id="trsvg3-ms">masa</tspan></text><text x="2600" y="350" fill="#999999" id="trsvg25"><tspan id="trsvg3">time</tspan></text></switch>
    <switch><text x="0" y="-3800" id="trsvg26-ms" systemLanguage="ms"><tspan id="trsvg4-ms">tidak mengikut skala</tspan></text><text x="0" y="-3800" id="trsvg26"><tspan id="trsvg4">not to scale</tspan></text></switch>
   </g>
   <switch><text x="1800" y="-2300" id="trsvg27-ms" systemLanguage="ms"><tspan font-weight="bold" id="trsvg5-ms">Umbra</tspan><tspan x="1800" dy="250" id="trsvg6-ms">(gerhana penuh)</tspan></text><text x="1800" y="-2300" id="trsvg27"><tspan font-weight="bold" id="trsvg5">Umbra</tspan><tspan x="1800" dy="250" id="trsvg6">(total eclipse)</tspan></text></switch>
   <switch><text x="-1900" y="-2300" id="trsvg28-ms" systemLanguage="ms"><tspan font-weight="bold" id="trsvg7-ms">Penumbra</tspan><tspan x="-1900" dy="250" id="trsvg8-ms">(gerhana separa)</tspan></text><text x="-1900" y="-2300" id="trsvg28"><tspan font-weight="bold" id="trsvg7">Penumbra</tspan><tspan x="-1900" dy="250" id="trsvg8">(partial eclipse)</tspan></text></switch>
   <switch><text x="0" y="1000" id="trsvg29-ms" systemLanguage="ms"><tspan font-weight="bold" id="trsvg9-ms">Antumbra</tspan><tspan dx="100" id="trsvg10-ms">(gerhana anulus)</tspan></text><text x="0" y="1000" id="trsvg29"><tspan font-weight="bold" id="trsvg9">Antumbra</tspan><tspan dx="100" id="trsvg10">(annular eclipse)</tspan></text></switch>
   <g transform="scale(0.75,1)">
    <switch><text x="-3400" y="-1200" id="trsvg30-ms" systemLanguage="ms"><tspan id="trsvg11-ms">Sentuhan</tspan><tspan x="-3400" dy="250" id="trsvg12-ms">ke-1</tspan></text><text x="-3400" y="-1200" id="trsvg30"><tspan id="trsvg11">1st</tspan><tspan x="-3400" dy="250" id="trsvg12">contact</tspan></text></switch>
    <switch><text x="-2350" y="-1200" id="trsvg31-ms" systemLanguage="ms"><tspan id="trsvg13-ms">Sentuhan</tspan><tspan x="-2350" dy="250" id="trsvg14-ms">ke-2</tspan></text><text x="-2350" y="-1200" id="trsvg31"><tspan id="trsvg13">2nd</tspan><tspan x="-2350" dy="250" id="trsvg14">contact</tspan></text></switch>
    <switch><text x="-1350" y="-1100" id="trsvg32-ms" systemLanguage="ms"><tspan id="trsvg15-ms">Kepenuhan</tspan></text><text x="-1350" y="-1100" id="trsvg32"><tspan id="trsvg15">Totality</tspan></text></switch>
    <switch><text x="1800" y="-1200" id="trsvg33-ms" systemLanguage="ms"><tspan id="trsvg16-ms">Sentuhan</tspan><tspan x="1800" dy="250" id="trsvg17-ms">ke-3</tspan></text><text x="1800" y="-1200" id="trsvg33"><tspan id="trsvg16">3rd</tspan><tspan x="1800" dy="250" id="trsvg17">contact</tspan></text></switch>
    <switch><text x="3000" y="-1200" id="trsvg34-ms" systemLanguage="ms"><tspan id="trsvg18-ms">Sentuhan</tspan><tspan x="3000" dy="250" id="trsvg19-ms">ke-4</tspan></text><text x="3000" y="-1200" id="trsvg34"><tspan id="trsvg18">4th</tspan><tspan x="3000" dy="250" id="trsvg19">contact</tspan></text></switch>
    <g font-style="italic">
     <switch><text x="-3300" y="-180" id="trsvg35"><tspan id="trsvg20">mag.&gt;1</tspan></text></switch>
     <switch><text x="-3300" y="300" id="trsvg36"><tspan id="trsvg21">mag.=1</tspan></text></switch>
     <switch><text x="-3300" y="750" id="trsvg37"><tspan id="trsvg22">mag.&lt;1</tspan></text></switch>
    </g>
   </g>
  </g>
 </g>
<!--

d/R = (d - s)/r => r d = R d - R s => d = R s / (R - r)
As s > R + r, d > R (R + r) / (R - r)

theta = asin(R / d)

P1 = (     R sin(theta),     R cos(theta) )
P2 = ( s + r sin(theta), r cos(theta) )

phi = asin((R + r) / s)

P3 = (     R sin(phi),  R cos(phi) )
P4 = ( s - r sin(phi), -r cos(phi) )

Smallest Pythagorean triples are (3,4,5) and (5,12,13).
To get rational sin and cos, let R / d = 5 / 13 => d = 13 R / 5
and (R + r) / s = 3 / 5 [using 4 / 5 gives 77 r = 27 R i.e. clumsier]
=> 5 (R + r) = 3 s = 3 (d (R - r)) = (39 / 5) (R - r)
=> 25 R + 25 r = 39 R - 39 r => 32 r = 7 R

For integer r, R and d, let r = 7 x 5 x 13 [denominator of d = 13 R / 5]
=> r = 455, R = 32 x 5 x 13 = 2080, d = 13 x 2080 / 5 = 5408
=> s = 5408 (1 - 455/2080) = 4225
=> sin(theta) = 5/13, sin(theta) = 12/13, sin(phi) = 3/5, cos(phi) = 4/5

=> P1 = (800, 1920), P2 = (4400, 420), P3 = (1248, 1664), P4 = (3952, -364)

-->
</svg>
