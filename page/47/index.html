<!doctypehtml><html lang=zh-CN><meta charset=UTF-8><meta content=width=device-width name=viewport><meta content=#222 name=theme-color><meta content="Hexo 7.1.1" name=generator><link href=https://fonts.googleapis.com rel=preconnect><link href=https://unpkg.com rel=preconnect><link href=https://www.longluo.me/assets/logo/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=https://www.longluo.me/assets/logo/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=https://www.longluo.me/assets/logo/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link color=#222 href=/images/logo.svg rel=mask-icon><meta content=n6mekvZa-QaR3EnDD-CzJymq7mGubpU7rvoGpKROHLE name=google-site-verification><meta content=6BFBD4DDDB3B6F4FDD26CF82BADDB931 name=msvalidate.01><meta content=a2ab49d952ea45f5 name=yandex-verification><meta content=www.longluo.me name=baidu-site-verification><link href=/css/main.css rel=stylesheet><link as=style href=https://fonts.googleapis.com/css2?family=Noto+Serif+SC:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Roboto+Mono:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap&subset=latin,latin-ext onload=this.rel='stylesheet' rel=preload><link as=style href=https://unpkg.com/@fortawesome/fontawesome-free@7.0.0/css/all.min.css onload=this.rel='stylesheet' rel=preload><link crossorigin=anonymous href=https://unpkg.com/animate.css@3.1.1/animate.min.css integrity=sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE= rel=stylesheet><script class=next-config data-name=main type=application/json>{"hostname":"www.longluo.me","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.26.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":"default"},"fold":{"enable":false,"height":500},"language":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":5,"unescape":false,"preload":false}}</script><script defer src=https://unpkg.com/hexo-theme-next@8.26.0/source/js/config.js></script><meta content="A Curious Engineer" name=description><meta content=website property=og:type><meta content="Long Luo's Life Notes" property=og:title><meta content=https://www.longluo.me/page/47/index.html property=og:url><meta content="Long Luo's Life Notes" property=og:site_name><meta content="A Curious Engineer" property=og:description><meta content=zh_CN property=og:locale><meta content="Long Luo" property=article:author><meta content="longluo, Tech, Tech Blog, 技术博客, Personal Blog, 个人博客, Blogger, 博客, Math, 数学, Physics, 物理, Software Engineer, 软件工程师, Program, 编程, 程序员, 码农, Java, C, C++, Data Structures, 数据结构, Algorithm, 算法, Life, 生活," property=article:tag><meta content=summary name=twitter:card><link href=https://www.longluo.me/page/47/ rel=canonical><script class=next-config data-name=page type=application/json>{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/47/index.html","title":""}</script><script class=next-config data-name=calendar type=application/json>""</script><title>Long Luo's Life Notes</title><script async src=https://www.googletagmanager.com/gtag/js?id=UA-46213499-2></script><script class=next-config data-name=google_analytics type=application/json>{"tracking_id":"UA-46213499-2","only_pageview":false,"measure_protocol_api_secret":null}</script><script defer src=https://unpkg.com/hexo-theme-next@8.26.0/source/js/third-party/analytics/google-analytics.js></script><script defer src=https://unpkg.com/hexo-theme-next@8.26.0/source/js/third-party/analytics/baidu-analytics.js></script><script async src=https://hm.baidu.com/hm.js?a75fb5d0c0ef1e36c34b7f52bb7c48be></script><script>(function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "gz2vdkhgvh");</script><script data-domain=longluo.me defer src=https://plausible.io/js/script.js></script><script crossorigin=anonymous defer integrity=sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY= src=https://unpkg.com/animejs@3.2.1/lib/anime.min.js></script><script defer src=https://unpkg.com/hexo-theme-next@8.26.0/source/js/utils.js></script><script defer src=https://unpkg.com/hexo-theme-next@8.26.0/source/js/motion.js></script><script defer src=https://unpkg.com/hexo-theme-next@8.26.0/source/js/sidebar.js></script><script defer src=https://unpkg.com/hexo-theme-next@8.26.0/source/js/next-boot.js></script><script defer src=https://unpkg.com/hexo-theme-next@8.26.0/source/js/bookmark.js></script><script crossorigin=anonymous defer integrity=sha256-xFC6PJ82SL9b3WkGjFavNiA9gm5z6UBxWPiu4CYjptg= src=https://unpkg.com/hexo-generator-searchdb@1.5.0/dist/search.js></script><script defer src=https://unpkg.com/hexo-theme-next@8.26.0/source/js/third-party/search/local-search.js></script><script async src=https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><script class=next-config data-name=enableMath type=application/json>true</script><script class=next-config data-name=mathjax type=application/json>{"enable":true,"tags":"ams","js":{"url":"https://unpkg.com/mathjax@3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script><script defer src=https://unpkg.com/hexo-theme-next@8.26.0/source/js/third-party/math/mathjax.js></script><link href=https://waline.longluo.me/ rel=dns-prefetch><noscript><link href=/css/noscript.css rel=stylesheet></noscript><link title="Long Luo's Life Notes" href=/atom.xml rel=alternate type=application/atom+xml><link title="Long Luo's Life Notes" href=/rss2.xml rel=alternate type=application/rss+xml><style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style><body class=use-motion itemscope itemtype=http://schema.org/WebPage><div class=headband></div><main class=main><div class=column><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=site-brand-container><div class=site-nav-toggle><div aria-label=切换导航栏 class=toggle role=button><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div></div><div class=site-meta><a class=brand href=/ rel=start> <i class=logo-line></i> <h1 class=site-title>Long Luo's Life Notes</h1> <i class=logo-line></i> </a><p class=site-subtitle itemprop=description>每一天都是奇迹</div><div class=site-nav-right><div class="toggle popup-trigger" aria-label=搜索 role=button><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ rel=section><i class="fa fa-home fa-fw"></i>首页</a><li class="menu-item menu-item-works"><a href=/works rel=section><i class="fa fa-code fa-fw"></i>作品</a><li class="menu-item menu-item-about"><a href=/about/ rel=section><i class="fa fa-user fa-fw"></i>关于</a><li class="menu-item menu-item-tags"><a href=/tags/ rel=section><i class="fa fa-tags fa-fw"></i>标签</a><li class="menu-item menu-item-categories"><a href=/categories/ rel=section><i class="fa fa-th fa-fw"></i>分类</a><li class="menu-item menu-item-archives"><a href=/archives/ rel=section><i class="fa fa-archive fa-fw"></i>归档</a><li class="menu-item menu-item-links"><a href=/links/ rel=section><i class="fa fa-link fa-fw"></i>友链</a><li class="menu-item menu-item-search"><a class=popup-trigger role=button><i class="fa fa-search fa-fw"></i>搜索 </a></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon> <i class="fa fa-search"></i> </span><div class=search-input-container><input autocapitalize=off autocomplete=off class=search-input maxlength=80 placeholder=搜索... spellcheck=false type=search></div><span class=popup-btn-close role=button> <i class="fa fa-times-circle"></i> </span></div><div class=search-result-container><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class=sidebar><div class="sidebar-inner sidebar-overview-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录<li class=sidebar-nav-overview>站点概览</ul><div class=sidebar-panel-container><!--noindex--><div class="post-toc-wrap sidebar-panel"></div><!--/noindex--><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop=author itemscope itemtype=http://schema.org/Person><img alt="Long Luo" class=site-author-image itemprop=image src=https://www.longluo.me/assets/avatar/sinc-3d-python.png><p class=site-author-name itemprop=name>Long Luo<div class=site-description itemprop=description>A Curious Engineer</div></div><div class="site-state-wrap animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/> <span class=site-state-item-count>351</span> <span class=site-state-item-name>日志</span> </a></div><div class="site-state-item site-state-categories"><a href=/categories/> <span class=site-state-item-count>28</span> <span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/> <span class=site-state-item-count>437</span> <span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-author animated"><span class=links-of-author-item> <a rel="noopener me" title="GitHub → https://github.com/longluo" href=https://github.com/longluo target=_blank><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class=links-of-author-item> <a rel="noopener me" title="ZhiHu → http://www.zhihu.com/people/longluo" href=http://www.zhihu.com/people/longluo target=_blank><i class="fab fa-quora fa-fw"></i>ZhiHu</a> </span><span class=links-of-author-item> <a rel="noopener me" title="LinkedIn → https://www.linkedin.com/in/longluo/" href=https://www.linkedin.com/in/longluo/ target=_blank><i class="fa fa-linkedin fa-fw"></i>LinkedIn</a> </span><span class=links-of-author-item> <a rel="noopener me" title="E-Mail → mailto:luolong0226@163.com" href=mailto:luolong0226@163.com target=_blank><i class="fa fa-envelope fa-fw"></i>E-Mail</a> </span></div><div class="cc-license animated" itemprop=license><a class=cc-opacity href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh rel=noopener target=_blank><img alt="Creative Commons" src=https://unpkg.com/@creativecommons/vocabulary@2020.11.3/assets/license_badges/small/by_nc_sa.svg></a></div></div></div></div><div class="sidebar-inner sidebar-blogroll"><div class="links-of-blogroll animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i> 链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=http://blog.csdn.net/tcpipstack rel=noopener target=_blank title=http://blog.csdn.net/tcpipstack>My CSDN</a></ul></div></div></aside></div><div class="main-inner index posts-expand"><div class=post-block><article class=post-content itemscope itemtype=http://schema.org/Article><link href=https://www.longluo.me/blog/linux-shell/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta content=https://www.longluo.me/assets/avatar/sinc-3d-python.png itemprop=image> <meta content="Long Luo" itemprop=name> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content="Long Luo's Life Notes" itemprop=name> <meta content="A Curious Engineer" itemprop=description> </span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork> <meta content=" | Long Luo's Life Notes" itemprop=name> <meta itemprop=description> </span><header class=post-header><h2 itemprop="name headline" class=post-title><a class=post-title-link href=/blog/linux-shell/ itemprop=url>Linux Shell 环境变量</a></h2><div class=post-meta-container><div class=post-meta><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar"></i> </span> <span class=post-meta-item-text>发表于</span> <time itemprop="dateCreated datePublished" title="创建时间：2017-10-02 09:59:08" datetime=2017-10-02T09:59:08+08:00>2017-10-02</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar-check"></i> </span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2025-05-02 15:19:40" datetime=2025-05-02T15:19:40+08:00 itemprop=dateModified>2025-05-02</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-folder"></i> </span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing> <a href=/categories/Linux/ itemprop=url rel=index><span itemprop=name>Linux</span></a> </span> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-comment"></i> </span> <span class=post-meta-item-text>Waline：</span> <a href=/blog/linux-shell/#waline itemprop=discussionUrl title=waline> <span class="post-comments-count waline-comment-count" data-path=/blog/linux-shell/ itemprop=commentCount></span> </a> </span><span class=post-meta-item title=阅读次数> <span class=post-meta-item-icon> <i class="far fa-eye"></i> </span> <span class=post-meta-item-text>阅读次数：</span> <span class=waline-pageview-count data-path=/blog/linux-shell/></span> </span><span class=post-meta-break></span><span class=post-meta-item title=本文字数> <span class=post-meta-item-icon> <i class="far fa-file-word"></i> </span> <span class=post-meta-item-text>本文字数：</span> <span>17k</span> </span><span class=post-meta-item title=阅读时长> <span class=post-meta-item-icon> <i class="far fa-clock"></i> </span> <span class=post-meta-item-text>阅读时长 ≈</span> <span>15 分钟</span> </span></div></div></header><div class=post-body itemprop=articleBody><p><strong><em>By Long Luo</em></strong><p>find out current location in disk (stands for “print working directory”)<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>pwd</span><br></pre></table></figure><p>list contents of current directory<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>ls </span><br></pre></table></figure><p>list contents of current directory with more information, and in list format<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>ls -l </span><br></pre></table></figure><p>make a directory<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>mkdir new_dir</span><br></pre></table></figure><p>change into a directory<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>cd new_dir</span><br></pre></table></figure><p>leave the directory (go back up one level)<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>cd ..</span><br></pre></table></figure><p>remove the directory<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>rmdir new_dir</span><br></pre></table></figure><p>create blank file<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>touch new_file</span><br></pre></table></figure><p>write contents to the file: Note <code>></code> will overwrite whatever was in that file before, <code>>></code> does not overwrite contents of file but rather appends it to the end<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre><td class=code><pre><span class=line>echo hello world > new_file  </span><br><span class=line>echo hello world2 >> new_file</span><br></pre></table></figure><p>print contents of file to terminal<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>cat new_file</span><br></pre></table></figure><p>browse contents of file<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>less new_file</span><br></pre></table></figure><p>while browsing using <code>less</code> you can use the following keyboard shortcuts: * q to quit * j,k to navigate up and down * u,d to navigate pages up and down<p>search for the string “hello” in file<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>grep "hello" new_file</span><br></pre></table></figure><p>redirect output of a command to another new file<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>grep "hello" new_file > newer_file </span><br></pre></table></figure><p>overwrite contents of file<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>echo bye world > new_file # > does overwrite contents of the file</span><br></pre></table></figure><p>create a bash file using a text editor<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>touch test.sh #touch creates a file if one doesn't exist</span><br></pre></table></figure><p>check read (r), write (w) and execute (x) permissions of the test.sh file<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>ls -al </span><br></pre></table></figure><p>type <code>man ls</code> on the command line to examine what the flags ‘-a’ and ‘-l’ do<p>add a bash command to the file<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>echo "echo 'hello world'" > test.sh </span><br></pre></table></figure><p>The <code>></code> redirects the output of the command to a file<p>examine the contents of this file<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>less test.sh</span><br></pre></table></figure><p>execute the file<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>bash test.sh</span><br></pre></table></figure><p>add another line to the file<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>echo "echo 'bye bye world'" >> test.sh </span><br></pre></table></figure><p>The <code>>></code> tell the shell to concatenate the output of the command to the file <code>test.sh</code> but doesn’t overwrite it<p>add executable permission to it<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>chmod a+x test.sh </span><br></pre></table></figure><p>now we can execute this file using dot notation<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>./test.sh</span><br></pre></table></figure><ul><li>add ‘sha-bang’ (i.e., <code>#!</code>) to the file so that it’s interpreted as a bash script<li>use a text editor to open the file and add #!/bin/bash to the very top or use “vim test.sh” or “nano test.sh” to edit it</ul><p>how to create a variable<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre><td class=code><pre><span class=line>var1='hello world'</span><br><span class=line>var2=helloworld</span><br><span class=line>var3=999</span><br><span class=line>var4=$var3 #can assign a variable to the contents of another variable</span><br><span class=line>var5=${var4}appendedtext #can use curly brackets to clarify variable names</span><br></pre></table></figure><p>Now have a look at what the values we’ve assigned to these variables<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre><td class=code><pre><span class=line>echo var1 is $var1</span><br><span class=line>echo var2 is $var2</span><br><span class=line>echo var3 is $var3</span><br><span class=line>echo var4 is $var4</span><br><span class=line>echo var5 is $var5</span><br></pre></table></figure><p>Some examples of <code>for</code> loops over files<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>touch 1.txt 2.txt 3.txt #make a few dummy files for demonstration</span><br></pre></table></figure><p>In a bash script, you can write a for loop over multiple lines like so:<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre><td class=code><pre><span class=line>for filename in ./*; do #loop over files in current directory</span><br><span class=line>    echo $filename #* is a wildcard that matches anything</span><br><span class=line>done</span><br></pre></table></figure><p>You can also write it all in one line if you want to run it on the command line (note the use of semicolons <code>;</code>):<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line>for filename in ./* ; do echo $filename ; done</span><br></pre></table></figure><p>Some more example for loops:<p>loop over files with given extension<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre><td class=code><pre><span class=line>for filename in *.txt; do </span><br><span class=line>    echo $filename</span><br><span class=line>done</span><br></pre></table></figure><p>loop over files in the parent directory, <code>..</code> is an alias for the parent directory)<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre><td class=code><pre><span class=line>for filename in ../*; do </span><br><span class=line>    echo $filename </span><br><span class=line>done</span><br></pre></table></figure><p>how to loop over numbers: a C++ style for loop which iterates over variable <code>i</code> from 0 to 4 (stop at 5)<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre><td class=code><pre><span class=line>for ((i=0; i&LT5; i++)); do </span><br><span class=line>    echo $i</span><br><span class=line>done</span><br></pre></table></figure><p>Another example: use the <code>seq command</code><figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre><td class=code><pre><span class=line>for j in $(seq 5 10); do </span><br><span class=line>    echo $j</span><br><span class=line>done</span><br></pre></table></figure><p>how to call a script from within a <code>for</code> loop (e.g. in another script)<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre><td class=code><pre><span class=line>for ((i=0; i&LT5; i++)); do</span><br><span class=line>    ./test.sh</span><br><span class=line>done</span><br></pre></table></figure><p>how to call a script with arguments: First let’s create a script called <code>test2.sh</code> that writes out “printing number” and then the first and second command line arguments (i.e., whitespace separated strings that are written immediately after the command) <code>$1</code> refers to the first command line argument, <code>$2</code> refers to the second.<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre><td class=code><pre><span class=line>touch test2.sh</span><br><span class=line>chmod a+x test2.sh                                 # make it executable</span><br><span class=line>echo "echo 'printing number' \$1 \$2" > test2.sh   # $1 refers to first command line argument</span><br></pre></table></figure><p>Now put the script into a <code>for</code> loop.<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre><td class=code><pre><span class=line>#note: we use \$ to escape the dollar sign</span><br><span class=line>for ((i=0; i&LT5; i++)); do</span><br><span class=line>    ./test2.sh $i wow</span><br><span class=line>done</span><br></pre></table></figure><p>It should print out:<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre><td class=code><pre><span class=line>printing number 0 wow</span><br><span class=line>printing number 1 wow</span><br><span class=line>printing number 2 wow</span><br><span class=line>printing number 3 wow</span><br><span class=line>printing number 4 wow</span><br></pre></table></figure><p>how to iterate over the lines contained within a text file<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre><td class=code><pre><span class=line>touch test3.txt</span><br><span class=line>chmod a+x test3.txt</span><br><span class=line>echo 'line1' >> test3.txt</span><br><span class=line>echo 'line2' >> test3.txt</span><br><span class=line>echo 'line3' >> test3.txt</span><br><span class=line>echo 'line4' >> test3.txt</span><br><span class=line>echo 'line5' >> test3.txt</span><br><span class=line>for line in `cat test3.txt`; do #note: we are using `! not ' or "...</span><br><span class=line>    echo $line</span><br><span class=line>done</span><br></pre></table></figure><p>be careful using single and double quotes, they have different behaviours when expanding variables<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre><td class=code><pre><span class=line>echo 'var4 contains $var4'</span><br><span class=line>echo "var4 contains $var4"</span><br></pre></table></figure><p>if statement - check if two strings are equal<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre><td class=code><pre><span class=line>boolvar=lol101</span><br><span class=line>if [ $boolvar = lol101 ]; then #make sure to add the spaces around the square brackets</span><br><span class=line>    echo 'yes'</span><br><span class=line>else</span><br><span class=line>    echo 'no'</span><br><span class=line>fi</span><br></pre></table></figure><p>Another <code>if</code> example<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre><td class=code><pre><span class=line>if [ $boolvar = should_echo_no ]; then #make sure to add the spaces around the square brackets</span><br><span class=line>    echo 'yes'</span><br><span class=line>else</span><br><span class=line>    echo 'no'</span><br><span class=line>fi</span><br></pre></table></figure><h2 id=linux环境变量问题汇总>Linux环境变量问题汇总</h2><h3 id=测试好的脚本放到-crontab-里就报错-找不到命令>测试好的脚本放到 crontab 里就报错: 找不到命令</h3><p>写好一个脚本，测试没有问题，然后放到crontab 想要定时执行，但是总是报错，去看日志的话显示某些命令找不到，这种一般都是因为PATH环境变量变了导致的<p>自己在shell命令行下测试的时候当前环境变量就是这个用户的环境变量，可以通过命令：env 看到，脚本放到crontab 里面后一般都加了sudo 这个时候 env 变了。比如你可以在命令行下执行 env 和 sudo env 比较一下就发现他们很不一样<p>sudo有一个参数 -E （–preserver-env）就是为了解决这个问题的。<p>这个时候再比较一下<ul><li>env<li>sudo env<li>sudo -E env</ul><p>大概就能理解这里的区别了。<p>本文后面的回复中有同学提到了：<blockquote><p>第一个问题，sudo -E在集团的容器中貌似是不行的，没有特别好的解，我们最后是通过在要执行的脚本中手动source “/etc/profile.d/dockerenv.sh”才行</blockquote><p>我也特意去测试了一下官方的Docker容器，也有同样的问题，/etc/profile.d/dockerenv.sh 中的脚本没有生效，然后debug看了看，主要是因为bashrc中的 . 和 source 不同导致的，不能说没有生效，而是加载 /etc/profile.d/dockerenv.sh 是在一个独立的bash 进程中，加载完毕进程结束，所有加载过的变量都完成了生命周期释放了，类似我文章中的export部分提到的。我尝试把 ~/.bashrc 中的 . /etc/bashrc 改成 source /etc/bashrc , 同时也把 /etc/bashrc 中的 . 改成 source，就可以了，再次进到容器不需要任何操作就能看到所有：/etc/profile.d/dockerenv.sh 中的变量了，所以我们制作镜像的时候考虑改改这里<figure><img alt=crontab src=/images/951413iMgBlog/crontab-7372074.png><figcaption aria-hidden=true>crontab</figcaption></figure><h3 id=docker-容器中admin取不到env参数>docker 容器中admin取不到env参数</h3><p>docker run的时候带入一堆参数，用root能env中能看到这些参数，admin用户也能看见这些参数，但是通过crond用admin就没法启动应用了，因为读不到这些env。<h3 id=同样一个命令ssh执行不了-报找不到命令>同样一个命令ssh执行不了， 报找不到命令</h3><p>比如：<p>ssh user@ip ” ip a ” 报错： bash: ip: command not found<p>但是你要是先执行 ssh user@ip 连上服务器后，再执行 ip a 就可以，这里是同一个命令通过两种不同的方式使用，但是环境变量也不一样了。<p>同样想要解决这个问题的话可以先 ssh 连上服务器，再执行 which ip ; env | grep PATH<pre><code>$ which ip
/usr/sbin/ip
$ env | grep PATH
PATH=/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin</code></pre><p>很明显这里因为 ip在/usr/sbin下，而/usr/sbin又在PATH变量中，所以可以找到。<p>那么接下来我们看看<pre><code>$ssh user@ip "env | grep PATH"
PATH=/usr/local/bin:/usr/bin</code></pre><p>很明显这里的PATH比上面的PATH短了一截，/usr/sbin也没有在里面，所以/usr/sbin 下的ip命令自然也找不到了，这里虽然都是同一个用户，但是他们的环境变量还不一样，有点出乎我的意料之外。<p>主要原因是我们的shell 分为login shell 和 no-login shell , 先ssh 登陆上去再执行命令就是一个login shell，Linux要为这个终端分配资源。<p>而下面的直接在ssh 里面放执行命令实际上就不需要login，所以这是一个no-login shell.<h4 id=login-shell-和-no-login-shell又有什么区别呢>login shell 和 no-login shell又有什么区别呢？</h4><ul><li>login shell加载环境变量的顺序是：① /etc/profile ② ~/.bash_profile ③ ~/.bashrc ④ /etc/bashrc<li>而non-login shell加载环境变量的顺序是： ① ~/.bashrc ② /etc/bashrc</ul><p>也就是nog-login少了前面两步，我们先看后面两步。<p>下面是一个 .bashrc 的内容：<pre><code>$ cat .bashrc 
# .bashrc

# Source global definitions
if [ -f /etc/bashrc ]; then
    . /etc/bashrc
fi</code></pre><p>基本没有什么内容，它主要是去加载 /etc/bashrc 而他里面也没有看到sbin相关的东西<p>那我们再看non-login少的两步： ① /etc/profile ② ~/.bash_profile<p>cat /etc/profile : if [ “$EUID” = “0” ]; then pathmunge /usr/sbin pathmunge /usr/local/sbin else pathmunge /usr/local/sbin after pathmunge /usr/sbin after fi<p>这几行代码就是把 /usr/sbin 添加到 PATH 变量中，正是他们的区别决定了这里的环境变量不一样。<p><strong>用一张图来表述他们的结构，箭头代表加载顺序，红框代表不同的shell的初始入口</strong>： <img alt=image.png src=/images/oss/ae3095f063dede80a8c1ee79ec25685c.png><p>像 ansible 这种自动化工具，或者我们自己写的自动化脚本，底层通过ssh这种non-login的方式来执行的话，那么都有可能碰到这个问题，如何修复呢？<p>在 /etc/profile.d/ 下创建一个文件：/etc/profile.d/my_bashenv.sh 内容如下：<pre><code>$cat /etc/profile.d/my_bashenv.sh 

pathmunge () {
if ! echo $PATH | /bin/egrep -q "(^|:)$1($|:)" ; then
   if [ "$2" = "after" ] ; then
  PATH=$PATH:$1
   else
  PATH=$1:$PATH
   fi
fi
}
 
pathmunge /sbin
pathmunge /usr/sbin
pathmunge /usr/local/sbin
pathmunge /usr/local/bin
pathmunge /usr/X11R6/bin after
 
unset pathmunge

complete -cf sudo
 
    alias chgrp='chgrp --preserve-root'
    alias chown='chown --preserve-root'
    alias chmod='chmod --preserve-root'
    alias rm='rm -i --preserve-root'
    
HISTTIMEFORMAT='[%F %T] '
HISTSIZE=1000
export EDITOR=vim    
export PS1='\n\e[1;37m[\e[m\e[1;32m\u\e[m\e[1;33m@\e[m\e[1;35m\H\e[m \e[4m`pwd`\e[m\e[1;37m]\e[m\e[1;36m\e[m\n\$'</code></pre><p>通过前面我们可以看到 /etc/bashrc 总是会去加载 /etc/profile.d/ 下的所有 *.sh 文件，同时我们还可以在这个文件中修改我们喜欢的 shell 配色方案和环境变量等等<p><a href=https://www.gnu.org/software/bash/manual/html_node/Bash-Startup-Files.html rel=noopener target=_blank>脚本前增加如下一行是好习惯</a><figure class="highlight shell"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br></pre><td class=code><pre><span class=line><span class="meta prompt_">#</span><span class=language-bash>!/bin/bash --login</span></span><br></pre></table></figure><figure><img alt=image-20220505213833017 src=/images/951413iMgBlog/image-20220505213833017.png><figcaption aria-hidden=true>image-20220505213833017</figcaption></figure><h3 id=bash>BASH</h3><p>1、交互式的登录shell （bash –il xxx.sh） 载入的信息：<p>/etc/profile ~/.bash_profile（ -> ~/.bashrc -> /etc/bashrc） ~/.bash_login ~/.profile<p>2、非交互式的登录shell （bash –l xxx.sh） 载入的信息：<p>/etc/profile ~/.bash_profile （ -> ~/.bashrc -> /etc/bashrc） ~/.bash_login ~/.profile $BASH_ENV<p>3、交互式的非登录shell （bash –i xxx.sh） 载入的信息：<p>~/.bashrc （ -> /etc/bashrc）<p>4、非交互式的非登录shell （bash xxx.sh） 载入的信息：<p>$BASH_ENV<h3 id=sh>SH</h3><p>1、交互式的登录shell 载入的信息：<p>/etc/profile<p>~/.profile<p>2、非交互式的登录shell 载入的信息：<p>/etc/profile ~/.profile<p>3、交互式的非登录shell 载入的信息：<p>$ENV<h4 id=练习验证一下bashsh和loginnon-login>练习验证一下bash、sh和login、non-login</h4><ul><li>sudo ll 或者 sudo cd 是不是都报找不到命令<li>先sudo bash 然后执行 ll或者cd就可以了<li>先sudo sh 然后执行 ll或者cd还是报找不到命令<li>sudo env | grep PATH 然后 sudo bash 后再执行 env | grep PATH 看到的PATH环境变量不一样了</ul><p><strong>找不到ll、cd命令不是因为login/non-login而是因为这两个命令是bash内部定义的，所以sh找不到，通过type -a cd 可以看到一个命令到底是哪里来的</strong><p>4、非交互式的非登录shell 载入的信息：<p>nothing<h3 id=export命令的作用>export命令的作用</h3><p>Linux 中export是一种命令工具通过export命令把shell变量中包含的用户变量导入给子程序.<strong>默认情况下子程序仅会继承父程序的环境变量</strong>，子程序不会继承父程序的自定义变量，所以需要export让父程序中的<strong>自定义变量</strong>变成环境变量，然后子程序就能继承过来了。<p>我们来看一个例子， 有一个变量，名字 abc 内容123 如果没有export ，那么通过bash创建一个新的shell（新shell是之前bash的子程序），在新的shell里面就没有abc这个变量， export之后在新的 shell 里面才可以看到这个变量，但是退出重新login后（产生了一个新的bash，只会加载env）abc变量都不在了<pre><code>$echo $abc
$abc="123"
$echo $abc
123
$bash
$echo $abc

$exit
exit

$export abc

$echo $abc
123

$bash

$echo $abc
123</code></pre><h2 id=一些常见问题>一些常见问题</h2><h3 id=执行好好地shell-脚本换台服务器就source-not-found>执行好好地shell 脚本换台服务器就：source: not found</h3><p>source 是bash的一个内建命令（所以你找不到一个/bin/source 这样的可执行文件），也就是他是bash自带的，如果我们执行脚本是这样： sh shell.sh 而shell.sh中用到了source命令的话就会报 source: not found<p>这是因为bash 和 sh是两个东西，sh是 POSIX shell，你可以把它看成是一个兼容某个规范的shell，而bash是 Bourne-Again shell script， bash是 POSIX shell的扩展，就是bash支持所有符合POSIX shell的规范，但是反过来就不一定了，而这里的 source 恰好就是 bash内建的，不符合 POSIX shell的规范（<strong>POSIX shell 中用 . 来代替source</strong>)<blockquote><p><a href=https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html#Bourne-Shell-Builtins rel=noopener target=_blank>. (a period)</a><p>. filename [arguments]<p>Read and execute commands from the filename argument in the current shell context. If filename does not contain a slash, the <code>PATH</code> variable is used to find filename. When Bash is not in POSIX mode, the current directory is searched if filename is not found in <code>$PATH</code>. If any arguments are supplied, they become the positional parameters when filename is executed. Otherwise the positional parameters are unchanged. If the -T option is enabled, <code>source</code> inherits any trap on <code>DEBUG</code>; if it is not, any <code>DEBUG</code> trap string is saved and restored around the call to <code>source</code>, and <code>source</code> unsets the <code>DEBUG</code> trap while it executes. If -T is not set, and the sourced file changes the <code>DEBUG</code> trap, the new value is retained when <code>source</code> completes. The return status is the exit status of the last command executed, or zero if no commands are executed. If filename is not found, or cannot be read, the return status is non-zero. This builtin is equivalent to <code>source</code>.</blockquote><h3 id=在centos执行好好的脚本放到ubuntu上就不行了报语法错误>在centos执行好好的脚本放到Ubuntu上就不行了，报语法错误</h3><p>同上，如果到ubuntu上用 bash shell.sh是可以的，但是sh shell.sh就报语法错误，但是在centos上执行：sh或者bash shell.sh 都可以通过。 在centos上执行 ls -lh /usr/bin/sh 可以看到 /usr/bin/sh link到了 /usr/bin/bash 也就是sh等同于bash，所以都可以通过不足为奇。<p>但是在ubuntu上执行 ls -lh /usr/bin/sh 可以看到 /usr/bin/sh link到了 <strong>/usr/bin/dash</strong> ， 这就是为什么ubuntu上会报错<h3 id=source-shell.sh-和-bash-shell.sh以及-.shell.sh的区别>source shell.sh 和 bash shell.sh以及 ./shell.sh的区别</h3><p>source shell.sh就在本shell中展开执行 bash shell.sh表示在本shell启动一个子程序（bash），在子程序中执行 shell.sh (shell.sh中产生的一些环境变量就没法带回父shell进程了)， 只需要有读 shell.sh 权限就可以执行 ./shell.sh 跟bash shell.sh类似，但是必须要求shell.sh有rx权限，然后根据shell.sh前面的 #! 后面的指示来确定用bash还是sh<pre><code>$cat test.sh 
echo $$

$echo $$
2299

$source test.sh 
2299

$bash test.sh 
4037

$./test.sh 
4040</code></pre><p>如上实例，只有source的时候进程ID和bash进程ID一样，其它方式都创建了一个新的bash进程，所以ID也变了。<p>bash test.sh 产生一个新的bash，但是这个新的bash中不会加载 .bashrc 需要加载的话必须 bash -l test.sh.<h3 id=通过ssh-执行命令命令前有sudo的时候报错sudo-sorry-you-must-have-a-tty-to-run-sudo>通过ssh 执行命令（命令前有sudo）的时候报错：sudo: sorry, you must have a tty to run sudo</h3><p>这是因为 /etc/sudoers (Linux控制sudo行为、权限的配置文件）中指定了 requiretty（<a href=https://www.shell-tips.com/2014/09/08/sudo-sorry-you-must-have-a-tty-to-run-sudo/ rel=noopener target=_blank>Redhat、Fedora默认行为</a>），但是 通过ssh远程执行命令是没有tty的（不需要交互）。 解决办法可以试试 ssh -t or -tt (强制分配tty）或者先修改 /etc/sudoers把 requiretty 删掉或者改成 !requiretty<h3 id=cp-命令即使使用了--f-force参数overwrite的时候还是弹出交互信息必须手工输入yyes等>cp 命令即使使用了 -f force参数，overwrite的时候还是弹出交互信息，必须手工输入Y、yes等</h3><p>Google搜索一下别人给出的方案是这样 echo yes | cp -rf xxx yyy 算是笨办法，但是没有找到这里为什么-f 不管用。 type -a cp 先确认一下 cp到底是个什么东西：<pre><code>    #type -a cp
    cp is aliased to `cp -i'
    cp is /usr/bin/cp</code></pre><p>这下算是有点清楚了，原来默认cp 都是-i了（-i, –interactive prompt before overwrite (overrides a previous -n option)），看起来就是默认情况下为了保护我们的目录不经意间被修改了。所以真的确认要overwrite的话直接用 /usr/bin/cp -f 就不需要每次yes确认了<h3 id=重定向>重定向</h3><p>sudo docker logs swarm-agent-master >master.log 2>&1 输出重定向http://www.kissyu.org/2016/12/25/shell%E4%B8%AD%3E%20:dev:null%202%20%3E%20&1%E6%98%AF%E4%BB%80%E4%B9%88%E9%AC%BC%EF%BC%9F/<pre><code>>/dev/null 2>&1 标准输出丢弃 错误输出丢弃
2>&1 >/dev/null 标准输出丢弃 错误输出屏幕</code></pre><p>http://kodango.com/bash-one-liners-explained-part-three<h3 id=umask>umask</h3><p>创建文件的默认权限是 666 文件夹是777 但是都要跟 umask做运算（按位减法） 一般umask是002 所以创建出来文件最终是664，文件夹是775，如果umask 是027的话最终文件是 640 文件夹是750 『尽量不要以数字相加减啦！』你应该要这样想(-rw-rw- rw-) – (——–wx)=-rw-rw-r–这样就对啦！不要用十进制的数字喔！够能力的话，用二进制来算，不晓得的话，用 rwx 来算喔！<h3 id=其它>其它</h3><pre><code>echo $-   // himBH </code></pre><p>“$-” 中含有“i”代表“交互式shell” “$0”的显示结果为“-bash”，bash前面多个“-”，代表“登录shell”. 没有“i“和“-”的，是“非交互式的非登录shell”<p>set +o histexpand （！ 是history展开符号， histexpand 可以打开或者关闭这个展开符） alias 之后，想要用原来的命令：+alias （命令前加)<p>bash程序执行，当“$0”是“sh”的时候，则要求下面的代码遵循一定的规范，当不符合规范的语法存在时，则会报错，所以可以这样理解，“sh”并不是一个程序，而是一种标准（POSIX），这种标准，在一定程度上（具体区别见下面的“Things bash has that sh does not”）保证了脚本的跨系统性（跨UNIX系统）<p>Linux 分 shell变量(set)，用户变量(env)， shell变量包含用户变量，export是一种命令工具，是显式那些通过export命令把shell变量中包含的用户变量导入给用户变量的那些变量.<p>set -euxo pipefail //-u unset -e 异常退出 http://www.ruanyifeng.com/blog/2017/11/bash-set.html<h3 id=引号>引号</h3><p>shell 中：单引号的处理是比较简单的，被单引号包括的所有字符都保留原有的意思，例如’$a’不会被展开, ’<code>cmd</code>’也不会执行命令；而双引号，则相对比较松，在双引号中，以下几个字符 <span class="math inline">\(, \`, \ 依然有其特殊的含义，比如\)</span>可以用于变量展开, 反引号`可以执行命令，反斜杠。但是，在双引号包围的字符串里，反斜杠的转义也是有限的，它只能转义$, `, “, （回车）这几个字符，后面如果跟着的不是这几个字符，只不会被黑底，反斜杠会被保留 http://kodango.com/simple-bash-programming-skills-2<h3 id=su-和-su---的区别>su 和 su - 的区别</h3><p>su命令和su -命令最大的本质区别就是：前者只是切换了root身份，但Shell环境仍然是普通用户的Shell；而后者连用户和Shell环境一起切换成root身份了。只有切换了Shell环境才不会出现PATH环境变量错误。su切换成root用户以后，pwd一下，发现工作目录仍然是普通用户的工作目录；而用su -命令切换以后，工作目录变成root的工作目录了。用echo $PATH命令看一下su和su -以后的环境变量有何不同。以此类推，要从当前用户切换到其它用户也一样，应该使用su -命令。<p>比如： su admin 会重新加载 ~/.bashrc ，但是不会切换到admin 的home目录。 但是 su - admin 不会重新加载 ~/.bashrc ，但是会切换admin的home目录。<p>The su command is used to become another user during a login session. Invoked without a username, su defaults to becoming the superuser. The optional argument - may be used to provide an environment similar to what the user would expect had the user logged in directly.<h3 id=后台任务执行>后台任务执行</h3><p>将任务放到后台，断开ssh后还能运行： “ctrl-Z”将当前任务挂起（实际是发送 SIGTSTP 信号），父进程ssh退出时会给所有子进程发送 SIGHUP；<p>jobs -l 查看所有job<p>“disown -h %序号” 让该任务忽略SIGHUP信号（不会因为掉线而终止执行），序号为 Jobs -l 看到的顺序号； “bg”让该任务在后台恢复运行。<h2 id=shell-调试与参数>shell 调试与参数</h2><p>为了方便 Debug，有时在启动 Bash 的时候，可以加上启动参数。<ul><li><code>-n</code>：不运行脚本，只检查是否有语法错误。<li><code>-v</code>：输出每一行语句运行结果前，会先输出该行语句。<li><code>-x</code>：每一个命令处理完以后，先输出该命令，再进行下一个命令的处理。</ul><figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre><td class=code><pre><span class=line>$ bash -n scriptname</span><br><span class=line>$ bash -v scriptname</span><br><span class=line>$ bash -x scriptname</span><br></pre></table></figure><h2 id=shell-数值运算>shell 数值运算</h2><p>bash中数值运算要这样 $(( <span class="math inline">\(a+\)</span>b )) // declare -i 才是定义一个整型变量<ul><li>在中括号 [] 内的每个组件都需要有空白键来分隔；<li>在中括号内的变量，最好都以双引号括号起来；<li>在中括号内的常数，最好都以单或双引号括号起来。</ul><p>在bash中为变量赋值的语法是<code>foo=bar</code>，访问变量中存储的数值，其语法为 <code>$foo</code>。 需要注意的是，<code>foo = bar</code> （使用空格隔开）是不能正确工作的，因为解释器会调用程序<code>foo</code> 并将 <code>=</code> 和 <code>bar</code>作为参数。 总的来说，在shell脚本中使用空格会起到分割参数的作用，有时候可能会造成混淆，请务必多加检查。<h2 id=其它-1>其它</h2><ul><li>系统合法的 shell 均写在 /etc/shells 文件中；<li>用户默认登陆取得的 shell 记录于 /etc/passwd 的最后一个字段；<li>type 可以用来找到运行命令为何种类型，亦可用于与 which 相同的功能 [<strong>type -a</strong>]；<li>变量主要有环境变量与自定义变量，或称为全局变量与局部变量<li>使用 env 与 export 可观察环境变量，其中 export 可以将自定义变量转成环境变量；<li>set 可以观察目前 bash 环境下的所有变量；<li>stty -a<li><strong>$? 亦为变量，是前一个命令运行完毕后的回传值</strong>。在 Linux 回传值为 0 代表运行成功；<li>bash 的配置文件主要分为 login shell 与 non-login shell。login shell 主要读取 /etc/profile 与 ~/.bash_profile， non-login shell 则仅读取 ~/.bashrc</ul><p>在bash中进行比较时，尽量使用双方括号 <code>[[ ]]</code> 而不是单方括号 <code>[ ]</code>，<a href=http://mywiki.wooledge.org/BashFAQ/031 rel=noopener target=_blank>这样会降低犯错的几率</a>，尽管这样并不能兼容 <code>sh</code><h3 id=type>type</h3><p><strong>执行顺序(type -a ls 可以查看到顺序)：</strong><ol type=1><li>以相对/绝对路径运行命令，例如『 /bin/ls 』或『 ./ls 』；<li>由 alias 找到该命令来运行；<li>由 bash 内建的 (builtin) 命令来运行；<li>透过 $PATH 这个变量的顺序搜寻到的第一个命令来运行。</ol><p><a href=https://tldr.sh/ rel=noopener target=_blank>tldr 可以用来查询命令的常用语法</a>，比man简短些，偏case型<h2 id=参考文章>参考文章：</h2><p><a href=https://blog.csdn.net/u010871982/article/details/78525367 rel=noopener target=_blank>关于ansible远程执行的环境变量问题</a><p><a href=http://bbs.chinaunix.net/thread-1068678-1-1.html rel=noopener target=_blank>Bash和Sh的区别</a><p><a href=http://kodango.com/what-is-interactive-and-login-shell rel=noopener target=_blank>什么是交互式登录 Shell what-is-interactive-and-login-shell</a><p><a href=http://kodango.com/explain-shell-default-options rel=noopener target=_blank>Shell 默认选项 himBH 的解释</a><p><a href=http://kodango.com/useful-documents-about-shell rel=noopener target=_blank>useful-documents-about-shell</a><p><a href=http://coolnull.com/4432.html rel=noopener target=_blank>linux cp实现强制覆盖</a><p>https://wangdoc.com/bash/startup.html<p><a href=https://cjting.me/2020/12/10/tiny-x64-helloworld/ rel=noopener target=_blank>编写一个最小的 64 位 Hello World</a><p><a href=https://missing-semester-cn.github.io/ rel=noopener target=_blank>计算机教育中缺失的一课</a><p><a href=https://foxwho.com/article/184 rel=noopener target=_blank>MacOS设置环境变量path/paths的完全总结</a> 很详细<p>最近由于要获取几台Linux服务器的硬件配置信息，就写了一个获取硬件配置信息的脚本代码，可以获取CPU、内存、硬盘等硬件信息。<p>使用这个脚本文件，就可以一次性输出代码如下所示：<!--noindex--><div class=post-button><a class=btn href=/blog/linux-shell/#more rel=contents> 阅读全文 » </a></div><!--/noindex--></div><footer class=post-footer><div class=post-eof></div></footer></article></div><div class=post-block><article class=post-content itemscope itemtype=http://schema.org/Article><link href=https://www.longluo.me/blog/writing-and-coding/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta content=https://www.longluo.me/assets/avatar/sinc-3d-python.png itemprop=image> <meta content="Long Luo" itemprop=name> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content="Long Luo's Life Notes" itemprop=name> <meta content="A Curious Engineer" itemprop=description> </span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork> <meta content=" | Long Luo's Life Notes" itemprop=name> <meta itemprop=description> </span><header class=post-header><h2 itemprop="name headline" class=post-title><a class=post-title-link href=/blog/writing-and-coding/ itemprop=url>静夜思: 码字与编程</a></h2><div class=post-meta-container><div class=post-meta><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar"></i> </span> <span class=post-meta-item-text>发表于</span> <time itemprop="dateCreated datePublished" title="创建时间：2017-09-18 22:51:56" datetime=2017-09-18T22:51:56+08:00>2017-09-18</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar-check"></i> </span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2025-05-02 15:24:10" datetime=2025-05-02T15:24:10+08:00 itemprop=dateModified>2025-05-02</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-folder"></i> </span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing> <a href=/categories/Life/ itemprop=url rel=index><span itemprop=name>Life</span></a> </span> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-comment"></i> </span> <span class=post-meta-item-text>Waline：</span> <a href=/blog/writing-and-coding/#waline itemprop=discussionUrl title=waline> <span class="post-comments-count waline-comment-count" data-path=/blog/writing-and-coding/ itemprop=commentCount></span> </a> </span><span class=post-meta-item title=阅读次数> <span class=post-meta-item-icon> <i class="far fa-eye"></i> </span> <span class=post-meta-item-text>阅读次数：</span> <span class=waline-pageview-count data-path=/blog/writing-and-coding/></span> </span><span class=post-meta-break></span><span class=post-meta-item title=本文字数> <span class=post-meta-item-icon> <i class="far fa-file-word"></i> </span> <span class=post-meta-item-text>本文字数：</span> <span>1.5k</span> </span><span class=post-meta-item title=阅读时长> <span class=post-meta-item-icon> <i class="far fa-clock"></i> </span> <span class=post-meta-item-text>阅读时长 ≈</span> <span>1 分钟</span> </span></div></div></header><div class=post-body itemprop=articleBody><p><strong><em>By Long Luo</em></strong><h2 id=一>一、</h2><p><strong>码字和编程都是我的个人爱好</strong>。<p>相比小学学了语文之后就开始码字，我真正接触编程还是要等到上了大学之后。<p>当然作为一名程序员，编程是我<strong>至关重要的技能</strong>，毕竟，“Talk is cheap, show me the code.”。<p>码字，换个高大上的说法，也叫<strong>写作</strong>。不过对于我来说，还是叫码字比较好，毕竟和码代码都差不多，充其量不过是<strong>生活工作上的随手记录</strong>而已。巴尔扎克不无自豪地说自己是法国社会的书记员，我们只能说是自己苟活一生的书记员。<p>写作和编程，其实内在是相通的，都是一个<strong>创作的过程</strong>，都需要事先在大脑中构建一个骨架。然后根据这个骨架，在其中逐渐添加皮和肉，最后形成一个完整丰满的人体。<p>不过，相比编程需要的<strong>绝对严密的逻辑</strong>，写作在逻辑上要求就太宽松了，毕竟程序要是出bug了，造成的损失可就大了。<p>面对一个问题，程序员需要对问题进行透彻的分析，理清其涉及的所有细节，预测可能发生的所有意外与非意外的情况，列出解决方案的所有步骤，以及对解决方案进行尽量全面的测试。<p>程序员最开心的莫过于程序按照自己设想的方案运行，所有中间分支及数据均按照预定的思路运行，最后得出符合预期的正确的结果。<h2 id=二>二、</h2><p>写作并不神秘，也不高尚，不过是一种倾诉方式，好比有人找朋友聊天，或自言自语，都是抒发内心感受。而写作，不过是将这个过程纯粹化，加以提炼，倾诉成具体的文字罢了。<p>许多爱好当中，写作最容易被人误会，会特别让人觉得<strong>高大上、矫情或伪文艺</strong>。<p>其实主要还是理解写作的人知识水平不一致。比如一个人喜欢跑步，他的目标绝对不是跑进奥运会；一个人喜欢唱歌，他也八成没想唱进中国大剧院。平凡人的爱好之所以可贵，在于怡情养性，并通过特定的爱好结识朋友，形成自己稳定的交际生活圈，寻得共同话题和快乐。<p>和许多其它的爱好一样，无非是消遣、自娱，说得深沉点，叫自我救赎。它与跳广场舞、看电视剧、种花养狗在给予当事人慰藉和快乐上并无二致。<p>微博上看到一些小学生写的诗歌作文，笔划稚嫩，语言有趣。如果他不饰雕琢，写出本真，比拿腔拿调者更容易成为写作高手。<p>当今之世，手机人手一部，天下大小事情心里眼中随时过，发表感慨，写点东西已成为抒发内心感受的重要渠道。<p>比如，心里憋得慌，又找不到对等的倾诉对象，而又非说不可，觉得只有记下来才对得起生活的每一天，慢慢的就会喜欢上写作。<p>总的来说，写作能够成文，一是对语言文字的把握能力，二是对生活的感受程度。二者缺一不可。<p>回想写作的意义，对于普通人，就像跳广场舞一样，纯粹是自娱自乐，并以此为信号，向其他人发出真诚邀请。<p>时间无垠的荒野，有这么几个人，几位志同道不合的朋友，也是一乐。<!--noindex--><div class=post-button><a class=btn href=/blog/writing-and-coding/#more rel=contents> 阅读全文 » </a></div><!--/noindex--></div><footer class=post-footer><div class=post-eof></div></footer></article></div><div class=post-block><article class=post-content itemscope itemtype=http://schema.org/Article><link href=https://www.longluo.me/blog/donot-show-your-weakness/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta content=https://www.longluo.me/assets/avatar/sinc-3d-python.png itemprop=image> <meta content="Long Luo" itemprop=name> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content="Long Luo's Life Notes" itemprop=name> <meta content="A Curious Engineer" itemprop=description> </span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork> <meta content=" | Long Luo's Life Notes" itemprop=name> <meta itemprop=description> </span><header class=post-header><h2 itemprop="name headline" class=post-title><a class=post-title-link href=/blog/donot-show-your-weakness/ itemprop=url>不把脆弱给别人看</a></h2><div class=post-meta-container><div class=post-meta><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar"></i> </span> <span class=post-meta-item-text>发表于</span> <time itemprop="dateCreated datePublished" title="创建时间：2017-09-16 21:46:31" datetime=2017-09-16T21:46:31+08:00>2017-09-16</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar-check"></i> </span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2025-05-02 12:11:55" datetime=2025-05-02T12:11:55+08:00 itemprop=dateModified>2025-05-02</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-folder"></i> </span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing> <a href=/categories/Life/ itemprop=url rel=index><span itemprop=name>Life</span></a> </span> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-comment"></i> </span> <span class=post-meta-item-text>Waline：</span> <a href=/blog/donot-show-your-weakness/#waline itemprop=discussionUrl title=waline> <span class="post-comments-count waline-comment-count" data-path=/blog/donot-show-your-weakness/ itemprop=commentCount></span> </a> </span><span class=post-meta-item title=阅读次数> <span class=post-meta-item-icon> <i class="far fa-eye"></i> </span> <span class=post-meta-item-text>阅读次数：</span> <span class=waline-pageview-count data-path=/blog/donot-show-your-weakness/></span> </span><span class=post-meta-break></span><span class=post-meta-item title=本文字数> <span class=post-meta-item-icon> <i class="far fa-file-word"></i> </span> <span class=post-meta-item-text>本文字数：</span> <span>1.6k</span> </span><span class=post-meta-item title=阅读时长> <span class=post-meta-item-icon> <i class="far fa-clock"></i> </span> <span class=post-meta-item-text>阅读时长 ≈</span> <span>1 分钟</span> </span></div></div></header><div class=post-body itemprop=articleBody><p><strong><em>By Long Luo</em></strong><h2 id=一>一、</h2><p>好多年以前，经历了一次不大不小的挫折。说不大，因为相对来说，失去的东西并不算很多；说不小，是因为这次经历极大程度地改变了我的人生态度，影响了我今后的生活。<p>由于种种原因，在这里不方便细说，反正很突然家里出了点意外，然后我又无能为力。常言道，祸不单行。工作，感情，生活等方面烦恼接踵而至，整个工作生活搞的一团糟，反正最后失去了工作，还有其他一些东西。 有那么一段时间，整个人颓废之极，每天负能量缠身，用现在流行的一个词就是：丧。<p>成为无业游民之后，一下子失去了经济来源，这个当然是不能告诉家人的，毕竟家里事情还挺多，只能报喜不报忧。<p>这个时候，住的地方开了一家大排档，这下好了，夜夜笙歌，油烟直往上冲。于是呢，加上心情不好，造成晚上整夜整夜睡不着，白天倒是可以睡几个小时，但整天无精打采，一想东西，脑子就头痛。<p>这样昼夜颠倒的生活持续了半个月之后，某天傍晚，和往常一样，走着走着，我知道我再这样下去就要废了。<p>于是，制定了改变计划：<p>第一，换个好点安静的地方住。于是搬到了有个大阳台的房子，阳光很充足，很安静。每天都能看到暖暖的阳光，心情一下子变的好了起来。<p>第二，每天坚持运动。每周坚持去游泳3次，游够6km。在游泳池那种孤独的环境里，可以一边慢慢的游，一边静静的想一些事情。因为运动导致精疲力尽，晚上睡觉时很容易睡着。通过前面2项努力，把昼夜颠倒的作息习惯纠正了过来。直到现在，游泳都是我最喜欢同时也是坚持了最长时间的运动。<p>第三，努力找工作。每天看各种试题，认真准备面试，每天都有面试，花了不到2周找到了一份还可以的工作，经济危机解除。于此同时，坚持无论多晚，都写日记，哪怕只写几句话。<p>不管在任何时候，永远别卖惨，因为永远有比你更惨的人。而且绝对，绝对不会有人帮你，一切问题一定要自己解决，你才配说你是个活着的人。 社交平台上，给别人带来负能量的人，除了成为别人的笑柄，或者留下一个很差的印象，对这个世界是没有正面意义的。<p><strong>人在失意时也不可以失态，不把脆弱展示给别人</strong>。<!--noindex--><div class=post-button><a class=btn href=/blog/donot-show-your-weakness/#more rel=contents> 阅读全文 » </a></div><!--/noindex--></div><footer class=post-footer><div class=post-eof></div></footer></article></div><div class=post-block><article class=post-content itemscope itemtype=http://schema.org/Article><link href=https://www.longluo.me/blog/collections-of-weibo-wenda-wealth/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta content=https://www.longluo.me/assets/avatar/sinc-3d-python.png itemprop=image> <meta content="Long Luo" itemprop=name> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content="Long Luo's Life Notes" itemprop=name> <meta content="A Curious Engineer" itemprop=description> </span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork> <meta content=" | Long Luo's Life Notes" itemprop=name> <meta itemprop=description> </span><header class=post-header><h2 itemprop="name headline" class=post-title><a class=post-title-link href=/blog/collections-of-weibo-wenda-wealth/ itemprop=url>微博问答精选: 财富篇</a></h2><div class=post-meta-container><div class=post-meta><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar"></i> </span> <span class=post-meta-item-text>发表于</span> <time itemprop="dateCreated datePublished" title="创建时间：2017-06-01 23:31:36" datetime=2017-06-01T23:31:36+08:00>2017-06-01</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar-check"></i> </span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2024-10-13 21:56:26" datetime=2024-10-13T21:56:26+08:00 itemprop=dateModified>2024-10-13</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-folder"></i> </span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing> <a href=/categories/Life/ itemprop=url rel=index><span itemprop=name>Life</span></a> </span> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-comment"></i> </span> <span class=post-meta-item-text>Waline：</span> <a href=/blog/collections-of-weibo-wenda-wealth/#waline itemprop=discussionUrl title=waline> <span class="post-comments-count waline-comment-count" data-path=/blog/collections-of-weibo-wenda-wealth/ itemprop=commentCount></span> </a> </span><span class=post-meta-item title=阅读次数> <span class=post-meta-item-icon> <i class="far fa-eye"></i> </span> <span class=post-meta-item-text>阅读次数：</span> <span class=waline-pageview-count data-path=/blog/collections-of-weibo-wenda-wealth/></span> </span><span class=post-meta-break></span><span class=post-meta-item title=本文字数> <span class=post-meta-item-icon> <i class="far fa-file-word"></i> </span> <span class=post-meta-item-text>本文字数：</span> <span>5.3k</span> </span><span class=post-meta-item title=阅读时长> <span class=post-meta-item-icon> <i class="far fa-clock"></i> </span> <span class=post-meta-item-text>阅读时长 ≈</span> <span>5 分钟</span> </span></div></div></header><div class=post-body itemprop=articleBody><ol type=1><li>日日 你赚了那么多钱是怎么理财的？能说说你的投资理财方式和各自比例么？你说过没有500万现金不生孩子，你觉得还有多久能实现？</ol><p><a href=http://weibo.com/ttwenda/p/show?id=2310684073731357041517 rel=noopener target=_blank>日日 你赚了那么多钱是怎么理财的？能说说你的投资理财方式和各自比例么？你说过没有500万现金不生孩子，你觉得还有多久能实现？</a><p>fhjj200312，你好​ 感谢提问​。<p>说实话，这个问题本来是不准备回答的​ 因为我感觉我没什么可分享的​，毕竟我自己做得不怎么样 但后来一想，​可以把我做得比较差的地方说出来，供大家参考呀 那就正好可以说一下​。<h2 id=一我没赚到什么钱>一、我没赚到什么钱​</h2><p>我从毕业到工作的时间不长，年薪百万之后很快就离职了，因为发自内心不喜欢工作​。<p>赚的钱也没攒下来，都花了，因为一方面觉得小钱并没有什么好的投资渠道，还不如花掉对抗通胀，另一方面觉得自己还是趁年轻的时候四处出去转转吧，总好过将来身体不行了很多地方去不了，而且照片里也全是自己中年谢顶​的样子，想想蛮悲伤的。<p>现在付费阅读、分答、小讲、问答，虽然说看起来好像收入渠道不少，但其实扣分成、缴税之后，一个月到手和之前工作时没差太多，一年仍然是百万的样子，并没有实现向 8 位数的质变。<p>可能会有人觉得这话有点装，但事实上真的是这样的：当你月收入是 10W 时，每个月再多赚 1W，没有什么实质性的变化。 从  1000 到 1W，这是质变，从 10W 到 11W，这没变化。<p>这也是我觉得所谓「理财」里最重要的第一点：心态。<p>要永远保持对物质收益的饥渴，才更好形成正向反馈去提升自我。但同时不要被物质欲望吞没，变成了金钱的奴隶。<p>找到中间合适的「度」，我觉得最好的办法就是：别把钱当钱，哪怕你现在还没钱。<p>懂的人懂，心穷是永远不会有钱的，因为钱根本不值钱，你自己才值钱。<p>看重自己，看轻钱，你就会有机会变得越来越值钱。<h2 id=二关于理财>二、关于理财</h2><p>我觉得主要是 4 个方面吧：<h3 id=不要赌不要指望暴富>1、不要赌，不要指望暴富。</h3><p>这个道理我最早是在 A 股里体会到的，当时我用几万本金赚了几万，但并没有什么快乐的感觉，整天还是提心吊胆。后来利润全赔了，本金也赔了几万，却异常痛苦。<p>然后我就想起自己上学时学过的 丹尼尔.卡尼曼 的「损失厌恶」理论：人们对于一定金额的损失带来的痛苦，要远大于同等金额的收益带来的快乐。而股市说白了就是赌，这个过程是「零和博弈」，即便你是大概率赢，你最后收获的快乐都要少于痛苦。<p>更何况，散户在 A 股里，怎么可能是大概率赢呢？估计赢面还没赌场大吧。<p>后来我去澳门赌了一次，就彻底看明白赌博是什么了：<p>当时我在澳门威尼斯人，换了 1000 块的筹码，玩理论上赌徒的赢面最大的游戏，21 点，大概有 49%以上的概率可以赢钱，不过整体上肯定还是赔钱。<p>玩了大概 15 分钟吧，我就从 1000 赢到了将近 10000，当我低头看到自己有这么多筹码时，真心很慌。这来钱太快了，就跟你吸过毒之后，绝对连爱都不想做了。<p>但输起来也快，很快就只剩下 4000 了，我就离场了。带着这 4000，在接下来的 3 天里，每天 1000 都输完了。<p>所以赌博是什么？是「娱乐」，是「提醒自己人性有多脆弱」。 ​ 我在《为什么我那么喜欢骂人？》里说过，正因为知道自己在诱惑面前有多脆弱，才要建立起强大的防御措施，让自己尽量远离诱惑。 .<h3 id=把精力放在大方向的判断上>2、把精力放在大方向的判断上</h3><p>这个就不展开说了，因为逻辑是不变的，但时机是可遇不可求的。 具体可以看一下我之前写的关于买房的文章，《我为什么要买房？》 在小事上，很多人喜欢斤斤计较，甚至乐在其中。比如买个泡面，还要来回比价格。 唉，都已经要吃泡面了，还把时间浪费在这种屁事上…… 把这些心思都省下来，好好学点经济学知识，最起码「供需关系」理顺了，现实生活中到处都是钱。<!--noindex--><div class=post-button><a class=btn href=/blog/collections-of-weibo-wenda-wealth/#more rel=contents> 阅读全文 » </a></div><!--/noindex--></div><footer class=post-footer><div class=post-eof></div></footer></article></div><div class=post-block><article class=post-content itemscope itemtype=http://schema.org/Article><link href=https://www.longluo.me/blog/collections-of-weibo-wenda-stock/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta content=https://www.longluo.me/assets/avatar/sinc-3d-python.png itemprop=image> <meta content="Long Luo" itemprop=name> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content="Long Luo's Life Notes" itemprop=name> <meta content="A Curious Engineer" itemprop=description> </span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork> <meta content=" | Long Luo's Life Notes" itemprop=name> <meta itemprop=description> </span><header class=post-header><h2 itemprop="name headline" class=post-title><a class=post-title-link href=/blog/collections-of-weibo-wenda-stock/ itemprop=url>微博问答精选: 股海浮沉篇</a></h2><div class=post-meta-container><div class=post-meta><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar"></i> </span> <span class=post-meta-item-text>发表于</span> <time itemprop="dateCreated datePublished" title="创建时间：2017-05-30 22:11:54" datetime=2017-05-30T22:11:54+08:00>2017-05-30</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar-check"></i> </span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2025-05-02 16:46:45" datetime=2025-05-02T16:46:45+08:00 itemprop=dateModified>2025-05-02</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-folder"></i> </span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing> <a href=/categories/Life/ itemprop=url rel=index><span itemprop=name>Life</span></a> </span> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-comment"></i> </span> <span class=post-meta-item-text>Waline：</span> <a href=/blog/collections-of-weibo-wenda-stock/#waline itemprop=discussionUrl title=waline> <span class="post-comments-count waline-comment-count" data-path=/blog/collections-of-weibo-wenda-stock/ itemprop=commentCount></span> </a> </span><span class=post-meta-item title=阅读次数> <span class=post-meta-item-icon> <i class="far fa-eye"></i> </span> <span class=post-meta-item-text>阅读次数：</span> <span class=waline-pageview-count data-path=/blog/collections-of-weibo-wenda-stock/></span> </span><span class=post-meta-break></span><span class=post-meta-item title=本文字数> <span class=post-meta-item-icon> <i class="far fa-file-word"></i> </span> <span class=post-meta-item-text>本文字数：</span> <span>12k</span> </span><span class=post-meta-item title=阅读时长> <span class=post-meta-item-icon> <i class="far fa-clock"></i> </span> <span class=post-meta-item-text>阅读时长 ≈</span> <span>11 分钟</span> </span></div></div></header><div class=post-body itemprop=articleBody><h2 id=您是土木工程专业到现在成为股市战神您是怎么做到的>1. 您是土木工程专业到现在成为股市战神，您是怎么做到的？</h2><hr><p><a href=http://weibo.com/ttwenda/p/show?id=2310684062514781500435 rel=noopener target=_blank>您是土木工程专业（印象中）到现在成为股市战神，您是怎么做到的？其中有那些关键的选择与努力呢？</a><p>首先兄弟我要纠正你的一个错觉：我就不是个战神，那是我一高兴了就自己吹吹的！但我也想成个战神，谁不想呢？<p>我首先是土建的给排水工程及供热通风毕业的，跑深圳创找不到工作才稀里糊涂被人拉着到股民学校当跑腿的，这才是我进入证券行业的第一步。当时谁敢把证券行业不要脸的自称为金融业，那是会给笑喷了的。那么从这儿确定了一个概念，我是半路出家，证券行业当时是个二赖子不靠谱行业，现在偶尔还有人说：炒股的。<p>我是怎么做到的？做到什么呢？有钱？牛逼？还是你们看到的那些我的小把戏？在这里我可能会再次修正一下：你想说的是不是说我怎么做到今天微博上你所见到的假模假样的这一切，这都是怎么发生的呢？锤炼！是锤炼把我打造成这个样子的！你没见过我本人，我脸上表情就是坚韧不拔，冷静。这都是不冷静和失败所慢慢造就出来的，也就是说我是在行业里吃亏吃大的而不是牛逼牛大的，我的成长过程就是失败和失败的痛苦交织而来的过程。<p>好吧，能走到今天，我已经一把年龄了，迎战过三代投资者，熬过了所有曾经的岁月，我是有一点资格回答你的问题：关键的选择与努力。<p>我们先谈选择吧，刚开始入行我谈不上选择，给底薪不用出去跑业务，没人天天盯着你的业绩，我就这么没出息，我并不是怀着远大抱负清楚的规划自己人生的那类人。那么接下来的选择也不是我做的，我嘴皮子挺会说，又腿儿跑的飞快，所以才入了行当，简单说这也不是我选择的，我企图心没那么高杆。那么接下来的所谓选择是因为战场上的惨烈场面，同事间的冷酷竞争和倾轧，唤醒了我的本能。后来我手刃了我那群南方同事，把他们开肠破肚，让业界声名远扬我的残忍和冷酷。那是我早年的事情，我选择的是保护我自己，用我的冷酷去震慑所有的来犯之敌。打工仔之间为了一根骨头抢的狗毛乱飞，这就是我的早期生活。在这时候我个人是没什么道德观以至于映射在投资上的投资价值观而言的。<p>接下来我才有了学习和提高的过程，我系统的回到我在大学期间就酷爱的哲学和心理学范畴苦心阅读，一个是为了分散我工作的压力，一个也是为了找到自己投资的灵魂，在今天看来我是如此的睿智！我这把年纪吃的就是当初的这步努力，写到这儿我站起来向二十年前的我致敬！<p>你从这儿开始记住这一块，这才是我懂得抉择的最有意义的开端而不是我去怎么抉择，而是明白了抉择的标准。<p>至于说努力，努力是需要强大的内心动力去自我鼓舞的，又回到前者，你需要梳理并建立非常正面的内心世界的架构，你才会非常正面的看待世界，你才会有持续的源动力去支撑你不懈的向前努力的，你看这是一脉相承的。<p>你可能最想问一下我怎么支撑自己做到的，而不是想问我究竟做了什么。我没做什么，我读的书外面大把随便卖。我做的努力落实在细节或者范畴上但凡我一个同业他也天天做，类别上没区别。但谈到运用工具类学科或者叫运用工程学相关背景去做交易做投资，谈到对很多东西的理解，谈到格局和高度，区别就在这里！而这些来自于我二十年的对社会科学范畴的学习和理解，这才是唯一的致胜秘要。<p>我相信你的问题基本上回答完毕了。<h2 id=请您评价一下徐翔>2. 请您评价一下徐翔</h2><hr><p><a href=http://weibo.com/ttwenda/p/show?id=2310684062088870928455 rel=noopener target=_blank>光荣哥您好，这个市场中我只佩服您和徐翔。之前印象中徐翔是神一般的存在，因此如果方便，请您评价一下徐翔，如不方便，请忽略我的问题。</a><p>我认为徐翔具有高超的交易技术，这种交易技术是实现很多资源成功落地套现的重要手段！如果在二级市场上讲推出渠道的话，必须这种人才的协作才可以完成。很多时候这种人才并不是从很专业的投资机构成长起来的，而是在极其险恶的毫无专业后备支持的市场自生自灭中生存并成长起来的。这种人才不具备分享高层面的社会精神财富的能力，不具备专业协作的经验和素质养成，最后以赚到钱为唯一衡量标准和目的。这也就造成了徐翔从刚开始成长时就没有这个素质养成的过程，也就缺乏对险恶的理解和规避能力。首先我这里对徐翔有第一个评价。<p>当徐翔成长起来后，就受到金融机构的关注，就会和行业里的很多人有协作的关系，这时候他开始被这群人启迪和熏陶，就此走上了一条非常险恶的道路。请关注我这几句话的意思。<p>很多时候都是金融业的专业人教坏了我们，他们会灌输玩的大要什么一二级打通要和上市公司联手，要这样那样。实际上某些上市公司和炒家凑到一起很多时候是被他们弄成的，其最本质的背后原因是业务，业务的需求。某些上市公司的业务是多触角的，它也需要金融机构的大力帮助，而金融机构里的某些人却很歪很歪的把事情弄成了嘴里说的很高大上但实际上仔细一回味是违规违法的，很多时候就是这样开始了不归路。<p>徐翔本人缺乏对金融业的深刻理解，他不明白这种利益背后是政治角逐，但凡是金融业的生意都不可能和政治完全脱离开干系。他更不太可能明白这种东西背后的诡异性，而且他周围没有什么人给他出好的主意，让他警醒。我相信怂恿和展望的人居多，唯独利益得失是多么残酷的提醒居寡。<p>大概的情况我就评价成这样！在合法合规前提下我也想给你说的更透彻一些，不过基本上我也只能合规说成这样了，希望你能借此明白你自己的成长道路要怎样走。<!--noindex--><div class=post-button><a class=btn href=/blog/collections-of-weibo-wenda-stock/#more rel=contents> 阅读全文 » </a></div><!--/noindex--></div><footer class=post-footer><div class=post-eof></div></footer></article></div><nav class=pagination><a class="extend prev" aria-label=上一页 href=/page/46/ rel=prev title=上一页><i class="fa fa-angle-left"></i></a><a class=page-number href=/>1</a><span class=space>…</span><a class=page-number href=/page/46/>46</a><span class="page-number current">47</span><a class=page-number href=/page/48/>48</a><span class=space>…</span><a class=page-number href=/page/71/>71</a><a class="extend next" aria-label=下一页 href=/page/48/ rel=next title=下一页><i class="fa fa-angle-right"></i></a></nav></div></main><footer class=footer><div class=footer-inner><div class=copyright>© 2013 – <span itemprop=copyrightYear>2025</span><span class=with-love> <i class="fa fa-heart"></i> </span><span class=author itemprop=copyrightHolder>Long Luo</span></div><div class=wordcount><span class=post-meta-item> <span class=post-meta-item-icon> <i class="fa fa-chart-line"></i> </span> <span title=站点总字数>1.7m</span> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="fa fa-coffee"></i> </span> <span title=站点阅读时长>25:10</span> </span></div><div class=busuanzi-count><span class=post-meta-item id=busuanzi_container_site_uv> <span class=post-meta-item-icon> <i class="fa fa-user"></i> </span> <span class=site-uv title=总访客量> <span id=busuanzi_value_site_uv></span> </span> </span><span class=post-meta-item id=busuanzi_container_site_pv> <span class=post-meta-item-icon> <i class="fa fa-eye"></i> </span> <span class=site-pv title=总访问量> <span id=busuanzi_value_site_pv></span> </span> </span></div><div class=powered-by>由 <a href=https://hexo.io/ rel=noopener target=_blank>Hexo</a> & <a href=https://theme-next.js.org/pisces/ rel=noopener target=_blank>NexT.Pisces</a> 强力驱动</div></div></footer><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div><div class=sidebar-dimmer></div><div aria-label=返回顶部 class=back-to-top role=button><i class="fa fa-arrow-up fa-lg"></i><span>0%</span></div><div class=reading-progress-bar></div><a class="book-mark-link book-mark-link-fixed" role=button></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><script class=next-config data-name=waline type=application/json>{"lang":"zh-CN","enable":true,"serverURL":"https://waline.longluo.me/","cssUrl":"https://unpkg.com/@waline/client@v3/dist/waline.css","commentCount":true,"pageview":true,"libUrl":"https://unpkg.com/@waline/client@v3/dist/waline.umd.js","locale":{"placeholder":"欢迎大家的留言！(留言只需要填昵称即可，但填了email的话就可以收到博主的回复通知了！) Welcome to comment!"},"emoji":["https://unpkg.com/@waline/emojis@1.1.0/qq"],"meta":["nick","mail","link"],"requiredMeta":[["nick"]],"wordLimit":0,"pageSize":10,"reaction":"true,","el":"#waline","comment":true,"path":"/page/47/"}</script><link href=https://unpkg.com/@waline/client@v3/dist/waline.css rel=stylesheet><script>document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});</script>