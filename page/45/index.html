<!doctypehtml><html lang=zh-CN><meta charset=UTF-8><meta content=width=device-width name=viewport><meta content=#222 name=theme-color><meta content="Hexo 7.1.1" name=generator><link href=https://fonts.googleapis.com rel=preconnect><link href=https://cdnjs.cloudflare.com rel=preconnect><link href=https://www.longluo.me/assets/logo/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=https://www.longluo.me/assets/logo/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=https://www.longluo.me/assets/logo/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link color=#222 href=/images/logo.svg rel=mask-icon><meta content=n6mekvZa-QaR3EnDD-CzJymq7mGubpU7rvoGpKROHLE name=google-site-verification><meta content=6BFBD4DDDB3B6F4FDD26CF82BADDB931 name=msvalidate.01><meta content=a2ab49d952ea45f5 name=yandex-verification><meta content=www.longluo.me name=baidu-site-verification><link href=/css/main.css rel=stylesheet><link as=style href=https://fonts.googleapis.com/css2?family=Noto+Serif+SC:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Roboto+Mono:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap&subset=latin,latin-ext onload=this.rel='stylesheet' rel=preload><link crossorigin=anonymous href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css integrity=sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E= rel=stylesheet><link crossorigin=anonymous href=https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css integrity=sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE= rel=stylesheet><script class=next-config data-name=main type=application/json>{"hostname":"www.longluo.me","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.21.1","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"default"},"fold":{"enable":false,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":5,"unescape":false,"preload":false,"trigger":"auto"}}</script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/config.min.js></script><meta content="A Curious Engineer" name=description><meta content=website property=og:type><meta content="Long Luo's Life Notes" property=og:title><meta content=https://www.longluo.me/page/45/index.html property=og:url><meta content="Long Luo's Life Notes" property=og:site_name><meta content="A Curious Engineer" property=og:description><meta content=zh_CN property=og:locale><meta content="Long Luo" property=article:author><meta content="longluo, Tech, Tech Blog, 技术博客, Personal Blog, 个人博客, Blogger, 博客, Math, 数学, Physics, 物理, Software Engineer, 软件工程师, Program, 编程, 程序员, 码农, Java, C, C++, Data Structures, 数据结构, Algorithm, 算法, Life, 生活," property=article:tag><meta content=summary name=twitter:card><link href=https://www.longluo.me/page/45/ rel=canonical><script class=next-config data-name=page type=application/json>{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/45/index.html","title":""}</script><script class=next-config data-name=calendar type=application/json>""</script><title>Long Luo's Life Notes</title><script async src=https://www.googletagmanager.com/gtag/js?id=UA-46213499-2></script><script class=next-config data-name=google_analytics type=application/json>{"tracking_id":"UA-46213499-2","only_pageview":false,"measure_protocol_api_secret":null}</script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/third-party/analytics/google-analytics.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/third-party/analytics/baidu-analytics.min.js></script><script async src=https://hm.baidu.com/hm.js?a75fb5d0c0ef1e36c34b7f52bb7c48be></script><script async src=https://assets.growingio.com/2.1/gio.js></script><script class=next-config data-name=growingio_analytics type=application/json>"bc65befc551b6d70"</script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/third-party/analytics/growingio.min.js></script><script>(function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "gz2vdkhgvh");</script><script async data-host-url=longluo.me data-website-id=2a6d2bf9-2adf-474b-a292-84ca30206507 defer src=https://analytics.us.umami.is/script.js></script><script data-domain=longluo.me defer src=https://plausible.io/js/script.js></script><link href=https://waline.longluo.me/ rel=dns-prefetch><noscript><link href=/css/noscript.css rel=stylesheet></noscript><style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style><link title="Long Luo's Life Notes" href=/atom.xml rel=alternate type=application/atom+xml><body class=use-motion itemscope itemtype=http://schema.org/WebPage><div class=headband></div><main class=main><div class=column><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=site-brand-container><div class=site-nav-toggle><div aria-label=切换导航栏 class=toggle role=button><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div></div><div class=site-meta><a class=brand href=/ rel=start> <i class=logo-line></i> <h1 class=site-title>Long Luo's Life Notes</h1> <i class=logo-line></i> </a><p class=site-subtitle itemprop=description>每一天都是奇迹</div><div class=site-nav-right><div class="toggle popup-trigger" aria-label=搜索 role=button><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ rel=section><i class="fa fa-home fa-fw"></i>首页</a><li class="menu-item menu-item-works"><a href=/works rel=section><i class="fa fa-code fa-fw"></i>works</a><li class="menu-item menu-item-about"><a href=/about/ rel=section><i class="fa fa-user fa-fw"></i>关于</a><li class="menu-item menu-item-tags"><a href=/tags/ rel=section><i class="fa fa-tags fa-fw"></i>标签</a><li class="menu-item menu-item-categories"><a href=/categories/ rel=section><i class="fa fa-th fa-fw"></i>分类</a><li class="menu-item menu-item-archives"><a href=/archives/ rel=section><i class="fa fa-archive fa-fw"></i>归档</a><li class="menu-item menu-item-search"><a class=popup-trigger role=button><i class="fa fa-search fa-fw"></i>搜索 </a></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon> <i class="fa fa-search"></i> </span><div class=search-input-container><input autocapitalize=off autocomplete=off class=search-input maxlength=80 placeholder=搜索... spellcheck=false type=search></div><span class=popup-btn-close role=button> <i class="fa fa-times-circle"></i> </span></div><div class=search-result-container><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class=sidebar><div class="sidebar-inner sidebar-overview-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录<li class=sidebar-nav-overview>站点概览</ul><div class=sidebar-panel-container><!--noindex--><div class="post-toc-wrap sidebar-panel"></div><!--/noindex--><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop=author itemscope itemtype=http://schema.org/Person><img alt="Long Luo" class=site-author-image itemprop=image src=https://www.longluo.me/assets/avatar/sinc_3d_python.png><p class=site-author-name itemprop=name>Long Luo<div class=site-description itemprop=description>A Curious Engineer</div></div><div class="site-state-wrap animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/> <span class=site-state-item-count>347</span> <span class=site-state-item-name>日志</span> </a></div><div class="site-state-item site-state-categories"><a href=/categories/> <span class=site-state-item-count>25</span> <span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/> <span class=site-state-item-count>341</span> <span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-author animated"><span class=links-of-author-item> <a rel="noopener me" title="GitHub → https://github.com/longluo" href=https://github.com/longluo target=_blank><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class=links-of-author-item> <a rel="noopener me" title="ZhiHu → http://www.zhihu.com/people/longluo" href=http://www.zhihu.com/people/longluo target=_blank><i class="fab fa-quora fa-fw"></i>ZhiHu</a> </span><span class=links-of-author-item> <a rel="noopener me" title="LinkedIn → https://www.linkedin.com/in/longluo/" href=https://www.linkedin.com/in/longluo/ target=_blank><i class="fa fa-linkedin fa-fw"></i>LinkedIn</a> </span><span class=links-of-author-item> <a rel="noopener me" title="E-Mail → mailto:luolong0226@163.com" href=mailto:luolong0226@163.com target=_blank><i class="fa fa-envelope fa-fw"></i>E-Mail</a> </span></div><div class="cc-license animated" itemprop=license><a class=cc-opacity href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh rel=noopener target=_blank><img alt="Creative Commons" src=https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg></a></div></div></div></div><div class="sidebar-inner sidebar-blogroll"><div class="links-of-blogroll animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i> 链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=http://blog.csdn.net/tcpipstack rel=noopener target=_blank title=http://blog.csdn.net/tcpipstack>My CSDN</a><li class=links-of-blogroll-item><a href=https://www.ruanyifeng.com/home.html rel=noopener target=_blank title=https://www.ruanyifeng.com/home.html>阮一峰老师</a><li class=links-of-blogroll-item><a href=https://hutusi.com/ rel=noopener target=_blank title=https://hutusi.com/>胡涂说</a><li class=links-of-blogroll-item><a href=https://www.qtmuniao.com/ rel=noopener target=_blank title=https://www.qtmuniao.com/>木鸟杂记</a><li class=links-of-blogroll-item><a href=https://yufan.me/ rel=noopener target=_blank title=https://yufan.me/>雨帆</a></ul></div></div></aside></div><div class="main-inner index posts-expand"><div class=post-block><article class=post-content itemscope itemtype=http://schema.org/Article><link href=https://www.longluo.me/blog/2018/02/14/the-splendid-riverview/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta content=https://www.longluo.me/assets/avatar/sinc_3d_python.png itemprop=image> <meta content="Long Luo" itemprop=name> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content="Long Luo's Life Notes" itemprop=name> <meta content="A Curious Engineer" itemprop=description> </span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork> <meta content="undefined | Long Luo's Life Notes" itemprop=name> <meta itemprop=description> </span><header class=post-header><h2 itemprop="name headline" class=post-title><a class=post-title-link href=/blog/2018/02/14/the-splendid-riverview/ itemprop=url>钱塘江江景随想</a></h2><div class=post-meta-container><div class=post-meta><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar"></i> </span> <span class=post-meta-item-text>发表于</span> <time itemprop="dateCreated datePublished" title="创建时间：2018-02-14 23:56:18" datetime=2018-02-14T23:56:18+08:00>2018-02-14</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar-check"></i> </span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2023-11-14 22:24:40" datetime=2023-11-14T22:24:40+08:00 itemprop=dateModified>2023-11-14</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-folder"></i> </span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing> <a href=/categories/Travel/ itemprop=url rel=index><span itemprop=name>Travel</span></a> </span> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-comment"></i> </span> <span class=post-meta-item-text>Waline：</span> <a href=/blog/2018/02/14/the-splendid-riverview/#waline itemprop=discussionUrl title=waline> <span class="post-comments-count waline-comment-count" data-path=/blog/2018/02/14/the-splendid-riverview/ itemprop=commentCount></span> </a> </span><span class=post-meta-item title=阅读次数> <span class=post-meta-item-icon> <i class="far fa-eye"></i> </span> <span class=post-meta-item-text>阅读次数：</span> <span class=waline-pageview-count data-path=/blog/2018/02/14/the-splendid-riverview/></span> </span><span class=post-meta-break></span><span class=post-meta-item title=本文字数> <span class=post-meta-item-icon> <i class="far fa-file-word"></i> </span> <span class=post-meta-item-text>本文字数：</span> <span>320</span> </span><span class=post-meta-item title=阅读时长> <span class=post-meta-item-icon> <i class="far fa-clock"></i> </span> <span class=post-meta-item-text>阅读时长 ≈</span> <span>1 分钟</span> </span></div></div></header><div class=post-body itemprop=articleBody><p><strong><em>By Long Luo</em></strong><p>春节前在杭州的最后一个夜晚来市中心看钱塘江夜景。<p>城市因为有了水，才有了生机，河流和湖泊，总是城市里最美的一道风景！<p>城在水中映，但要成为美不胜收的风景，却并不容易。首先江面不能太窄，要不就成了河景、溪景，也不能太宽，太宽就失之亲切。<p>看过了这么多城市的江景，唯有黄浦江夜景是不能不看的。<p>一面是外滩，见证了上海滩沧桑历史，一面是陆家嘴，未来宏图画卷等待书写；一面是古典，一面是现代，交相辉映，相得益彰，尽显江岸美景。<p>相比之下，钱塘江的夜景缺乏像小蛮腰一样独具特色的地标。不过，钱塘江还有很多没有开发，相信很快就能看到。<p>杭州，明年见！<p><strong><em>By Long Luo at 2018.02.14 in Bingjiang, Hangzhou, China.</em></strong></div><footer class=post-footer><div class=post-eof></div></footer></article></div><div class=post-block><article class=post-content itemscope itemtype=http://schema.org/Article><link href=https://www.longluo.me/blog/2017/12/27/top-9-questions-about-java-maps/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta content=https://www.longluo.me/assets/avatar/sinc_3d_python.png itemprop=image> <meta content="Long Luo" itemprop=name> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content="Long Luo's Life Notes" itemprop=name> <meta content="A Curious Engineer" itemprop=description> </span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork> <meta content="undefined | Long Luo's Life Notes" itemprop=name> <meta itemprop=description> </span><header class=post-header><h2 itemprop="name headline" class=post-title><a class=post-title-link href=/blog/2017/12/27/top-9-questions-about-java-maps/ itemprop=url>Top 9 Questions About Java Maps</a></h2><div class=post-meta-container><div class=post-meta><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar"></i> </span> <span class=post-meta-item-text>发表于</span> <time itemprop="dateCreated datePublished" title="创建时间：2017-12-27 11:18:22" datetime=2017-12-27T11:18:22+08:00>2017-12-27</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar-check"></i> </span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2024-12-13 21:40:01" datetime=2024-12-13T21:40:01+08:00 itemprop=dateModified>2024-12-13</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-folder"></i> </span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing> <a href=/categories/Java/ itemprop=url rel=index><span itemprop=name>Java</span></a> </span> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-comment"></i> </span> <span class=post-meta-item-text>Waline：</span> <a href=/blog/2017/12/27/top-9-questions-about-java-maps/#waline itemprop=discussionUrl title=waline> <span class="post-comments-count waline-comment-count" data-path=/blog/2017/12/27/top-9-questions-about-java-maps/ itemprop=commentCount></span> </a> </span><span class=post-meta-item title=阅读次数> <span class=post-meta-item-icon> <i class="far fa-eye"></i> </span> <span class=post-meta-item-text>阅读次数：</span> <span class=waline-pageview-count data-path=/blog/2017/12/27/top-9-questions-about-java-maps/></span> </span><span class=post-meta-break></span><span class=post-meta-item title=本文字数> <span class=post-meta-item-icon> <i class="far fa-file-word"></i> </span> <span class=post-meta-item-text>本文字数：</span> <span>6.3k</span> </span><span class=post-meta-item title=阅读时长> <span class=post-meta-item-icon> <i class="far fa-clock"></i> </span> <span class=post-meta-item-text>阅读时长 ≈</span> <span>6 分钟</span> </span></div></div></header><div class=post-body itemprop=articleBody><p>In general, Map is a data structure consisting of a set of key-value pairs, and each key can only appears once in the map. This post summarizes Top 9 FAQ of how to use Java Map and its implemented classes. For sake of simplicity, I will use generics in examples. Therefore, I will just write Map instead of specific Map. But you can always assume that both the K and V are comparable, which means K extends Comparable and V extends Comparable.<h1 id=convert-a-map-to-list>1. Convert a Map to List</h1><p>In Java, Map interface provides three collection views: key set, value set, and keyvalue set. All of them can be converted to List by using a constructor or addAll() method. The following snippet of code shows how to construct an ArrayList from a map.<figure class="highlight java"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre><td class=code><pre><span class=line><span class=comment>// key list</span></span><br><span class=line><span class=type>List</span> <span class=variable>keyList</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ArrayList</span>(map.keySet());</span><br><span class=line><span class=comment>// value list</span></span><br><span class=line><span class=type>List</span> <span class=variable>valueList</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ArrayList</span>(map.valueSet());</span><br><span class=line><span class=comment>// key value list</span></span><br><span class=line><span class=type>List</span> <span class=variable>entryList</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">ArrayList</span>(map.entrySet());</span><br></pre></table></figure><h1 id=iterate-over-each-entry-in-a-map>2. iterate over each entry in a map</h1><p>Iterating over every pair of key-value is the most basic operation to traverse a map. In Java, such pair is stored in the map entry called Map.Entry.<h1 id=sort-a-map-on-the-keys>3. SORT A MAP ON THE KEYS</h1><p>Map.entrySet() returns a key-value set, therefore the most efficient way of going through every entry of a map is<figure class="highlight java"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre><td class=code><pre><span class=line><span class=keyword>for</span> (Entry entry:map.entrySet()) {</span><br><span class=line>    <span class=comment>// get key</span></span><br><span class=line>    <span class=type>K</span> <span class=variable>key</span> <span class=operator>=</span> entry.getKey();</span><br><span class=line>    <span class=comment>// get value</span></span><br><span class=line>    <span class=type>V</span> <span class=variable>value</span> <span class=operator>=</span> entry.getValue();</span><br><span class=line>}</span><br></pre></table></figure><p>Iterator can also be used, especially before JDK 1.5<figure class="highlight java"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre><td class=code><pre><span class=line><span class=type>Iterator</span> <span class=variable>itr</span> <span class=operator>=</span> map.entrySet().iterator();</span><br><span class=line><span class=keyword>while</span>(itr.hasNext ( ) ) {</span><br><span class=line>Entry <span class=type>ent</span> <span class=variable>ry</span> <span class=operator>=</span> i t r . next ( ) ;</span><br><span class=line>/ / g e t k ey</span><br><span class=line><span class=type>K</span> <span class=variable>key</span> <span class=operator>=</span> ent ry . getKey ( ) ;</span><br><span class=line>/ / g e t v a l u e</span><br><span class=line><span class=type>V</span> <span class=variable>value</span> <span class=operator>=</span> ent ry . getValue ( ) ;</span><br><span class=line>}</span><br></pre></table></figure><p>60.3 sort a map on the keys Sorting a map on the keys is another frequent operation. One way is to put Map.Entry into a list, and sort it using a comparator that sorts the value. Li s t l i s t = new Ar rayLi s t (map. ent rySe t ( ) ) ; Co l l e c t i ons . s o r t ( l i s t , new Comparator ( ) { <span class=citation data-cites=Override>@Override</span> public int compare ( Entry e1 , Entry e2 ) { return e1 . getKey ( ) . compareTo ( e2 . getKey ( ) ) ; } });<p>The other way is to use SortedMap, which further provides a total ordering on its keys. Therefore all keys must either implement Comparable or be accepted by the comparator.<h2 id=sort-a-map-on-the-values>4. SORT A MAP ON THE VALUES</h2><p>One implementing class of SortedMap is TreeMap. Its constructor can accept a comparator. The following code shows how to transform a general map to a sorted map.<p>SortedMap sortedMap = new TreeMap (new Comparator ( ) { <span class=citation data-cites=Override>@Override</span> public int compare (K k1 , K k2 ) { return k1 . compareTo ( k2 ) ; } } ) ; sortedMap . putAll (map) ; 60.4 sort a map on the values Putting the map into a list and sorting it works on this case too, but we need to compare Entry.getValue() this time. The code below is almost same as before. Li s t l i s t = new Ar rayLi s t (map. ent rySe t ( ) ) ; Co l l e c t i ons . s o r t ( l i s t , new Comparator ( ) { <span class=citation data-cites=Override>@Override</span> public int compare ( Entry e1 , Entry e2 ) { return e1 . getValue ( ) . compareTo ( e2 . getValue ( ) ) ; } } ) ; We can still use a sorted map for this question, but only if the values are unique too. Under such condition, you can reverse the key=value pair to value=key. This solution has very strong limitation therefore is not really recommended by me. 60.5 initialize a static/immutable map When you expect a map to remain constant, it’s a good practice to copy it into an immutable map. Such defensive programming techniques will help you create not only safe for use but also safe for thread maps. 60.6. DIFFERENCE BETWEEN HASHMAP, TREEMAP, AND HASHTABLE 217 To initialize a static/immutable map, we can use a static initializer (like below). The problem of this code is that, although map is declared as static final, we can still operate it after initialization, like Test.map.put(3,“three”);. Therefore it is not really immutable. To create an immutable map using a static initializer, we need an extra anonymous class and copy it into a unmodifiable map at the last step of initialization. Please see the second piece of code. Then, an UnsupportedOperationException will be thrown if you run Test.map.put(3,“three”);. public c l a s s Tes t { pr ivate s t a t i c f ina l Map map; s t a t i c { map = new HashMap ( ) ; map. put ( 1 , ” one ” ) ; map. put ( 2 , ” two ” ) ; } } public c l a s s Tes t { pr ivate s t a t i c f ina l Map map; s t a t i c { Map aMap = new HashMap ( ) ; aMap. put ( 1 , ” one ” ) ; aMap. put ( 2 , ” two ” ) ; map = Co l l e c t i ons . unmodifiableMap (aMap) ; } } Guava libraries also support different ways of intilizaing a static and immutable collection. To learn more about the benefits of Guava’s immutable collection utilities, see Immutable Collections Explained in Guava User Guide. 60.6 difference between hashmap, treemap, and hashtable There are three main implementations of Map interface in Java: HashMap, TreeMap, and Hashtable. The most important differences include: The order of iteration. HashMap and HashTable make no guarantees as to the order of the map; in particular, they do not guarantee that the order 60.7. A MAP WITH REVERSE VIEW/LOOKUP 218 will remain constant over time. But TreeMap will iterate the whole entries according the “natural ordering” of the keys or by a comparator. key-value permission. HashMap allows null key and null values. HashTable does not allow null key or null values. If TreeMap uses natural ordering or its comparator does not allow null keys, an exception will be thrown. Synchronized. Only HashTable is synchronized, others are not. Therefore, “if a thread-safe implementation is not needed, it is recommended to use HashMap in place of HashTable.” A more complete comparison is | HashMap | HashTable | TreeMap i t e r a t i o n order | no | no | yes null key value | yes yes | yes yes | no yes synchronized | no | yes | no time performance | O( 1 ) | O( 1 ) | O( log n) implementation | buckets | buckets | red black t r e e Read more about HashMap vs. TreeMap vs. Hashtable vs. LinkedHashMap. 60.7 a map with reverse view/lookup Sometimes, we need a set of key-key pairs, which means the map’s values are unique as well as keys (one-to-one map). This constraint enables to create an “inverse lookup/view” of a map. So we can lookup a key by its value. Such data structure is called bidirectional map, which unfortunetely is not supported by JDK. 60.8 both apache common collections and guava provide implementation of bidirectional map, called bidimap and bimap, respectively. both enforce the restriction that there is a 1:1 relation between keys and values. 7. shallow copy of a map Most implementation of a map in java, if not all, provides a constructor of copy of another map. But the copy procedure is not synchronized. That means when 60.9. FOR THIS REASON, I WILL NOT EVEN TELL YOU HOW TO USE CLONE() METHOD TO COPY one thread copies a map, another one may modify it structurally. To prevent accidental unsynchronized copy, one should use Collections.synchronizedMap() in advance.<p>Map copiedMap = Co l l e c t i ons.synchronizedMap (map) ; Another interesting way of shallow copy is by using clone() method. However it is NOT even recommended by the designer of Java collection framework, Josh Bloch. In a conversation about “Copy constructor versus cloning“, he said I often provide a public clone method on concrete classes because people expect it.<p>It’s a shame that Cloneable is broken, but it happens. Cloneable is a weak spot, and I think people should be aware of its limitations.<p>60.9 for this reason, i will not even tell you how to use clone() method to copy a map. 8. create an empty map If the map is immutable, use map = Co l l e c t i ons . emptyMap ( ) ;<p>Otherwise, use whichever implementation. For example map = new HashMap ( ) ;<p>THE</div><footer class=post-footer><div class=post-eof></div></footer></article></div><div class=post-block><article class=post-content itemscope itemtype=http://schema.org/Article><link href=https://www.longluo.me/blog/2017/12/10/android-jni/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta content=https://www.longluo.me/assets/avatar/sinc_3d_python.png itemprop=image> <meta content="Long Luo" itemprop=name> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content="Long Luo's Life Notes" itemprop=name> <meta content="A Curious Engineer" itemprop=description> </span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork> <meta content="undefined | Long Luo's Life Notes" itemprop=name> <meta itemprop=description> </span><header class=post-header><h2 itemprop="name headline" class=post-title><a class=post-title-link href=/blog/2017/12/10/android-jni/ itemprop=url>android jni</a></h2><div class=post-meta-container><div class=post-meta><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar"></i> </span> <span class=post-meta-item-text>发表于</span> <time itemprop="dateCreated datePublished" title="创建时间：2017-12-10 13:58:53" datetime=2017-12-10T13:58:53+08:00>2017-12-10</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar-check"></i> </span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2024-12-14 11:14:44" datetime=2024-12-14T11:14:44+08:00 itemprop=dateModified>2024-12-14</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-folder"></i> </span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing> <a href=/categories/Android/ itemprop=url rel=index><span itemprop=name>Android</span></a> </span> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-comment"></i> </span> <span class=post-meta-item-text>Waline：</span> <a href=/blog/2017/12/10/android-jni/#waline itemprop=discussionUrl title=waline> <span class="post-comments-count waline-comment-count" data-path=/blog/2017/12/10/android-jni/ itemprop=commentCount></span> </a> </span><span class=post-meta-item title=阅读次数> <span class=post-meta-item-icon> <i class="far fa-eye"></i> </span> <span class=post-meta-item-text>阅读次数：</span> <span class=waline-pageview-count data-path=/blog/2017/12/10/android-jni/></span> </span><span class=post-meta-break></span><span class=post-meta-item title=本文字数> <span class=post-meta-item-icon> <i class="far fa-file-word"></i> </span> <span class=post-meta-item-text>本文字数：</span> <span>6.3k</span> </span><span class=post-meta-item title=阅读时长> <span class=post-meta-item-icon> <i class="far fa-clock"></i> </span> <span class=post-meta-item-text>阅读时长 ≈</span> <span>6 分钟</span> </span></div></div></header><div class=post-body itemprop=articleBody><p><strong><em>By Long Luo</em></strong><p><a href=https://www.longluo.me/blog/2015/12/19/android-ndk/>Android NDK</a><h1 id=静态注册>静态注册</h1><figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br></pre><td class=code><pre><span class=line>cmake_minimum_required(VERSION 3.18.1)</span><br><span class=line></span><br><span class=line>project("hello-jni")</span><br><span class=line></span><br><span class=line>add_library(hello-jni SHARED</span><br><span class=line>        hello-jni.cpp)</span><br><span class=line></span><br><span class=line># Include libraries needed for hello-jni lib</span><br><span class=line>target_link_libraries(hello-jni</span><br><span class=line>        android</span><br><span class=line>        log)</span><br></pre></table></figure><p>hello-jni/app/src/main/cpp/hello-jni.cpp<figure class="highlight cpp"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br></pre><td class=code><pre><span class=line><span class=meta>#<span class=keyword>include</span> <span class=string>&LTjni.h></span></span></span><br><span class=line><span class=meta>#<span class=keyword>include</span> <span class=string>&LTstring></span></span></span><br><span class=line></span><br><span class=line><span class=meta>#<span class=keyword>include</span> <span class=string>"hello_jni.h"</span></span></span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=function>JNIEXPORT jstring JNICALL</span></span><br><span class=line><span class=function><span class=title>Java_me_longluo_hellojni_HelloJniActivity_stringFromJNI</span><span class=params>(JNIEnv *env, jobject <span class=comment>/* this */</span>)</span> </span>{</span><br><span class=line>    std::string hello = <span class=string>"Hello from JNI."</span>;</span><br><span class=line>    <span class=keyword>return</span> env-><span class=built_in>NewStringUTF</span>(hello.<span class=built_in>c_str</span>());</span><br><span class=line>}</span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=function>JNIEXPORT jint JNICALL</span></span><br><span class=line><span class=function><span class=title>Java_me_longluo_hellojni_HelloJniActivity_add</span><span class=params>(JNIEnv *env, jobject <span class=comment>/* this */</span>, jint a, jint b)</span> </span>{</span><br><span class=line>    <span class=type>int</span> result = a + b;</span><br><span class=line>    <span class=keyword>return</span> result;</span><br><span class=line>}</span><br></pre></table></figure><p>hello-jni/app/src/main/cpp/hello_jni.h<figure class="highlight cpp"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br></pre><td class=code><pre><span class=line><span class=meta>#<span class=keyword>ifndef</span> HELLO_JNI_H</span></span><br><span class=line><span class=meta>#<span class=keyword>define</span> HELLO_JNI_H</span></span><br><span class=line></span><br><span class=line><span class=meta>#<span class=keyword>include</span> <span class=string>&LTjni.h></span></span></span><br><span class=line></span><br><span class=line><span class=meta>#<span class=keyword>ifdef</span> __cplusplus</span></span><br><span class=line><span class=keyword>extern</span> <span class=string>"C"</span> {</span><br><span class=line><span class=meta>#<span class=keyword>endif</span></span></span><br><span class=line></span><br><span class=line><span class=function>JNIEXPORT jstring JNICALL</span></span><br><span class=line><span class=function><span class=title>Java_me_longluo_hellojni_HelloJniActivity_stringFromJNI</span><span class=params>(JNIEnv *env, jobject <span class=comment>/* this */</span>)</span></span>;</span><br><span class=line></span><br><span class=line><span class=function>JNIEXPORT jint JNICALL</span></span><br><span class=line><span class=function><span class=title>Java_me_longluo_hellojni_HelloJniActivity_add</span><span class=params>(JNIEnv *env, jobject <span class=comment>/* this */</span>, jint a, jint b)</span></span>;</span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=meta>#<span class=keyword>ifdef</span> __cplusplus</span></span><br><span class=line>}</span><br><span class=line><span class=meta>#<span class=keyword>endif</span></span></span><br><span class=line></span><br><span class=line><span class=meta>#<span class=keyword>endif</span>  <span class=comment>// HELLO_JNI_H</span></span></span><br></pre></table></figure><figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre><td class=code><pre><span class=line>ndkVersion '25.1.8937393'</span><br><span class=line></span><br><span class=line>externalNativeBuild {</span><br><span class=line>    cmake {</span><br><span class=line>        path "src/main/cpp/CMakeLists.txt"</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><h1 id=动态注册>动态注册</h1><p>hello-jni-dynamic/app/src/main/cpp/CMakeLists.txt<figure class="highlight plaintext"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br></pre><td class=code><pre><span class=line>cmake_minimum_required(VERSION 3.18.1)</span><br><span class=line></span><br><span class=line># Declares and names the project.</span><br><span class=line></span><br><span class=line>project("hello-jni-dynamic")</span><br><span class=line></span><br><span class=line># Automatically all files in a directory to a target</span><br><span class=line>file (GLOB_RECURSE HELLOJNI_SRCS CONFIGURE_DEPENDS</span><br><span class=line>        "src/*.cpp"</span><br><span class=line>        "src/*.h"</span><br><span class=line>)</span><br><span class=line></span><br><span class=line># Creates and names a library, sets it as either STATIC</span><br><span class=line># or SHARED, and provides the relative paths to its source code.</span><br><span class=line># You can define multiple libraries, and CMake builds them for you.</span><br><span class=line># Gradle automatically packages shared libraries with your APK.</span><br><span class=line></span><br><span class=line>add_library( # Sets the name of the library.</span><br><span class=line>        hello-jni</span><br><span class=line></span><br><span class=line>        # Sets the library as a shared library.</span><br><span class=line>        SHARED</span><br><span class=line></span><br><span class=line>        # Provides a relative path to your source file(s).</span><br><span class=line>        ${HELLOJNI_SRCS})</span><br><span class=line></span><br><span class=line># Searches for a specified prebuilt library and stores the path as a</span><br><span class=line># variable. Because CMake includes system libraries in the search path by</span><br><span class=line># default, you only need to specify the name of the public NDK library</span><br><span class=line># you want to add. CMake verifies that the library exists before</span><br><span class=line># completing its build.</span><br><span class=line></span><br><span class=line>find_library( # Sets the name of the path variable.</span><br><span class=line>        log-lib</span><br><span class=line></span><br><span class=line>        # Specifies the name of the NDK library that</span><br><span class=line>        # you want CMake to locate.</span><br><span class=line>        log)</span><br><span class=line></span><br><span class=line># Specifies libraries CMake should link to your target library. You</span><br><span class=line># can link multiple libraries, such as libraries you define in this</span><br><span class=line># build script, prebuilt third-party libraries, or system libraries.</span><br><span class=line></span><br><span class=line>target_link_libraries( # Specifies the target library.</span><br><span class=line>        hello-jni</span><br><span class=line></span><br><span class=line>        # Links the target library to the log library</span><br><span class=line>        # included in the NDK.</span><br><span class=line>        ${log-lib}</span><br><span class=line>)</span><br></pre></table></figure><p>hello-jni-dynamic/app/src/main/cpp/src/hello-jni.cpp<figure class="highlight cpp"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br></pre><td class=code><pre><span class=line><span class=meta>#<span class=keyword>include</span> <span class=string>"hello-jni.h"</span></span></span><br><span class=line></span><br><span class=line><span class=function>jint <span class=title>JNI_OnLoad</span><span class=params>(JavaVM *vm, <span class=type>void</span> *reserved)</span></span>{</span><br><span class=line></span><br><span class=line>    UnionJNIEnvToVoid uenv;</span><br><span class=line>    uenv.venv = <span class=literal>nullptr</span>;</span><br><span class=line>    jint result = <span class=number>-1</span>;</span><br><span class=line>    JNIEnv* env;</span><br><span class=line></span><br><span class=line>    <span class=built_in>ALOGI</span>(<span class=string>"JNI_OnLoad"</span>);</span><br><span class=line></span><br><span class=line>    <span class=keyword>if</span> (vm-><span class=built_in>GetEnv</span>(&uenv.venv, JNI_VERSION_1_6) != JNI_OK) {</span><br><span class=line>        <span class=built_in>ALOGE</span>(<span class=string>"ERROR: GetEnv failed"</span>);</span><br><span class=line>        <span class=keyword>goto</span> bail;</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    env = uenv.env;</span><br><span class=line>    <span class=keyword>if</span> (<span class=built_in>registerNatives</span>(env) != JNI_TRUE) {</span><br><span class=line>        <span class=built_in>ALOGE</span>(<span class=string>"ERROR: registerNatives failed"</span>);</span><br><span class=line>        <span class=keyword>goto</span> bail;</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    result = JNI_VERSION_1_6;</span><br><span class=line></span><br><span class=line>    bail:</span><br><span class=line>    <span class=keyword>return</span> result;</span><br><span class=line>}</span><br></pre></table></figure><p>hello-jni-dynamic/app/src/main/cpp/src/hello-jni.h<figure class="highlight cpp"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br></pre><td class=code><pre><span class=line><span class=meta>#<span class=keyword>ifndef</span> HELLO_JNI_H</span></span><br><span class=line><span class=meta>#<span class=keyword>define</span> HELLO_JNI_H</span></span><br><span class=line></span><br><span class=line><span class=meta>#<span class=keyword>include</span> <span class=string>&LTjni.h></span></span></span><br><span class=line><span class=meta>#<span class=keyword>include</span> <span class=string>&LTstring></span></span></span><br><span class=line><span class=meta>#<span class=keyword>include</span> <span class=string>"logger.h"</span></span></span><br><span class=line><span class=meta>#<span class=keyword>include</span> <span class=string>"constants.h"</span></span></span><br><span class=line></span><br><span class=line><span class=meta>#<span class=keyword>define</span> SIZE(X) sizeof(X) / sizeof(X[0])</span></span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>typedef</span> <span class=keyword>union</span> {</span><br><span class=line>    JNIEnv *env;</span><br><span class=line>    <span class=type>void</span> *venv;</span><br><span class=line>} UnionJNIEnvToVoid;</span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=comment>/*</span></span><br><span class=line><span class=comment> * Register several native methods for one class.</span></span><br><span class=line><span class=comment> */</span></span><br><span class=line><span class=function><span class=type>static</span> <span class=type>int</span> <span class=title>registerNativeMethods</span><span class=params>(JNIEnv *env, <span class=type>const</span> <span class=type>char</span> *className, JNINativeMethod *gMethods,</span></span></span><br><span class=line><span class=params><span class=function>                                 <span class=type>int</span> numMethods)</span> </span>{</span><br><span class=line>    jclass clazz;</span><br><span class=line>    clazz = env-><span class=built_in>FindClass</span>(className);</span><br><span class=line></span><br><span class=line>    <span class=keyword>if</span> (clazz == <span class=literal>NULL</span>) {</span><br><span class=line>        <span class=built_in>ALOGE</span>(<span class=string>"Native registration unable to find class '%s'"</span>, className);</span><br><span class=line>        <span class=keyword>return</span> JNI_FALSE;</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=keyword>if</span> (env-><span class=built_in>RegisterNatives</span>(clazz, gMethods, numMethods) < <span class=number>0</span>) {</span><br><span class=line>        <span class=built_in>ALOGE</span>(<span class=string>"RegisterNatives failed for '%s'"</span>, className);</span><br><span class=line>        <span class=keyword>return</span> JNI_FALSE;</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=keyword>return</span> JNI_TRUE;</span><br><span class=line>}</span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=comment>/*</span></span><br><span class=line><span class=comment> * Register native methods for all classes we know about.</span></span><br><span class=line><span class=comment> *</span></span><br><span class=line><span class=comment> * returns JNI_TRUE on success.</span></span><br><span class=line><span class=comment> */</span></span><br><span class=line><span class=function><span class=type>static</span> <span class=type>int</span> <span class=title>registerNatives</span><span class=params>(JNIEnv *env)</span> </span>{</span><br><span class=line>    <span class=keyword>if</span> (!<span class=built_in>registerNativeMethods</span>(env, HelloJNI::constants,</span><br><span class=line>                               HelloJNI::constants_methods,</span><br><span class=line>                               <span class=built_in>SIZE</span>(HelloJNI::constants_methods))</span><br><span class=line>            ) {</span><br><span class=line>        <span class=keyword>return</span> JNI_FALSE;</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=keyword>return</span> JNI_TRUE;</span><br><span class=line>}</span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=comment>/*</span></span><br><span class=line><span class=comment> * This is called by the VM when the shared library is first loaded.</span></span><br><span class=line><span class=comment> */</span></span><br><span class=line><span class=function>jint <span class=title>JNI_OnLoad</span><span class=params>(JavaVM *vm, <span class=type>void</span> *reserved)</span></span>;</span><br><span class=line></span><br><span class=line><span class=meta>#<span class=keyword>endif</span> <span class=comment>//HELLO_JNI_H</span></span></span><br></pre></table></figure><p>hello-jni-dynamic/app/src/main/cpp/src/constants.h<figure class="highlight cpp"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br></pre><td class=code><pre><span class=line><span class=meta>#<span class=keyword>ifndef</span> HELLO_CONSTANTS_H</span></span><br><span class=line><span class=meta>#<span class=keyword>define</span> HELLO_CONSTANTS_H</span></span><br><span class=line></span><br><span class=line><span class=meta>#<span class=keyword>include</span> <span class=string>&LTjni.h></span></span></span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>namespace</span> HelloJNI{</span><br><span class=line></span><br><span class=line>    <span class=function><span class=type>static</span> jfloat <span class=title>JniVersion</span><span class=params>(JNIEnv *env, jobject object)</span> </span>{</span><br><span class=line>        <span class=keyword>return</span> <span class=number>1.6</span>;</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=function><span class=type>static</span> jstring <span class=title>JniDynamicRegister</span><span class=params>(JNIEnv *env, jobject object)</span></span>{</span><br><span class=line>        <span class=keyword>return</span> env-><span class=built_in>NewStringUTF</span>(<span class=string>"Hello Jni Dynamic Register"</span>);</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=type>static</span> <span class=type>const</span> <span class=type>char</span> *constants = <span class=string>"me/longluo/hellojni/JniLibrary"</span>;</span><br><span class=line></span><br><span class=line>    <span class=type>static</span> JNINativeMethod constants_methods[] = {</span><br><span class=line>            {<span class=string>"nativeGetJniVersion"</span>, <span class=string>"()F"</span>, (<span class=type>void</span> *) JniVersion},</span><br><span class=line>            {<span class=string>"nativeGetJniDynamicRegister"</span>, <span class=string>"()Ljava/lang/String;"</span>, (<span class=type>void</span> *) JniDynamicRegister}</span><br><span class=line>    };</span><br><span class=line></span><br><span class=line>    <span class=function><span class=type>static</span> std::string <span class=title>jString2String</span><span class=params>(JNIEnv *env, jstring jStr)</span> </span>{</span><br><span class=line>        <span class=keyword>if</span> (!jStr) {</span><br><span class=line>            <span class=keyword>return</span> <span class=string>""</span>;</span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        <span class=type>const</span> jclass stringClass = env-><span class=built_in>GetObjectClass</span>(jStr);</span><br><span class=line>        <span class=type>const</span> jmethodID getBytes = env-><span class=built_in>GetMethodID</span>(stringClass, <span class=string>"getBytes"</span>, <span class=string>"(Ljava/lang/String;)[B"</span>);</span><br><span class=line>        <span class=type>const</span> jbyteArray stringJbytes = (jbyteArray) env-><span class=built_in>CallObjectMethod</span>(jStr, getBytes, env-><span class=built_in>NewStringUTF</span>(<span class=string>"UTF-8"</span>));</span><br><span class=line></span><br><span class=line>        <span class=type>size_t</span> length = (<span class=type>size_t</span>) env-><span class=built_in>GetArrayLength</span>(stringJbytes);</span><br><span class=line>        jbyte* pBytes = env-><span class=built_in>GetByteArrayElements</span>(stringJbytes, <span class=literal>NULL</span>);</span><br><span class=line></span><br><span class=line>        std::string ret = std::<span class=built_in>string</span>((<span class=type>char</span> *)pBytes, length);</span><br><span class=line>        env-><span class=built_in>ReleaseByteArrayElements</span>(stringJbytes, pBytes, JNI_ABORT);</span><br><span class=line></span><br><span class=line>        env-><span class=built_in>DeleteLocalRef</span>(stringJbytes);</span><br><span class=line>        env-><span class=built_in>DeleteLocalRef</span>(stringClass);</span><br><span class=line></span><br><span class=line>        <span class=keyword>return</span> ret;</span><br><span class=line>    }</span><br><span class=line>}</span><br><span class=line></span><br><span class=line><span class=meta>#<span class=keyword>endif</span> <span class=comment>//HELLO_CONSTANTS_H</span></span></span><br></pre></table></figure><h1 id=参考文献>参考文献</h1><ol type=1><li><a href=https://en.wikipedia.org/wiki/Java_Native_Interface rel=noopener target=_blank>JNI</a><li><a href=https://developer.android.com/ndk/guides?hl=zh-cn rel=noopener target=_blank>NDK 使用入门</a><li><a href=https://developer.android.com/ndk/guides/cmake?hl=zh-cn rel=noopener target=_blank>CMake</a><li><a href=https://developer.android.com/ndk/guides/other_build_systems?hl=zh-cn rel=noopener target=_blank>将 NDK 与其他构建系统配合使用</a><li><a href=https://developer.android.com/ndk/samples/sample_hellojni?hl=zh-cn rel=noopener target=_blank>示例：hello-jni</a></ol><p>https://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/intro.html<p>https://medium.com/<span class=citation data-cites=sarafanshul/jni-101-introduction-to-java-native-interface-8a1256ca4d8e>@sarafanshul/jni-101-introduction-to-java-native-interface-8a1256ca4d8e</span><p>https://medium.com/<span class=citation data-cites=sarafanshul/jni-201-dynamic-registration-a1ad7fa50b21>@sarafanshul/jni-201-dynamic-registration-a1ad7fa50b21</span><p>https://gist.github.com/okamayana/79c98545eb99c4877979</div><footer class=post-footer><div class=post-eof></div></footer></article></div><div class=post-block><article class=post-content itemscope itemtype=http://schema.org/Article><link href=https://www.longluo.me/blog/2017/11/28/3-basic-rules-for-hiring-new-employees/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta content=https://www.longluo.me/assets/avatar/sinc_3d_python.png itemprop=image> <meta content="Long Luo" itemprop=name> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content="Long Luo's Life Notes" itemprop=name> <meta content="A Curious Engineer" itemprop=description> </span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork> <meta content="undefined | Long Luo's Life Notes" itemprop=name> <meta itemprop=description> </span><header class=post-header><h2 itemprop="name headline" class=post-title><a class=post-title-link href=/blog/2017/11/28/3-basic-rules-for-hiring-new-employees/ itemprop=url>如何招到优秀的员工？</a></h2><div class=post-meta-container><div class=post-meta><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar"></i> </span> <span class=post-meta-item-text>发表于</span> <time itemprop="dateCreated datePublished" title="创建时间：2017-11-28 22:22:02" datetime=2017-11-28T22:22:02+08:00>2017-11-28</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar-check"></i> </span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2023-11-14 22:24:40" datetime=2023-11-14T22:24:40+08:00 itemprop=dateModified>2023-11-14</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-folder"></i> </span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing> <a href=/categories/Work/ itemprop=url rel=index><span itemprop=name>Work</span></a> </span> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-comment"></i> </span> <span class=post-meta-item-text>Waline：</span> <a href=/blog/2017/11/28/3-basic-rules-for-hiring-new-employees/#waline itemprop=discussionUrl title=waline> <span class="post-comments-count waline-comment-count" data-path=/blog/2017/11/28/3-basic-rules-for-hiring-new-employees/ itemprop=commentCount></span> </a> </span><span class=post-meta-item title=阅读次数> <span class=post-meta-item-icon> <i class="far fa-eye"></i> </span> <span class=post-meta-item-text>阅读次数：</span> <span class=waline-pageview-count data-path=/blog/2017/11/28/3-basic-rules-for-hiring-new-employees/></span> </span><span class=post-meta-break></span><span class=post-meta-item title=本文字数> <span class=post-meta-item-icon> <i class="far fa-file-word"></i> </span> <span class=post-meta-item-text>本文字数：</span> <span>388</span> </span><span class=post-meta-item title=阅读时长> <span class=post-meta-item-icon> <i class="far fa-clock"></i> </span> <span class=post-meta-item-text>阅读时长 ≈</span> <span>1 分钟</span> </span></div></div></header><div class=post-body itemprop=articleBody><p><strong><em>By Long Luo</em></strong><p><strong>招聘</strong>其实本质上是在做<strong><em>风险评估</em></strong>，根据简历和面试确定风险最小的那个人。<p>其实这个风险评估可以推而广之适用于涉及选择的各个场合。<p>最近在协助公司招人，也为项目组面试了一些人，对招人也有了一些思考。<p>为了避免招到不合适的人，将风险降到最低，那么就会从各方面均衡考虑。<p>从面试官的角度来看，为什么要名校和名企出身的人。<p>第一，因为名企已经帮你做了一次筛选了，尤其是校招进入BAT的，更是万里挑一，所以风险可以降到最低。<p>第二，学历其实也是一项筛选。学历可以证明你的学习能力以及把握机会的能力（高考是一次可以改变人生轨迹的机会。）。<p>第三，如果没有名企和学历的光环，那么你就要用你做成功的事情来证明你自己确实出类拔萃。<p>综合，应聘者需要用一些东西来证明自己比其他应聘者更优秀，而且实力已经得到证明，而不是到新公司体现和证明。<p><strong><em>By Long Luo <span class=citation data-cites=2017-11-28>@2017-11-28</span> at Shenzhen.</em></strong></div><footer class=post-footer><div class=post-eof></div></footer></article></div><div class=post-block><article class=post-content itemscope itemtype=http://schema.org/Article><link href=https://www.longluo.me/blog/2017/11/10/josephus-problem/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta content=https://www.longluo.me/assets/avatar/sinc_3d_python.png itemprop=image> <meta content="Long Luo" itemprop=name> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content="Long Luo's Life Notes" itemprop=name> <meta content="A Curious Engineer" itemprop=description> </span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork> <meta content="undefined | Long Luo's Life Notes" itemprop=name> <meta itemprop=description> </span><header class=post-header><h2 itemprop="name headline" class=post-title><a class=post-title-link href=/blog/2017/11/10/josephus-problem/ itemprop=url>经典算法：从约瑟夫问题(Josephus problem)说开去...</a></h2><div class=post-meta-container><div class=post-meta><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar"></i> </span> <span class=post-meta-item-text>发表于</span> <time itemprop="dateCreated datePublished" title="创建时间：2017-11-10 23:27:04" datetime=2017-11-10T23:27:04+08:00>2017-11-10</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar-check"></i> </span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2023-11-14 22:24:40" datetime=2023-11-14T22:24:40+08:00 itemprop=dateModified>2023-11-14</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-folder"></i> </span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing> <a href=/categories/Data-Structures-and-Algorithms/ itemprop=url rel=index><span itemprop=name>Data Structures and Algorithms</span></a> </span> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-comment"></i> </span> <span class=post-meta-item-text>Waline：</span> <a href=/blog/2017/11/10/josephus-problem/#waline itemprop=discussionUrl title=waline> <span class="post-comments-count waline-comment-count" data-path=/blog/2017/11/10/josephus-problem/ itemprop=commentCount></span> </a> </span><span class=post-meta-item title=阅读次数> <span class=post-meta-item-icon> <i class="far fa-eye"></i> </span> <span class=post-meta-item-text>阅读次数：</span> <span class=waline-pageview-count data-path=/blog/2017/11/10/josephus-problem/></span> </span><span class=post-meta-break></span><span class=post-meta-item title=本文字数> <span class=post-meta-item-icon> <i class="far fa-file-word"></i> </span> <span class=post-meta-item-text>本文字数：</span> <span>3.1k</span> </span><span class=post-meta-item title=阅读时长> <span class=post-meta-item-icon> <i class="far fa-clock"></i> </span> <span class=post-meta-item-text>阅读时长 ≈</span> <span>3 分钟</span> </span></div></div></header><div class=post-body itemprop=articleBody><p><strong><em>By Long Luo</em></strong><p><strong>约瑟夫问题(Josephus problem)</strong> <a class=footnote-ref href=#fn1 id=fnref1 role=doc-noteref><sup>1</sup></a> 是每个学计算机的同学都会遇到的经典编程题，可以考察链表、递归、数学等知识，下面我们就来通过这道题对好好学习下算法和编程吧，Let’s go!<h1 id=一约瑟夫问题>一、约瑟夫问题</h1><p>据说著名犹太历史学家 <span class="math inline">\(\textit{Josephus}\)</span> 有过以下的故事：<blockquote><p>在罗马人占领乔塔帕特后，<span class="math inline">\(39\)</span> 个犹太人与 <span class="math inline">\(\textit{Josephus}\)</span> 及他的朋友躲到一个洞中，<span class="math inline">\(39\)</span> 个犹太人决定宁愿死也不要被敌人抓到，于是决定了一个自杀方式，<span class="math inline">\(41\)</span> 个人排成一个圆圈，由第 <span class="math inline">\(1\)</span> 个人开始报数，每报数到第 <span class="math inline">\(3\)</span> 人该人就必须自杀，然后再由下一个重新报数，直到所有人都自杀身亡为止。</blockquote><p>然而 <span class="math inline">\(\textit{Josephus}\)</span> 和他的朋友并不想遵从这个规则，<span class="math inline">\(\textit{Josephus}\)</span> 要他的朋友先假装遵从，他将朋友与自己安排在第 <span class="math inline">\(16\)</span> 个与第 <span class="math inline">\(31\)</span> 个位置，于是逃过了这场死亡游戏。<h1 id=二约瑟夫问题算法分析>二、约瑟夫问题算法分析</h1><p>约瑟夫问题可用代数分析来求解，将这个问题扩大好了，假设现在您与 <span class="math inline">\(N\)</span> 个朋友不幸参与了这个游戏，您要如何保护您与您的朋友？<p>只要画两个圆圈就可以让自己与朋友免于死亡游戏，这两个圆圈内圈是排列顺序，而外圈是自杀顺序，如下图所示：<figure><img alt="Josephus Problem" src=https://user-images.githubusercontent.com/3395062/251418572-e0b229c1-71cc-43d6-9297-6c7934175135.svg><figcaption aria-hidden=true>Josephus Problem</figcaption></figure><p>假如使用编程来求解的话，只要将 <span class="math inline">\(\textit{array}\)</span> 当作环状来处理就可以了，在 <span class="math inline">\(\textit{array}\)</span> 中由计数 <span class="math inline">\(1\)</span> 开始，每找到 <span class="math inline">\(3\)</span> 个无数据区就填入 <span class="math inline">\(1\)</span> 个计数，直到计数达 <span class="math inline">\(41\)</span> 为止，然后将 <span class="math inline">\(\textit{array}\)</span> 由索引 <span class="math inline">\(1\)</span> 开始列出，就可以得知每个位置的自杀顺序，这就是约瑟夫排列，<span class="math inline">\(41\)</span> 个人而报数 <span class="math inline">\(3\)</span> 的约琴夫排列如下所示：<blockquote><p>14 36 1 38 15 2 24 30 3 16 34 425 17 5 40 31 6 18 26 7 37 19 8 35 27 9 20 32 10 41 21 11 28 39 12 22 33 13 29 23</blockquote><p>由上可知，最后一个自杀的是在第 <span class="math inline">\(31\)</span> 个位置，而倒数第二个自杀的要排在第 <span class="math inline">\(16\)</span> 个位置，而之前的人都死光了，所以他们也就不知道约瑟夫与他的朋友并没有遵守游戏规则了。<p>这是一道经典算法问题，每个学编程的同学都会遇到。一般常见的问法有以下几种：<ol type=1><li>输出自杀顺序；<li>输出最后一个自杀同学编号。</ol><p>下面我们就来动手实践下，具体实现代码如下所示：<figure class="highlight java"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br></pre><td class=code><pre><span class=line><span class=keyword>private</span> <span class=keyword>static</span> <span class=type>int</span> <span class="title function_">Josephus</span><span class=params>(<span class=type>int</span> n, <span class=type>int</span> m)</span> {</span><br><span class=line>	    <span class=type>int</span>[] peopleArr = <span class=keyword>new</span> <span class="title class_">int</span>[n];</span><br><span class=line>	    <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i < n; i++) {</span><br><span class=line>	        peopleArr[i] = i + <span class=number>1</span>;</span><br><span class=line>	    }</span><br><span class=line>	</span><br><span class=line>	    <span class=type>int</span> <span class=variable>index</span> <span class=operator>=</span> <span class=number>0</span>;</span><br><span class=line>	    <span class=type>int</span> <span class=variable>length</span> <span class=operator>=</span> n;</span><br><span class=line>	    <span class=type>int</span> <span class=variable>count</span> <span class=operator>=</span> <span class=number>1</span>;</span><br><span class=line>	</span><br><span class=line>	    <span class=keyword>while</span> (length > <span class=number>0</span>) {</span><br><span class=line>	        <span class=keyword>if</span> (peopleArr[index % n] > <span class=number>0</span>) {</span><br><span class=line>	            <span class=keyword>if</span> (count % m == <span class=number>0</span>) {</span><br><span class=line>	                <span class=comment>// 找到要出圈的人，并把圈中人数减1</span></span><br><span class=line>	                System.out.print(peopleArr[index % n] + <span class=string>"  "</span>);</span><br><span class=line>	                peopleArr[index % n] = -<span class=number>1</span>;</span><br><span class=line>	                count = <span class=number>1</span>;</span><br><span class=line>	                index++;</span><br><span class=line>	                length--;</span><br><span class=line>	            } <span class=keyword>else</span> {</span><br><span class=line>	                index++;</span><br><span class=line>	                count++;</span><br><span class=line>	            }</span><br><span class=line>	        } <span class=keyword>else</span> {</span><br><span class=line>	            <span class=comment>// 遇到空位了，就跳到下一位，但count不加1，也就是这个位置没有报数</span></span><br><span class=line>	            index++;</span><br><span class=line>	        }</span><br><span class=line>	    }</span><br><span class=line>	</span><br><span class=line>	    <span class=keyword>return</span> index;</span><br><span class=line>	}</span><br></pre></table></figure><!--noindex--><div class=post-button><a class=btn href=/blog/2017/11/10/josephus-problem/#more rel=contents> 阅读全文 » </a></div><!--/noindex--></div><footer class=post-footer><div class=post-eof></div></footer></article></div><nav class=pagination><a class="extend prev" aria-label=上一页 href=/page/44/ rel=prev title=上一页><i class="fa fa-angle-left"></i></a><a class=page-number href=/>1</a><span class=space>…</span><a class=page-number href=/page/44/>44</a><span class="page-number current">45</span><a class=page-number href=/page/46/>46</a><span class=space>…</span><a class=page-number href=/page/70/>70</a><a class="extend next" aria-label=下一页 href=/page/46/ rel=next title=下一页><i class="fa fa-angle-right"></i></a></nav></div></main><footer class=footer><div class=footer-inner><div class=copyright>© 2013 – <span itemprop=copyrightYear>2025</span><span class=with-love> <i class="fa fa-heart"></i> </span><span class=author itemprop=copyrightHolder>Long Luo</span></div><div class=wordcount><span class=post-meta-item> <span class=post-meta-item-icon> <i class="fa fa-chart-line"></i> </span> <span title=站点总字数>1.6m</span> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="fa fa-coffee"></i> </span> <span title=站点阅读时长>24:19</span> </span></div><div class=busuanzi-count><span class=post-meta-item id=busuanzi_container_site_uv> <span class=post-meta-item-icon> <i class="fa fa-user"></i> </span> <span class=site-uv title=总访客量> <span id=busuanzi_value_site_uv></span> </span> </span><span class=post-meta-item id=busuanzi_container_site_pv> <span class=post-meta-item-icon> <i class="fa fa-eye"></i> </span> <span class=site-pv title=总访问量> <span id=busuanzi_value_site_pv></span> </span> </span></div><div class=powered-by>由 <a href=https://hexo.io/ rel=noopener target=_blank>Hexo</a> & <a href=https://theme-next.js.org/pisces/ rel=noopener target=_blank>NexT.Pisces</a> 强力驱动</div></div></footer><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div><div class=sidebar-dimmer></div><div aria-label=返回顶部 class=back-to-top role=button><i class="fa fa-arrow-up fa-lg"></i><span>0%</span></div><div class=reading-progress-bar></div><a class="book-mark-link book-mark-link-fixed" role=button></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><script crossorigin=anonymous integrity=sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY= src=https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/comments.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/utils.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/motion.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/sidebar.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/next-boot.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/bookmark.min.js></script><script crossorigin=anonymous integrity=sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc= src=https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/third-party/search/local-search.min.js></script><script async src=https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><script class=next-config data-name=enableMath type=application/json>true</script><script class=next-config data-name=mathjax type=application/json>{"enable":true,"tags":"ams","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/third-party/math/mathjax.min.js></script><script class=next-config data-name=waline type=application/json>{"lang":"zh-CN","enable":true,"serverURL":"https://waline.longluo.me/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":true,"libUrl":"https://unpkg.com/@waline/client@v2/dist/waline.js","locale":{"placeholder":"欢迎大家的留言！(留言只需要填昵称即可。) Welcome to comment!"},"emoji":["https://unpkg.com/@waline/emojis@1.0.1/qq"],"meta":["nick","mail","link"],"requiredMeta":[["nick"]],"wordLimit":0,"pageSize":10,"el":"#waline","comment":true,"path":"/page/45/"}</script><link href=https://unpkg.com/@waline/client@v2/dist/waline.css rel=stylesheet><script>document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});</script>