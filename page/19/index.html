<!doctypehtml><html lang=zh-CN><meta charset=UTF-8><meta content=width=device-width name=viewport><meta content=#222 name=theme-color><meta content="Hexo 7.1.1" name=generator><link href=https://fonts.googleapis.com rel=preconnect><link href=https://cdnjs.cloudflare.com rel=preconnect><link href=https://www.longluo.me/assets/logo/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=https://www.longluo.me/assets/logo/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=https://www.longluo.me/assets/logo/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link color=#222 href=/images/logo.svg rel=mask-icon><meta content=n6mekvZa-QaR3EnDD-CzJymq7mGubpU7rvoGpKROHLE name=google-site-verification><meta content=6BFBD4DDDB3B6F4FDD26CF82BADDB931 name=msvalidate.01><meta content=a2ab49d952ea45f5 name=yandex-verification><meta content=www.longluo.me name=baidu-site-verification><link href=/css/main.css rel=stylesheet><link as=style href=https://fonts.googleapis.com/css2?family=Noto+Serif+SC:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Roboto+Mono:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap&subset=latin,latin-ext onload=this.rel='stylesheet' rel=preload><link crossorigin=anonymous href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css integrity=sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E= rel=stylesheet><link crossorigin=anonymous href=https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css integrity=sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE= rel=stylesheet><script class=next-config data-name=main type=application/json>{"hostname":"www.longluo.me","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.21.1","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"default"},"fold":{"enable":false,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":5,"unescape":false,"preload":false,"trigger":"auto"}}</script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/config.min.js></script><meta content="A Curious Engineer" name=description><meta content=website property=og:type><meta content="Long Luo's Life Notes" property=og:title><meta content=https://www.longluo.me/page/19/index.html property=og:url><meta content="Long Luo's Life Notes" property=og:site_name><meta content="A Curious Engineer" property=og:description><meta content=zh_CN property=og:locale><meta content="Long Luo" property=article:author><meta content="longluo, Tech, Tech Blog, 技术博客, Personal Blog, 个人博客, Blogger, 博客, Math, 数学, Physics, 物理, Software Engineer, 软件工程师, Program, 编程, 程序员, 码农, Java, C, C++, Data Structures, 数据结构, Algorithm, 算法, Life, 生活," property=article:tag><meta content=summary name=twitter:card><link href=https://www.longluo.me/page/19/ rel=canonical><script class=next-config data-name=page type=application/json>{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/19/index.html","title":""}</script><script class=next-config data-name=calendar type=application/json>""</script><title>Long Luo's Life Notes</title><script async src=https://www.googletagmanager.com/gtag/js?id=UA-46213499-2></script><script class=next-config data-name=google_analytics type=application/json>{"tracking_id":"UA-46213499-2","only_pageview":false,"measure_protocol_api_secret":null}</script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/third-party/analytics/google-analytics.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/third-party/analytics/baidu-analytics.min.js></script><script async src=https://hm.baidu.com/hm.js?a75fb5d0c0ef1e36c34b7f52bb7c48be></script><script async src=https://assets.growingio.com/2.1/gio.js></script><script class=next-config data-name=growingio_analytics type=application/json>"bc65befc551b6d70"</script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/third-party/analytics/growingio.min.js></script><script>(function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "gz2vdkhgvh");</script><script async data-host-url=longluo.me data-website-id=2a6d2bf9-2adf-474b-a292-84ca30206507 defer src=https://analytics.us.umami.is/script.js></script><script data-domain=longluo.me defer src=https://plausible.io/js/script.js></script><link href=https://waline.longluo.me/ rel=dns-prefetch><noscript><link href=/css/noscript.css rel=stylesheet></noscript><style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style><link title="Long Luo's Life Notes" href=/atom.xml rel=alternate type=application/atom+xml><body class=use-motion itemscope itemtype=http://schema.org/WebPage><div class=headband></div><main class=main><div class=column><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=site-brand-container><div class=site-nav-toggle><div aria-label=切换导航栏 class=toggle role=button><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div></div><div class=site-meta><a class=brand href=/ rel=start> <i class=logo-line></i> <h1 class=site-title>Long Luo's Life Notes</h1> <i class=logo-line></i> </a><p class=site-subtitle itemprop=description>每一天都是奇迹</div><div class=site-nav-right><div class="toggle popup-trigger" aria-label=搜索 role=button><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ rel=section><i class="fa fa-home fa-fw"></i>首页</a><li class="menu-item menu-item-works"><a href=/works rel=section><i class="fa fa-code fa-fw"></i>works</a><li class="menu-item menu-item-about"><a href=/about/ rel=section><i class="fa fa-user fa-fw"></i>关于</a><li class="menu-item menu-item-tags"><a href=/tags/ rel=section><i class="fa fa-tags fa-fw"></i>标签</a><li class="menu-item menu-item-categories"><a href=/categories/ rel=section><i class="fa fa-th fa-fw"></i>分类</a><li class="menu-item menu-item-archives"><a href=/archives/ rel=section><i class="fa fa-archive fa-fw"></i>归档</a><li class="menu-item menu-item-search"><a class=popup-trigger role=button><i class="fa fa-search fa-fw"></i>搜索 </a></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon> <i class="fa fa-search"></i> </span><div class=search-input-container><input autocapitalize=off autocomplete=off class=search-input maxlength=80 placeholder=搜索... spellcheck=false type=search></div><span class=popup-btn-close role=button> <i class="fa fa-times-circle"></i> </span></div><div class=search-result-container><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class=sidebar><div class="sidebar-inner sidebar-overview-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录<li class=sidebar-nav-overview>站点概览</ul><div class=sidebar-panel-container><!--noindex--><div class="post-toc-wrap sidebar-panel"></div><!--/noindex--><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop=author itemscope itemtype=http://schema.org/Person><img alt="Long Luo" class=site-author-image itemprop=image src=https://www.longluo.me/assets/avatar/sinc_3d_python.png><p class=site-author-name itemprop=name>Long Luo<div class=site-description itemprop=description>A Curious Engineer</div></div><div class="site-state-wrap animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/> <span class=site-state-item-count>347</span> <span class=site-state-item-name>日志</span> </a></div><div class="site-state-item site-state-categories"><a href=/categories/> <span class=site-state-item-count>25</span> <span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/> <span class=site-state-item-count>341</span> <span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-author animated"><span class=links-of-author-item> <a rel="noopener me" title="GitHub → https://github.com/longluo" href=https://github.com/longluo target=_blank><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class=links-of-author-item> <a rel="noopener me" title="ZhiHu → http://www.zhihu.com/people/longluo" href=http://www.zhihu.com/people/longluo target=_blank><i class="fab fa-quora fa-fw"></i>ZhiHu</a> </span><span class=links-of-author-item> <a rel="noopener me" title="LinkedIn → https://www.linkedin.com/in/longluo/" href=https://www.linkedin.com/in/longluo/ target=_blank><i class="fa fa-linkedin fa-fw"></i>LinkedIn</a> </span><span class=links-of-author-item> <a rel="noopener me" title="E-Mail → mailto:luolong0226@163.com" href=mailto:luolong0226@163.com target=_blank><i class="fa fa-envelope fa-fw"></i>E-Mail</a> </span></div><div class="cc-license animated" itemprop=license><a class=cc-opacity href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh rel=noopener target=_blank><img alt="Creative Commons" src=https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg></a></div></div></div></div><div class="sidebar-inner sidebar-blogroll"><div class="links-of-blogroll animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i> 链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=http://blog.csdn.net/tcpipstack rel=noopener target=_blank title=http://blog.csdn.net/tcpipstack>My CSDN</a><li class=links-of-blogroll-item><a href=https://www.ruanyifeng.com/home.html rel=noopener target=_blank title=https://www.ruanyifeng.com/home.html>阮一峰老师</a><li class=links-of-blogroll-item><a href=https://hutusi.com/ rel=noopener target=_blank title=https://hutusi.com/>胡涂说</a><li class=links-of-blogroll-item><a href=https://www.qtmuniao.com/ rel=noopener target=_blank title=https://www.qtmuniao.com/>木鸟杂记</a><li class=links-of-blogroll-item><a href=https://yufan.me/ rel=noopener target=_blank title=https://yufan.me/>雨帆</a></ul></div></div></aside></div><div class="main-inner index posts-expand"><div class=post-block><article class=post-content itemscope itemtype=http://schema.org/Article><link href=https://www.longluo.me/blog/2022/04/12/leetcode-merge-two-binary-trees/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta content=https://www.longluo.me/assets/avatar/sinc_3d_python.png itemprop=image> <meta content="Long Luo" itemprop=name> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content="Long Luo's Life Notes" itemprop=name> <meta content="A Curious Engineer" itemprop=description> </span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork> <meta content="undefined | Long Luo's Life Notes" itemprop=name> <meta itemprop=description> </span><header class=post-header><h2 itemprop="name headline" class=post-title><a class=post-title-link href=/blog/2022/04/12/leetcode-merge-two-binary-trees/ itemprop=url>[LeetCode][617. Merge Two Binary Trees] 4 Approaches: Recursion, Iteration, BFS and DFS</a></h2><div class=post-meta-container><div class=post-meta><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar"></i> </span> <span class=post-meta-item-text>发表于</span> <time itemprop="dateCreated datePublished" title="创建时间：2022-04-12 06:55:26" datetime=2022-04-12T06:55:26+08:00>2022-04-12</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar-check"></i> </span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2024-10-26 17:21:16" datetime=2024-10-26T17:21:16+08:00 itemprop=dateModified>2024-10-26</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-folder"></i> </span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing> <a href=/categories/Leetcode/ itemprop=url rel=index><span itemprop=name>Leetcode</span></a> </span> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-comment"></i> </span> <span class=post-meta-item-text>Waline：</span> <a href=/blog/2022/04/12/leetcode-merge-two-binary-trees/#waline itemprop=discussionUrl title=waline> <span class="post-comments-count waline-comment-count" data-path=/blog/2022/04/12/leetcode-merge-two-binary-trees/ itemprop=commentCount></span> </a> </span><span class=post-meta-item title=阅读次数> <span class=post-meta-item-icon> <i class="far fa-eye"></i> </span> <span class=post-meta-item-text>阅读次数：</span> <span class=waline-pageview-count data-path=/blog/2022/04/12/leetcode-merge-two-binary-trees/></span> </span><span class=post-meta-break></span><span class=post-meta-item title=本文字数> <span class=post-meta-item-icon> <i class="far fa-file-word"></i> </span> <span class=post-meta-item-text>本文字数：</span> <span>6.4k</span> </span><span class=post-meta-item title=阅读时长> <span class=post-meta-item-icon> <i class="far fa-clock"></i> </span> <span class=post-meta-item-text>阅读时长 ≈</span> <span>6 分钟</span> </span></div></div></header><div class=post-body itemprop=articleBody><p><strong><em>By Long Luo</em></strong><p>This article is the solution <a href=https://leetcode.com/problems/merge-two-binary-trees/solutions/1860049/4-approaches-recursion-iteration-bfs-and-dfs/ rel=noopener target=_blank>4 Approaches: Recursion, Iteration, BFS and DFS</a> of Problem <a href=https://leetcode.com/problems/merge-two-binary-trees rel=noopener target=_blank>617. Merge Two Binary Trees</a> .<p>Here are <strong>4</strong> approaches to solve this problem in Java: <strong>Recursion</strong>, <strong>Iteration</strong>, <strong>BFS</strong> and <strong>DFS</strong>.<h1 id=recursion>Recursion</h1><h2 id=method-1-new-tree>Method 1: New Tree</h2><p>We can create a new <strong>Tree</strong>, each <span class="math inline">\(\texttt{TreeNode}\)</span> value is sum of two nodes.<figure class="highlight java"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>static</span> TreeNode <span class="title function_">mergeTrees</span><span class=params>(TreeNode root1, TreeNode root2)</span> {</span><br><span class=line>    <span class=keyword>if</span> (root1 == <span class=literal>null</span>) {</span><br><span class=line>        <span class=keyword>return</span> root2;</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>if</span> (root2 == <span class=literal>null</span>) {</span><br><span class=line>        <span class=keyword>return</span> root1;</span><br><span class=line>    }</span><br><span class=line>    <span class=type>TreeNode</span> <span class=variable>merged</span> <span class=operator>=</span> <span class=keyword>new</span> <span class="title class_">TreeNode</span>(root1.val + root2.val);</span><br><span class=line>    merged.left = mergeTrees(root1.left, root2.left);</span><br><span class=line>    merged.right = mergeTrees(root1.right, root2.right);</span><br><span class=line>    <span class=keyword>return</span> merged;</span><br><span class=line>}</span><br></pre></table></figure><h2 id=analysis>Analysis</h2><ul><li><strong>Time Complexity</strong>: <span class="math inline">\(O(min(m, n))\)</span><li><strong>Space Complexity</strong>: <span class="math inline">\(O(min(m, n))\)</span></ul><h2 id=method-2>Method 2</h2><p>Traverse both the given trees in a <strong>PreOrder</strong> style.<p>At every step, check if the current node exists for both the trees. If one of these children happens to be null, we return the child of the other tree to be added as a child subtree to the calling parent node in the first tree.<p>We can add the values in the current nodes of both the trees and update the value in the current node of the first tree to reflect this sum obtained.<p>Then we call the <span class="math inline">\(\texttt{mergeTrees()}\)</span> with the left children and then with the right children of the current nodes of the two trees.<p>At the end, the first tree will represent the required resultant merged binary tree.<figure class="highlight java"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=keyword>static</span> TreeNode <span class="title function_">mergeTrees_rec</span><span class=params>(TreeNode root1, TreeNode root2)</span> {</span><br><span class=line>    <span class=keyword>if</span> (root1 == <span class=literal>null</span>) {</span><br><span class=line>        <span class=keyword>return</span> root2;</span><br><span class=line>    }</span><br><span class=line>    <span class=keyword>if</span> (root2 == <span class=literal>null</span>) {</span><br><span class=line>        <span class=keyword>return</span> root1;</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=keyword>if</span> (root1 != <span class=literal>null</span>) {</span><br><span class=line>        root1.val += root2.val;</span><br><span class=line>        root1.left = mergeTrees_rec(root1.left, root2.left);</span><br><span class=line>        root1.right = mergeTrees_rec(root1.right, root2.right);</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=keyword>return</span> root1;</span><br><span class=line>}</span><br></pre></table></figure><h2 id=analysis-1>Analysis</h2><ul><li><strong>Time Complexity</strong>: <span class="math inline">\(O(min(m, n))\)</span><li><strong>Space Complexity</strong>: <span class="math inline">\(O(min(m, n))\)</span></ul><!--noindex--><div class=post-button><a class=btn href=/blog/2022/04/12/leetcode-merge-two-binary-trees/#more rel=contents> 阅读全文 » </a></div><!--/noindex--></div><footer class=post-footer><div class=post-eof></div></footer></article></div><div class=post-block><article class=post-content itemscope itemtype=http://schema.org/Article><link href=https://www.longluo.me/blog/2022/04/09/topological-sorting/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta content=https://www.longluo.me/assets/avatar/sinc_3d_python.png itemprop=image> <meta content="Long Luo" itemprop=name> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content="Long Luo's Life Notes" itemprop=name> <meta content="A Curious Engineer" itemprop=description> </span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork> <meta content="undefined | Long Luo's Life Notes" itemprop=name> <meta itemprop=description> </span><header class=post-header><h2 itemprop="name headline" class=post-title><a class=post-title-link href=/blog/2022/04/09/topological-sorting/ itemprop=url>拓扑排序(Topological Sorting)</a></h2><div class=post-meta-container><div class=post-meta><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar"></i> </span> <span class=post-meta-item-text>发表于</span> <time itemprop="dateCreated datePublished" title="创建时间：2022-04-09 23:37:49" datetime=2022-04-09T23:37:49+08:00>2022-04-09</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar-check"></i> </span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2023-11-14 22:24:40" datetime=2023-11-14T22:24:40+08:00 itemprop=dateModified>2023-11-14</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-folder"></i> </span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing> <a href=/categories/Data-Structures-and-Algorithms/ itemprop=url rel=index><span itemprop=name>Data Structures and Algorithms</span></a> </span> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-comment"></i> </span> <span class=post-meta-item-text>Waline：</span> <a href=/blog/2022/04/09/topological-sorting/#waline itemprop=discussionUrl title=waline> <span class="post-comments-count waline-comment-count" data-path=/blog/2022/04/09/topological-sorting/ itemprop=commentCount></span> </a> </span><span class=post-meta-item title=阅读次数> <span class=post-meta-item-icon> <i class="far fa-eye"></i> </span> <span class=post-meta-item-text>阅读次数：</span> <span class=waline-pageview-count data-path=/blog/2022/04/09/topological-sorting/></span> </span><span class=post-meta-break></span><span class=post-meta-item title=本文字数> <span class=post-meta-item-icon> <i class="far fa-file-word"></i> </span> <span class=post-meta-item-text>本文字数：</span> <span>857</span> </span><span class=post-meta-item title=阅读时长> <span class=post-meta-item-icon> <i class="far fa-clock"></i> </span> <span class=post-meta-item-text>阅读时长 ≈</span> <span>1 分钟</span> </span></div></div></header><div class=post-body itemprop=articleBody><p><strong><em>By Long Luo</em></strong><p><a href=https://leetcode.cn/problems/course-schedule/ rel=noopener target=_blank>207. 课程表</a><p>代码如下所示：<figure class="highlight java"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br></pre><td class=code><pre><span class=line><span class=keyword>public</span> <span class=type>boolean</span> <span class="title function_">canFinish</span><span class=params>(<span class=type>int</span> numCourses, <span class=type>int</span>[][] prerequisites)</span> {</span><br><span class=line>    <span class=keyword>if</span> (prerequisites == <span class=literal>null</span> || prerequisites.length == <span class=number>0</span> || prerequisites[<span class=number>0</span>].length == <span class=number>0</span>) {</span><br><span class=line>        <span class=keyword>return</span> <span class=literal>true</span>;</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=type>int</span>[] indegree = <span class=keyword>new</span> <span class="title class_">int</span>[numCourses];</span><br><span class=line>    <span class=keyword>for</span> (<span class=type>int</span>[] pre : prerequisites) {</span><br><span class=line>        indegree[pre[<span class=number>0</span>]]++;</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    Queue&LTInteger> queue = <span class=keyword>new</span> <span class="title class_">LinkedList</span><>();</span><br><span class=line>    <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i < numCourses; i++) {</span><br><span class=line>        <span class=keyword>if</span> (indegree[i] == <span class=number>0</span>) {</span><br><span class=line>            queue.offer(i);</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=keyword>while</span> (!queue.isEmpty()) {</span><br><span class=line>        <span class=type>Integer</span> <span class=variable>currId</span> <span class=operator>=</span> queue.poll();</span><br><span class=line>        numCourses--;</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span>[] pre : prerequisites) {</span><br><span class=line>            <span class=keyword>if</span> (pre[<span class=number>1</span>] == currId) {</span><br><span class=line>                indegree[pre[<span class=number>0</span>]]--;</span><br><span class=line>                <span class=keyword>if</span> (indegree[pre[<span class=number>0</span>]] == <span class=number>0</span>) {</span><br><span class=line>                    queue.offer(pre[<span class=number>0</span>]);</span><br><span class=line>                }</span><br><span class=line>            }</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=keyword>return</span> numCourses == <span class=number>0</span>;</span><br><span class=line>}</span><br></pre></table></figure><h2 id=复杂度分析>复杂度分析</h2><ul><li>时间复杂度：<span class="math inline">\(O(V + E)\)</span>，其中 <span class="math inline">\(n\)</span> 为字符串长度。<li>空间复杂度：<span class="math inline">\(O(V)\)</span>。哈希表和字符串均需要存储 <span class="math inline">\(n\)</span> 个元素。</ul><h1 id=参考资料>参考资料</h1><ol type=1><li><a href=https://www.geeksforgeeks.org/topological-sorting/ rel=noopener target=_blank>Topological Sorting</a><li><a href=https://oi-wiki.org/graph/topo/ rel=noopener target=_blank>拓扑排序</a><li><a href=https://www.cs.usfca.edu/~galles/visualization/TopoSortIndegree.html rel=noopener target=_blank>Topological Sort (Indegree)</a><li><a href=https://www.cs.usfca.edu/~galles/visualization/TopoSortDFS.html rel=noopener target=_blank>Topological Sort (DFS)</a></ol></div><footer class=post-footer><div class=post-eof></div></footer></article></div><div class=post-block><article class=post-content itemscope itemtype=http://schema.org/Article><link href=https://www.longluo.me/blog/2022/04/07/leetcode-multiply-strings/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta content=https://www.longluo.me/assets/avatar/sinc_3d_python.png itemprop=image> <meta content="Long Luo" itemprop=name> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content="Long Luo's Life Notes" itemprop=name> <meta content="A Curious Engineer" itemprop=description> </span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork> <meta content="undefined | Long Luo's Life Notes" itemprop=name> <meta itemprop=description> </span><header class=post-header><h2 itemprop="name headline" class=post-title><a class=post-title-link href=/blog/2022/04/07/leetcode-multiply-strings/ itemprop=url>[LeetCode][43. 字符串相乘] 大数乘法的快速傅里叶变换(FFT) 和 快速数论变换(NTT)解法</a></h2><div class=post-meta-container><div class=post-meta><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar"></i> </span> <span class=post-meta-item-text>发表于</span> <time itemprop="dateCreated datePublished" title="创建时间：2022-04-07 07:41:10" datetime=2022-04-07T07:41:10+08:00>2022-04-07</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar-check"></i> </span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2024-10-25 22:16:59" datetime=2024-10-25T22:16:59+08:00 itemprop=dateModified>2024-10-25</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-folder"></i> </span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing> <a href=/categories/Leetcode/ itemprop=url rel=index><span itemprop=name>Leetcode</span></a> </span> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-comment"></i> </span> <span class=post-meta-item-text>Waline：</span> <a href=/blog/2022/04/07/leetcode-multiply-strings/#waline itemprop=discussionUrl title=waline> <span class="post-comments-count waline-comment-count" data-path=/blog/2022/04/07/leetcode-multiply-strings/ itemprop=commentCount></span> </a> </span><span class=post-meta-item title=阅读次数> <span class=post-meta-item-icon> <i class="far fa-eye"></i> </span> <span class=post-meta-item-text>阅读次数：</span> <span class=waline-pageview-count data-path=/blog/2022/04/07/leetcode-multiply-strings/></span> </span><span class=post-meta-break></span><span class=post-meta-item title=本文字数> <span class=post-meta-item-icon> <i class="far fa-file-word"></i> </span> <span class=post-meta-item-text>本文字数：</span> <span>11k</span> </span><span class=post-meta-item title=阅读时长> <span class=post-meta-item-icon> <i class="far fa-clock"></i> </span> <span class=post-meta-item-text>阅读时长 ≈</span> <span>10 分钟</span> </span></div></div></header><div class=post-body itemprop=articleBody><p><strong><em>By Long Luo</em></strong><p><a href=https://leetcode.cn/ rel=noopener target=_blank>Leetcode</a> <a href=https://leetcode.cn/problems/multiply-strings/ rel=noopener target=_blank>43. 字符串相乘</a> 其实就是大数乘法，常规的大数方法可以参考 <a href=http://www.longluo.me/blog/2019/09/20/the-algorithm-of-large-number-operations/>超大数字的四则运算是如何实现的呢？</a> ，还可以使用快速傅里叶变换 <span class="math inline">\((\textit{FFT})\)</span> 和快速数论变换 <span class="math inline">\((\textit{NTT})\)</span> 实现。<h1 id=快速傅里叶变换fft>快速傅里叶变换(FFT)</h1><p>快速傅里叶变换 <span class="math inline">\((\textit{FFT})\)</span> 详细解释可以参考这几篇文章：<p><a href=http://www.longluo.me/blog/2022/04/02/fft/>快速傅里叶变换(FFT)算法</a><p><a href=http://www.longluo.me/blog/2022/04/29/fft-optimization/>快速傅里叶变换(FFT)算法的实现及优化</a><p>下面分别给出<strong>递归版</strong>和<strong>迭代版</strong>代码实现：<h2 id=递归recursion>递归(Recursion)</h2><figure class="highlight cpp"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br><span class=line>73</span><br><span class=line>74</span><br><span class=line>75</span><br><span class=line>76</span><br><span class=line>77</span><br><span class=line>78</span><br><span class=line>79</span><br><span class=line>80</span><br><span class=line>81</span><br><span class=line>82</span><br><span class=line>83</span><br><span class=line>84</span><br><span class=line>85</span><br><span class=line>86</span><br><span class=line>87</span><br><span class=line>88</span><br><span class=line>89</span><br><span class=line>90</span><br><span class=line>91</span><br><span class=line>92</span><br><span class=line>93</span><br><span class=line>94</span><br><span class=line>95</span><br><span class=line>96</span><br><span class=line>97</span><br><span class=line>98</span><br><span class=line>99</span><br><span class=line>100</span><br><span class=line>101</span><br><span class=line>102</span><br><span class=line>103</span><br><span class=line>104</span><br><span class=line>105</span><br><span class=line>106</span><br><span class=line>107</span><br><span class=line>108</span><br><span class=line>109</span><br><span class=line>110</span><br><span class=line>111</span><br><span class=line>112</span><br><span class=line>113</span><br><span class=line>114</span><br><span class=line>115</span><br><span class=line>116</span><br><span class=line>117</span><br><span class=line>118</span><br><span class=line>119</span><br><span class=line>120</span><br><span class=line>121</span><br><span class=line>122</span><br><span class=line>123</span><br><span class=line>124</span><br><span class=line>125</span><br><span class=line>126</span><br><span class=line>127</span><br><span class=line>128</span><br><span class=line>129</span><br><span class=line>130</span><br><span class=line>131</span><br><span class=line>132</span><br><span class=line>133</span><br><span class=line>134</span><br><span class=line>135</span><br><span class=line>136</span><br><span class=line>137</span><br><span class=line>138</span><br><span class=line>139</span><br><span class=line>140</span><br><span class=line>141</span><br><span class=line>142</span><br><span class=line>143</span><br><span class=line>144</span><br><span class=line>145</span><br><span class=line>146</span><br><span class=line>147</span><br><span class=line>148</span><br><span class=line>149</span><br><span class=line>150</span><br><span class=line>151</span><br><span class=line>152</span><br><span class=line>153</span><br><span class=line>154</span><br><span class=line>155</span><br><span class=line>156</span><br><span class=line>157</span><br><span class=line>158</span><br><span class=line>159</span><br></pre><td class=code><pre><span class=line><span class=keyword>class</span> <span class="title class_">Solution</span> {</span><br><span class=line><span class=keyword>public</span>:</span><br><span class=line>    <span class=type>const</span> <span class=type>double</span> PI = <span class=built_in>acos</span>(<span class=number>-1.0</span>);  <span class=comment>// PI = arccos(-1)</span></span><br><span class=line></span><br><span class=line>    <span class=keyword>struct</span> <span class="title class_">Complex</span> {</span><br><span class=line>        <span class=type>double</span> re, im;</span><br><span class=line></span><br><span class=line>        <span class=built_in>Complex</span>(<span class=type>double</span> _re = <span class=number>0.0</span>, <span class=type>double</span> _im = <span class=number>0.0</span>) {</span><br><span class=line>            re = _re;</span><br><span class=line>            im = _im;</span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        <span class=function><span class=keyword>inline</span> <span class=type>void</span> <span class=title>real</span><span class=params>(<span class=type>const</span> <span class=type>double</span> &re)</span> </span>{</span><br><span class=line>            <span class=keyword>this</span>->re = re;</span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        <span class=function><span class=keyword>inline</span> <span class=type>double</span> <span class=title>real</span><span class=params>()</span> </span>{</span><br><span class=line>            <span class=keyword>return</span> re;</span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        <span class=function><span class=keyword>inline</span> <span class=type>void</span> <span class=title>imag</span><span class=params>(<span class=type>const</span> <span class=type>double</span> &im)</span> </span>{</span><br><span class=line>            <span class=keyword>this</span>->im = im;</span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        <span class=function><span class=keyword>inline</span> <span class=type>double</span> <span class=title>imag</span><span class=params>()</span> </span>{</span><br><span class=line>            <span class=keyword>return</span> im;</span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        <span class=keyword>inline</span> Complex <span class=keyword>operator</span>-(<span class=type>const</span> Complex &other) <span class=type>const</span> {</span><br><span class=line>            <span class=keyword>return</span> <span class=built_in>Complex</span>(re - other.re, im - other.im);</span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        <span class=keyword>inline</span> Complex <span class=keyword>operator</span>+(<span class=type>const</span> Complex &other) <span class=type>const</span> {</span><br><span class=line>            <span class=keyword>return</span> <span class=built_in>Complex</span>(re + other.re, im + other.im);</span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        <span class=keyword>inline</span> Complex <span class=keyword>operator</span>*(<span class=type>const</span> Complex &other) <span class=type>const</span> {</span><br><span class=line>            <span class=keyword>return</span> <span class=built_in>Complex</span>(re * other.re - im * other.im, re * other.im + im * other.re);</span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        <span class=keyword>inline</span> <span class=type>void</span> <span class=keyword>operator</span>/(<span class=type>const</span> <span class=type>double</span> &div) {</span><br><span class=line>            re /= div;</span><br><span class=line>            im /= div;</span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        <span class=keyword>inline</span> <span class=type>void</span> <span class=keyword>operator</span>*=(<span class=type>const</span> Complex &other) {</span><br><span class=line>            *<span class=keyword>this</span> = <span class=built_in>Complex</span>(re * other.re - im * other.im, re * other.im + im * other.re);</span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        <span class=keyword>inline</span> <span class=type>void</span> <span class=keyword>operator</span>+=(<span class=type>const</span> Complex &other) {</span><br><span class=line>            <span class=keyword>this</span>->re += other.re;</span><br><span class=line>            <span class=keyword>this</span>->im += other.im;</span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        <span class=function><span class=keyword>inline</span> Complex <span class=title>conjugate</span><span class=params>()</span> </span>{</span><br><span class=line>            <span class=keyword>return</span> <span class=built_in>Complex</span>(re, -im);</span><br><span class=line>        }</span><br><span class=line>    };</span><br><span class=line></span><br><span class=line>    <span class=comment>/**</span></span><br><span class=line><span class=comment>     * FFT Recursion 实现</span></span><br><span class=line><span class=comment>     *</span></span><br><span class=line><span class=comment>     * @param a</span></span><br><span class=line><span class=comment>     * @param invert true means IFFT, else FFT</span></span><br><span class=line><span class=comment>     * @return im</span></span><br><span class=line><span class=comment>     */</span></span><br><span class=line>    <span class=function>vector&LTComplex> <span class=title>FFT</span><span class=params>(vector&LTComplex> &a, <span class=type>bool</span> invert)</span> </span>{</span><br><span class=line>        <span class=comment>//第一个参数为一个多项式的系数, 以次数从小到大的顺序, 向量中每一项的实部为该项系数</span></span><br><span class=line>        <span class=type>int</span> n = a.<span class=built_in>size</span>();</span><br><span class=line></span><br><span class=line>        <span class=comment>// 如果当前多项式仅有常数项时直接返回多项式的值</span></span><br><span class=line>        <span class=keyword>if</span> (n == <span class=number>1</span>) {</span><br><span class=line>            <span class=keyword>return</span> a;</span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        <span class=function>vector&LTComplex> <span class=title>Pe</span><span class=params>(n / <span class=number>2</span>)</span>, <span class=title>Po</span><span class=params>(n / <span class=number>2</span>)</span></span>; <span class=comment>// 文中的Pe与Po的系数表示法</span></span><br><span class=line></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> i = <span class=number>0</span>; <span class=number>2</span> * i < n; i++) {</span><br><span class=line>            Pe[i] = a[<span class=number>2</span> * i];</span><br><span class=line>            Po[i] = a[<span class=number>2</span> * i + <span class=number>1</span>];</span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        <span class=comment>// Divide 分治</span></span><br><span class=line>        <span class=comment>// 递归求 ye = Pe(xi), yo = Po(xi)</span></span><br><span class=line>        vector&LTComplex> ye = <span class=built_in>FFT</span>(Pe, invert);</span><br><span class=line>        vector&LTComplex> yo = <span class=built_in>FFT</span>(Po, invert);</span><br><span class=line></span><br><span class=line>        <span class=comment>// Combine</span></span><br><span class=line>        <span class=function>vector&LTComplex> <span class=title>y</span><span class=params>(n)</span></span>;</span><br><span class=line></span><br><span class=line>        <span class=comment>// Root of Units</span></span><br><span class=line>        <span class=type>double</span> ang = <span class=number>2</span> * PI / n * (invert ? <span class=number>-1</span> : <span class=number>1</span>);</span><br><span class=line>        <span class=function>Complex <span class=title>wn</span><span class=params>(cos(ang), sin(ang))</span></span>; <span class=comment>// wn为第1个n次复根,</span></span><br><span class=line>        <span class=function>Complex <span class=title>w</span><span class=params>(<span class=number>1</span>, <span class=number>0</span>)</span></span>;   <span class=comment>// w为第零0个n次复根, 即为 1</span></span><br><span class=line></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> i = <span class=number>0</span>; i < n / <span class=number>2</span>; i++) {</span><br><span class=line>            y[i] = ye[i] + w * yo[i];  <span class=comment>// 求出P(xi)</span></span><br><span class=line>            y[i + n / <span class=number>2</span>] = ye[i] - w * yo[i]; <span class=comment>// 由单位复根的性质可知第k个根与第k + n/2个根互为相反数</span></span><br><span class=line>            w = w * wn;  <span class=comment>// w * wn 得到下一个复根</span></span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        <span class=keyword>return</span> y;  <span class=comment>// 返回最终的系数</span></span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=function>string <span class=title>multiply</span><span class=params>(string num1, string num2)</span> </span>{</span><br><span class=line>        <span class=keyword>if</span> (num1 == <span class=string>"0"</span> || num2 == <span class=string>"0"</span>) {</span><br><span class=line>            <span class=keyword>return</span> <span class=string>"0"</span>;</span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        <span class=type>int</span> len1 = num1.<span class=built_in>size</span>();</span><br><span class=line>        <span class=type>int</span> len2 = num2.<span class=built_in>size</span>();</span><br><span class=line></span><br><span class=line>        <span class=type>int</span> n = <span class=number>1</span>;</span><br><span class=line>        <span class=keyword>while</span> (n < len1 + len2) {</span><br><span class=line>            n = n << <span class=number>1</span>;</span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        <span class=function>vector&LTComplex> <span class=title>a</span><span class=params>(n)</span></span>;</span><br><span class=line>        <span class=function>vector&LTComplex> <span class=title>b</span><span class=params>(n)</span></span>;</span><br><span class=line></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> i = len1 - <span class=number>1</span>; i >= <span class=number>0</span>; i--) {</span><br><span class=line>            a[i] = <span class=built_in>Complex</span>(num1[len1 - <span class=number>1</span> - i] - <span class=string>'0'</span>, <span class=number>0</span>);</span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> i = len2 - <span class=number>1</span>; i >= <span class=number>0</span>; i--) {</span><br><span class=line>            b[i] = <span class=built_in>Complex</span>(num2[len2 - <span class=number>1</span> - i] - <span class=string>'0'</span>, <span class=number>0</span>);</span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        a = <span class=built_in>FFT</span>(a, <span class=literal>false</span>);</span><br><span class=line>        b = <span class=built_in>FFT</span>(b, <span class=literal>false</span>);</span><br><span class=line></span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> i = <span class=number>0</span>; i < n; i++) {</span><br><span class=line>            a[i] = a[i] * b[i];</span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        a = <span class=built_in>FFT</span>(a, <span class=literal>true</span>);</span><br><span class=line></span><br><span class=line>        string ans;</span><br><span class=line>        <span class=type>int</span> carry = <span class=number>0</span>;</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> i = <span class=number>0</span>; i < n; i++) {</span><br><span class=line>            <span class=type>int</span> sum = <span class=built_in>round</span>(<span class=built_in>round</span>(a[i].re) / n) + carry;</span><br><span class=line>            carry = sum / <span class=number>10</span>;</span><br><span class=line>            ans += sum % <span class=number>10</span> + <span class=string>'0'</span>;</span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        <span class=keyword>if</span> (carry > <span class=number>0</span>) {</span><br><span class=line>            ans += carry % <span class=number>10</span> + <span class=string>'0'</span>;</span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        <span class=type>int</span> idx = ans.<span class=built_in>size</span>() - <span class=number>1</span>;</span><br><span class=line>        <span class=keyword>while</span> (ans[idx] == <span class=string>'0'</span> && idx > <span class=number>0</span>) {</span><br><span class=line>            idx--;</span><br><span class=line>        }</span><br><span class=line></span><br><span class=line>        ans = ans.<span class=built_in>substr</span>(<span class=number>0</span>, idx + <span class=number>1</span>);</span><br><span class=line>        <span class=built_in>reverse</span>(ans.<span class=built_in>begin</span>(), ans.<span class=built_in>end</span>());</span><br><span class=line>        <span class=keyword>return</span> ans;</span><br><span class=line>    }</span><br><span class=line>}</span><br></pre></table></figure><!--noindex--><div class=post-button><a class=btn href=/blog/2022/04/07/leetcode-multiply-strings/#more rel=contents> 阅读全文 » </a></div><!--/noindex--></div><footer class=post-footer><div class=post-eof></div></footer></article></div><div class=post-block><article class=post-content itemscope itemtype=http://schema.org/Article><link href=https://www.longluo.me/blog/2022/04/06/leetcode-arranging-coins/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta content=https://www.longluo.me/assets/avatar/sinc_3d_python.png itemprop=image> <meta content="Long Luo" itemprop=name> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content="Long Luo's Life Notes" itemprop=name> <meta content="A Curious Engineer" itemprop=description> </span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork> <meta content="undefined | Long Luo's Life Notes" itemprop=name> <meta itemprop=description> </span><header class=post-header><h2 itemprop="name headline" class=post-title><a class=post-title-link href=/blog/2022/04/06/leetcode-arranging-coins/ itemprop=url>[Leetcode][441. 排列硬币] 4种解法：暴力，二分查找，数学，位运算</a></h2><div class=post-meta-container><div class=post-meta><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar"></i> </span> <span class=post-meta-item-text>发表于</span> <time itemprop="dateCreated datePublished" title="创建时间：2022-04-06 08:45:53" datetime=2022-04-06T08:45:53+08:00>2022-04-06</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar-check"></i> </span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2024-10-26 17:36:14" datetime=2024-10-26T17:36:14+08:00 itemprop=dateModified>2024-10-26</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-folder"></i> </span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing> <a href=/categories/Leetcode/ itemprop=url rel=index><span itemprop=name>Leetcode</span></a> </span> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-comment"></i> </span> <span class=post-meta-item-text>Waline：</span> <a href=/blog/2022/04/06/leetcode-arranging-coins/#waline itemprop=discussionUrl title=waline> <span class="post-comments-count waline-comment-count" data-path=/blog/2022/04/06/leetcode-arranging-coins/ itemprop=commentCount></span> </a> </span><span class=post-meta-item title=阅读次数> <span class=post-meta-item-icon> <i class="far fa-eye"></i> </span> <span class=post-meta-item-text>阅读次数：</span> <span class=waline-pageview-count data-path=/blog/2022/04/06/leetcode-arranging-coins/></span> </span><span class=post-meta-break></span><span class=post-meta-item title=本文字数> <span class=post-meta-item-icon> <i class="far fa-file-word"></i> </span> <span class=post-meta-item-text>本文字数：</span> <span>2k</span> </span><span class=post-meta-item title=阅读时长> <span class=post-meta-item-icon> <i class="far fa-clock"></i> </span> <span class=post-meta-item-text>阅读时长 ≈</span> <span>2 分钟</span> </span></div></div></header><div class=post-body itemprop=articleBody><p><strong><em>By Long Luo</em></strong><p><a href=https://leetcode-cn.com/ rel=noopener target=_blank>Leetcode</a> <a href=https://leetcode-cn.com/problems/arranging-coins rel=noopener target=_blank>441. 排列硬币</a> 的题解，有<strong>4</strong>种解决方法，前<strong>3</strong>种比较容易想到，<a href=https://leetcode-cn.com/problems/arranging-coins/solution/by-longluo-rtzs/ rel=noopener target=_blank>位运算</a> 比较难想到。<h1 id=方法一暴力>方法一：暴力</h1><p><strong>思路和算法</strong><p>模拟硬币排列过程，从 <span class="math inline">\(ans = 1\)</span> 开始，逐行 <span class="math inline">\(ans + 1\)</span>，当硬币不足排列当前行时退出，注意返回时需要 $ ans - 1$，因为在排列完上一行时已经 <span class="math inline">\(+1\)</span> 了，返回时需要 <span class="math inline">\(-1\)</span>。<figure class="highlight java"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre><td class=code><pre><span class=line><span class=comment>// BF O(sqrtn) O(1)</span></span><br><span class=line><span class=keyword>public</span> <span class=type>int</span> <span class="title function_">arrangeCoins_bf</span><span class=params>(<span class=type>int</span> n)</span> {</span><br><span class=line>	<span class=type>int</span> <span class=variable>ans</span> <span class=operator>=</span> <span class=number>1</span>;</span><br><span class=line>	<span class=keyword>while</span> (n >= ans) {</span><br><span class=line>		n -= ans;</span><br><span class=line>		ans++;</span><br><span class=line>	}</span><br><span class=line></span><br><span class=line>	<span class=keyword>return</span> ans - <span class=number>1</span>;</span><br><span class=line>}</span><br></pre></table></figure><h2 id=复杂度分析>复杂度分析</h2><ul><li><strong>时间复杂度</strong>：<span class="math inline">\(O(\sqrt{n})\)</span>，因为总行数一定不超过 <span class="math inline">\(2(\sqrt{n}+1)\)</span>。<li><strong>空间复杂度</strong>：<span class="math inline">\(O(1)\)</span>。</ul><h1 id=方法二二分查找>方法二：二分查找</h1><p><strong>思路和算法</strong><p>第 <span class="math inline">\(i\)</span> 行必须有 <span class="math inline">\(i\)</span> 个硬币（最后一行除外），总行数的增加所需要的硬币数是<strong>单调递增</strong>的，到第 <span class="math inline">\(i\)</span> 行时总共使用的硬币数量为 <span class="math inline">\(total = \frac{i \times (i + 1)}{2}\)</span>，我们的目标是寻找一个 <span class="math inline">\(i\)</span> 使得 <span class="math inline">\(total \leq n\)</span>，可以利用二分加速在 <span class="math inline">\(1\)</span> 到 <span class="math inline">\(\dfrac{n + 1}{2}\)</span> 之间查找。<figure class="highlight java"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br></pre><td class=code><pre><span class=line><span class=comment>// BS O(logn) O(1)</span></span><br><span class=line><span class=keyword>public</span> <span class=type>int</span> <span class="title function_">arrangeCoins_bs</span><span class=params>(<span class=type>int</span> n)</span> {</span><br><span class=line>	<span class=type>long</span> <span class=variable>left</span> <span class=operator>=</span> <span class=number>1</span>;</span><br><span class=line>	<span class=type>long</span> <span class=variable>right</span> <span class=operator>=</span> ((<span class=type>long</span>) n + <span class=number>1</span>) / <span class=number>2</span>;</span><br><span class=line>	<span class=keyword>while</span> (left < right) {</span><br><span class=line>		<span class=type>long</span> <span class=variable>mid</span> <span class=operator>=</span> left + (right - left + <span class=number>1</span>) / <span class=number>2</span>;</span><br><span class=line>		<span class=type>long</span> <span class=variable>sum</span> <span class=operator>=</span> mid * (mid + <span class=number>1</span>) / <span class=number>2</span>;</span><br><span class=line>		<span class=keyword>if</span> (sum <= n) {</span><br><span class=line>			left = mid;</span><br><span class=line>		} <span class=keyword>else</span> {</span><br><span class=line>			right = mid - <span class=number>1</span>;</span><br><span class=line>		}</span><br><span class=line>	}</span><br><span class=line></span><br><span class=line>	<span class=keyword>return</span> (<span class=type>int</span>) left;</span><br><span class=line>}</span><br></pre></table></figure><h2 id=复杂度分析-1>复杂度分析</h2><ul><li><strong>时间复杂度</strong>：<span class="math inline">\(O(logn)\)</span>。<li><strong>空间复杂度</strong>：<span class="math inline">\(O(1)\)</span>。</ul><!--noindex--><div class=post-button><a class=btn href=/blog/2022/04/06/leetcode-arranging-coins/#more rel=contents> 阅读全文 » </a></div><!--/noindex--></div><footer class=post-footer><div class=post-eof></div></footer></article></div><div class=post-block><article class=post-content itemscope itemtype=http://schema.org/Article><link href=https://www.longluo.me/blog/2022/04/05/leetcode-container-with-most-water/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta content=https://www.longluo.me/assets/avatar/sinc_3d_python.png itemprop=image> <meta content="Long Luo" itemprop=name> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content="Long Luo's Life Notes" itemprop=name> <meta content="A Curious Engineer" itemprop=description> </span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork> <meta content="undefined | Long Luo's Life Notes" itemprop=name> <meta itemprop=description> </span><header class=post-header><h2 itemprop="name headline" class=post-title><a class=post-title-link href=/blog/2022/04/05/leetcode-container-with-most-water/ itemprop=url>[LeetCode][11. Container With Most Water] 2 Approaches: Brute Force and Two Pointers with Image Explanation</a></h2><div class=post-meta-container><div class=post-meta><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar"></i> </span> <span class=post-meta-item-text>发表于</span> <time itemprop="dateCreated datePublished" title="创建时间：2022-04-05 07:45:11" datetime=2022-04-05T07:45:11+08:00>2022-04-05</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar-check"></i> </span> <span class=post-meta-item-text>更新于</span> <time title="修改时间：2024-10-28 21:25:26" datetime=2024-10-28T21:25:26+08:00 itemprop=dateModified>2024-10-28</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-folder"></i> </span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing> <a href=/categories/Leetcode/ itemprop=url rel=index><span itemprop=name>Leetcode</span></a> </span> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-comment"></i> </span> <span class=post-meta-item-text>Waline：</span> <a href=/blog/2022/04/05/leetcode-container-with-most-water/#waline itemprop=discussionUrl title=waline> <span class="post-comments-count waline-comment-count" data-path=/blog/2022/04/05/leetcode-container-with-most-water/ itemprop=commentCount></span> </a> </span><span class=post-meta-item title=阅读次数> <span class=post-meta-item-icon> <i class="far fa-eye"></i> </span> <span class=post-meta-item-text>阅读次数：</span> <span class=waline-pageview-count data-path=/blog/2022/04/05/leetcode-container-with-most-water/></span> </span><span class=post-meta-break></span><span class=post-meta-item title=本文字数> <span class=post-meta-item-icon> <i class="far fa-file-word"></i> </span> <span class=post-meta-item-text>本文字数：</span> <span>2.5k</span> </span><span class=post-meta-item title=阅读时长> <span class=post-meta-item-icon> <i class="far fa-clock"></i> </span> <span class=post-meta-item-text>阅读时长 ≈</span> <span>2 分钟</span> </span></div></div></header><div class=post-body itemprop=articleBody><p><strong><em>By Long Luo</em></strong><p>This article is the solution <a href=https://leetcode.com/problems/container-with-most-water/solutions/1915231/2-approaches-brute-force-and-two-pointers-with-image-explanation/ rel=noopener target=_blank>2 Approaches: Brute Force and Two Pointers with Image Explanation</a> of Problem <a href=https://leetcode.com/problems/container-with-most-water/ rel=noopener target=_blank>11. Container With Most Water</a> .<p>Here shows <strong>2</strong> Approaches to slove this problem: <strong>Brute Force</strong> and <strong>Two Pointers</strong>.<h1 id=intuition>Intuition</h1><figure><img alt="Problem 11" src=https://www.longluo.me/assets/blog/images/leetcode/leetcode_11_container_with_most_water.jpg><figcaption aria-hidden=true>Problem 11</figcaption></figure><p>Suppose two pointers <span class="math inline">\(i\)</span>, <span class="math inline">\(j\)</span>, the heights of the vertical lines are <span class="math inline">\(h[i]\)</span>, <span class="math inline">\(h[j]\)</span>, and the area in this state is <span class="math inline">\(S(i, j)\)</span>.<p>As we all known, the container is determined by the short line, the area formula can be easily obtained:<p><span class="math display">\[ S(i, j) = min(h[i], h[j]) \times (j - i) \]</span><h1 id=brute-froce>Brute Froce</h1><p>It’s easy to use the brute force approach, the total states is <span class="math inline">\(C(n, 2)= n \times (n - 1) / 2\)</span>, we have to <strong>enumerate all these states</strong> to get the max area.<p>The time complexity is <span class="math inline">\(O(n^2)\)</span>, exceed the time limit.<figure class="highlight java"><table><tbody><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br></pre><td class=code><pre><span class=line><span class=comment>// BF time: O(n^2) space: O(1)</span></span><br><span class=line><span class=comment>// TimeOut</span></span><br><span class=line><span class=keyword>public</span> <span class=keyword>static</span> <span class=type>int</span> <span class="title function_">maxArea_bf</span><span class=params>(<span class=type>int</span>[] height)</span> {</span><br><span class=line>    <span class=type>int</span> <span class=variable>len</span> <span class=operator>=</span> height.length;</span><br><span class=line>    <span class=type>int</span> <span class=variable>max</span> <span class=operator>=</span> <span class=number>0</span>;</span><br><span class=line>    <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>i</span> <span class=operator>=</span> <span class=number>0</span>; i < len - <span class=number>1</span>; i++) {</span><br><span class=line>        <span class=keyword>for</span> (<span class=type>int</span> <span class=variable>j</span> <span class=operator>=</span> i + <span class=number>1</span>; j < len; j++) {</span><br><span class=line>            <span class=type>int</span> <span class=variable>area</span> <span class=operator>=</span> Math.min(height[i], height[j]) * (j - i);</span><br><span class=line>            max = Math.max(max, area);</span><br><span class=line>        }</span><br><span class=line>    }</span><br><span class=line></span><br><span class=line>    <span class=keyword>return</span> max;</span><br><span class=line>}</span><br></pre></table></figure><h2 id=analysis>Analysis</h2><ul><li><strong>Time Complexity</strong>: <span class="math inline">\(O(n^2)\)</span><li><strong>Space Complexity</strong>: <span class="math inline">\(O(1)\)</span></ul><!--noindex--><div class=post-button><a class=btn href=/blog/2022/04/05/leetcode-container-with-most-water/#more rel=contents> 阅读全文 » </a></div><!--/noindex--></div><footer class=post-footer><div class=post-eof></div></footer></article></div><nav class=pagination><a class="extend prev" aria-label=上一页 href=/page/18/ rel=prev title=上一页><i class="fa fa-angle-left"></i></a><a class=page-number href=/>1</a><span class=space>…</span><a class=page-number href=/page/18/>18</a><span class="page-number current">19</span><a class=page-number href=/page/20/>20</a><span class=space>…</span><a class=page-number href=/page/70/>70</a><a class="extend next" aria-label=下一页 href=/page/20/ rel=next title=下一页><i class="fa fa-angle-right"></i></a></nav></div></main><footer class=footer><div class=footer-inner><div class=copyright>© 2013 – <span itemprop=copyrightYear>2025</span><span class=with-love> <i class="fa fa-heart"></i> </span><span class=author itemprop=copyrightHolder>Long Luo</span></div><div class=wordcount><span class=post-meta-item> <span class=post-meta-item-icon> <i class="fa fa-chart-line"></i> </span> <span title=站点总字数>1.6m</span> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="fa fa-coffee"></i> </span> <span title=站点阅读时长>24:19</span> </span></div><div class=busuanzi-count><span class=post-meta-item id=busuanzi_container_site_uv> <span class=post-meta-item-icon> <i class="fa fa-user"></i> </span> <span class=site-uv title=总访客量> <span id=busuanzi_value_site_uv></span> </span> </span><span class=post-meta-item id=busuanzi_container_site_pv> <span class=post-meta-item-icon> <i class="fa fa-eye"></i> </span> <span class=site-pv title=总访问量> <span id=busuanzi_value_site_pv></span> </span> </span></div><div class=powered-by>由 <a href=https://hexo.io/ rel=noopener target=_blank>Hexo</a> & <a href=https://theme-next.js.org/pisces/ rel=noopener target=_blank>NexT.Pisces</a> 强力驱动</div></div></footer><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div><div class=sidebar-dimmer></div><div aria-label=返回顶部 class=back-to-top role=button><i class="fa fa-arrow-up fa-lg"></i><span>0%</span></div><div class=reading-progress-bar></div><a class="book-mark-link book-mark-link-fixed" role=button></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><script crossorigin=anonymous integrity=sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY= src=https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/comments.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/utils.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/motion.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/sidebar.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/next-boot.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/bookmark.min.js></script><script crossorigin=anonymous integrity=sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc= src=https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/third-party/search/local-search.min.js></script><script async src=https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><script class=next-config data-name=enableMath type=application/json>true</script><script class=next-config data-name=mathjax type=application/json>{"enable":true,"tags":"ams","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script><script src=https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-next/8.21.1/third-party/math/mathjax.min.js></script><script class=next-config data-name=waline type=application/json>{"lang":"zh-CN","enable":true,"serverURL":"https://waline.longluo.me/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":true,"libUrl":"https://unpkg.com/@waline/client@v2/dist/waline.js","locale":{"placeholder":"欢迎大家的留言！(留言只需要填昵称即可。) Welcome to comment!"},"emoji":["https://unpkg.com/@waline/emojis@1.0.1/qq"],"meta":["nick","mail","link"],"requiredMeta":[["nick"]],"wordLimit":0,"pageSize":10,"el":"#waline","comment":true,"path":"/page/19/"}</script><link href=https://unpkg.com/@waline/client@v2/dist/waline.css rel=stylesheet><script>document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});</script>